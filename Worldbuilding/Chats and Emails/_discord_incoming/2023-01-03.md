# Discord DM â€“ 2023-01-03

[2023-01-03 11:26 AM] Deciusmus: https://github.com/msackton/clenseau-campaign
[2023-01-03 11:26 AM] Deciusmus: it is a copy I was messing around wth
[2023-01-03 11:29 AM] Deciusmus: just pushed a version with a .gitignore to untrack everything outside of worldbuilding
[2023-01-03 11:31 AM] rsulfuratus: right. we need to think about organization a bit as it gets a little tricky and it works best if our directory structure are the same (e.g. it will break links in obsidian if one of us moves a file to a new directory since the links won't update)
[2023-01-03 11:31 AM] Deciusmus: yes, agreed
[2023-01-03 11:31 AM] Deciusmus: the above is a copy of my vault, I can throw it away
[2023-01-03 11:32 AM] Deciusmus: you should probably create the main repo and I'll fork it
[2023-01-03 11:32 AM] rsulfuratus: I think it is easier if I just give you push access to main repo, otherwise you'll always have to be submitting pull requests to merge and it gets annoying
[2023-01-03 11:32 AM] Deciusmus: right, ok
[2023-01-03 11:35 AM] Deciusmus: That makes more sense
[2023-01-03 11:35 AM] Deciusmus: You probably want the .gitignore to be 
    
    /*
    !/Worldbuilding
[2023-01-03 11:36 AM] Deciusmus: so that only the worldbuilding folder  is tracked
[2023-01-03 11:36 AM] rsulfuratus: yeah, the issue is what goes in worldbuilding
[2023-01-03 11:38 AM] Deciusmus: And I guess there are two parts... What is the folder structure and what is the threshold for adding something there?
[2023-01-03 11:38 AM] rsulfuratus: I think the folder structure is pretty easy, I have roughly the same structure as you do in worldbuilding already in my main vault
[2023-01-03 11:38 AM] rsulfuratus: subfolders within the main folders are a bit trickier
[2023-01-03 11:41 AM] rsulfuratus: hmm, it seems that obsidian is actually quite smart about finding links as long as you don't change the file name itself
[2023-01-03 11:41 AM] rsulfuratus: e.g. if you make a subfolder outside of obsidian and then move files around, it doesn't seem to break links
[2023-01-03 11:41 AM] rsulfuratus: as long as the filename is unique
[2023-01-03 11:42 AM] Deciusmus: I  don't think it is that hard to agree on a folder hierarchy honestly, I like your structure basically
[2023-01-03 11:42 AM] Deciusmus: it is more a question of what goes into worldbuilding vs not
[2023-01-03 11:42 AM] rsulfuratus: right, it is more that once I have more than 10-15 notes in a top level folder I like to make a subdirectory but it is hard/impossible to predict in advance all the subdirectories, and sub-sub-directories, we might want to create
[2023-01-03 11:43 AM] rsulfuratus: but that doesn't seem to be an issue so it is just a decision about what goes into worldbuilding
[2023-01-03 11:43 AM] rsulfuratus: as you say
[2023-01-03 11:44 AM] rsulfuratus: my current top level directory structure is:
    - Gods
    - Historical Events
    - Holidays
    - Items
    - NPCs
    - Organizations
    - PCs
[2023-01-03 11:44 AM] rsulfuratus: - Places
    - Planes
    - Vehicles
[2023-01-03 11:45 AM] Deciusmus: For example in your "NPCs" section it feels like most stay out of world building, but say Cha'mutte, Apollyon, and some of the fey belong in a common place
[2023-01-03 11:45 AM] Deciusmus: But the gods is probably entirely worldbuilding
[2023-01-03 11:45 AM] rsulfuratus: yeah Gods and Historical Events can probably just move entirely to worldbuliding
[2023-01-03 11:45 AM] rsulfuratus: Holidays maybe as well
[2023-01-03 11:45 AM] rsulfuratus: and Planes
[2023-01-03 11:45 AM] Deciusmus: I have:
    - NPCs
    - PCs
    - Worldbuilding
[2023-01-03 11:46 AM] rsulfuratus: Items, Organizations, NPCs, and Places are the trickiest
[2023-01-03 11:46 AM] Deciusmus: and then inside Worldbuilding I have:
    - Cultures
    - Festivals and Holidays
    - Gods and Other Powers
    - Legendary Places
    - Organizations
    - People
    - Places
    - Polities
    - Religions
    - Species
    - Timeline
[2023-01-03 11:47 AM] rsulfuratus: Items is maybe only 5-10% worldbuilding, but for example should the Chalice of the Runepriest or the Scepter of Command be in Worldbuilding?
[2023-01-03 11:47 AM] Deciusmus: no, not worth it
[2023-01-03 11:47 AM] Deciusmus: too many secrets, too campaign specific
[2023-01-03 11:47 AM] rsulfuratus: okay so items are easy then
[2023-01-03 11:47 AM] Deciusmus: I would say Items definitely keep separate
[2023-01-03 11:48 AM] Deciusmus: I would split "people" generally into NPCs (campaign specific) and People (world building)
[2023-01-03 11:48 AM] Deciusmus: or maybe Historical People
[2023-01-03 11:49 AM] rsulfuratus: I like that in theory but it is a bit tricky, e.g. Vistra Fireforge is in theory an NPC in both campaigns, yes? Or is this starting fresh and not following on from the one (ish) shot you ran
[2023-01-03 11:49 AM] Deciusmus: realistically, with the 100-year timegap our timelines don't really care about the specific people who are currently alive, with a few rare exceptions. And some "still alive" elf or fey who is important ruler can just go in historical people
[2023-01-03 11:49 AM] Deciusmus: Vistra Fireforge is in both games, yes
[2023-01-03 11:49 AM] Deciusmus: But does that really matter?
[2023-01-03 11:49 AM] rsulfuratus: well, if you ever go back to Tokra it would be fun to drop some stories from your campaign into this campaign via Vistra's memories
[2023-01-03 11:50 AM] Deciusmus: true
[2023-01-03 11:50 AM] rsulfuratus: much easier if I have your notes at my fingertips
[2023-01-03 11:50 AM] Deciusmus: but maybe in those rare cases it makes sense to do something manual
[2023-01-03 11:50 AM] rsulfuratus: well, what we could do is just add exceptions to our gitignore for shared NPCs
[2023-01-03 11:51 AM] rsulfuratus: that should work pretty well
[2023-01-03 11:51 AM] Deciusmus: true
[2023-01-03 11:52 AM] Deciusmus: So... items and npcs typically not shared, but could be via .gitignore exception.
    any world-historical figures (i.e. Cha'mutte) go in Historical Figures rather than NPCs
[2023-01-03 11:52 AM] Deciusmus: you could also add a gitignore excption for the scepter of command, if you wanted...
[2023-01-03 11:53 AM] rsulfuratus: right.
[2023-01-03 11:53 AM] rsulfuratus: I already have a historical figures subdir I can just move to worldbuilding/people
[2023-01-03 11:53 AM] Deciusmus: Organizations are a bit trickier
[2023-01-03 11:53 AM] rsulfuratus: and then gitignore exceptions in items and npcs as needed
[2023-01-03 11:54 AM] rsulfuratus: organizations and places are difficult, yes
[2023-01-03 11:54 AM] Deciusmus: I think for different reasons though
[2023-01-03 11:54 AM] Deciusmus: Places are tricky only in the sense of clutter
[2023-01-03 11:55 AM] Deciusmus: that is, outside of Ruins and Lairs the vast majority of your places exist in the world and would make sense in world building, it just isn't clear that it makes sense to have worldbuilding cluttered with a bunch of inns and stores and such
[2023-01-03 11:56 AM] rsulfuratus: If we keep places well organized, it is not too bad (until for example the same inn name shows up in multiple cities or something)
[2023-01-03 11:56 AM] Deciusmus: maybe for places just try it
[2023-01-03 11:57 AM] Deciusmus: it could be top level but shared
[2023-01-03 11:57 AM] Deciusmus: i.e.
    
    PCs
    NPCs
    Places
    WorldBuilding
[2023-01-03 11:57 AM] Deciusmus: PCs
    NPCs
    Items
    Places
    Worldbuilding
[2023-01-03 11:57 AM] Deciusmus: rather
[2023-01-03 11:57 AM] Deciusmus: or actually....
[2023-01-03 11:58 AM] rsulfuratus: we should agree to either https://docs.google.com/document/d/1rHG3lRP0M1K4jEJ1qh6xumRopiUJ_k5nCBfewwiHZKw/edit or https://docs.google.com/document/d/1azkJiSspFQxaqGY1pYE-cN8UorwyrW69hMaxAj_zvhA/edit#heading=h.hypwvyanv8e for place organization
[2023-01-03 11:59 AM] Deciusmus: I guess that raises a question... is "Sembara" a place?
[2023-01-03 11:59 AM] rsulfuratus: yeah I would call places something like Gazeteer
[2023-01-03 11:59 AM] Deciusmus: so maybe it is Gazeteer and it merges my "Polities" and "Places
[2023-01-03 11:59 AM] rsulfuratus: I think places should 100% include countries, e.g. Sembara should be there
[2023-01-03 12:00 PM] Deciusmus: I like the "Brief Geography of Taelgar" organization better
[2023-01-03 12:00 PM] rsulfuratus: yeah I do as well
[2023-01-03 12:01 PM] rsulfuratus: so I would call that section Gazetteer
[2023-01-03 12:02 PM] Deciusmus: So.. top level:
    
    - Campaigns
    - PCs
    - NPCs
    - Items
    - Gazeteer
    - Worldbuilding
    --- Holidays and Festivals
    --- Gods
    --- People
    --- Planes
    --- History
[2023-01-03 12:02 PM] Deciusmus: missing: Organizations
[2023-01-03 12:02 PM] rsulfuratus: and I would put the immediate stuff you need to reference to run the game there - physical descriptions, layout. e.g. https://tsackton.github.io/taelgarverse/Places/Dunmar/Tokra/Tokra.html
[2023-01-03 12:03 PM] Deciusmus: right makes sense
[2023-01-03 12:04 PM] rsulfuratus: I think something like Cultures, as well as Religions and Species all belong in Worldbuilding as top-level directories
[2023-01-03 12:04 PM] Deciusmus: yeah
[2023-01-03 12:04 PM] Deciusmus: I'm not sure about Cultures
[2023-01-03 12:04 PM] Deciusmus: I agree on Religions and Species
[2023-01-03 12:04 PM] rsulfuratus: cultures would be for like laws/politics/traditions of various places
[2023-01-03 12:04 PM] rsulfuratus: but maybe that can just be in places
[2023-01-03 12:04 PM] rsulfuratus: or rather in gazetter
[2023-01-03 12:05 PM] Deciusmus: right.. https://docs.google.com/document/d/1ju7iiEevevPQerj9EwGM_swFzjpJTNh3n2stpE00kLw/edit#heading=h.zb03uwaaa1vd
[2023-01-03 12:05 PM] Deciusmus: is stuff like that just part of the "Sembara" Gazeteer?
[2023-01-03 12:05 PM] Deciusmus: I think so, probably
[2023-01-03 12:06 PM] Deciusmus: no harm in having:
    
    Gazeteer\GreenSea\GreaterSembara\Semabara\Political Organization of Sembara.md or whatever
[2023-01-03 12:06 PM] rsulfuratus: yeah, that's fine
[2023-01-03 12:06 PM] rsulfuratus: gazetteer can be flexible, basically just a place for all the relevant current-day stuff
[2023-01-03 12:06 PM] Deciusmus: which probably eliminates the need for cultures
[2023-01-03 12:07 PM] rsulfuratus: i would suggest the goal be to keep notes as short as practical, though, and make overview notes with lots of links, instead of big walls of text
[2023-01-03 12:07 PM] rsulfuratus: the thing I struggle with with the google docs while running games is just finding stuff in 10,000 word documents, especially when I e.g. don't quite remember how I spelled someone's name
[2023-01-03 12:08 PM] Deciusmus: - Campaigns 
    - PCs
    - NPCs `[ shared if needed ]`
    - Items `[ shared if needed ]`
    - Vehicles
    - Gazeteer `[ shared, org geographically as per Brief Geography of Taelgar ]`
    - Worldbuilding `[ shared ]`
    --- Holidays and Festivals
    --- Gods
    --- People
    --- Planes
    --- History
    --- Religions
    --- Species
[2023-01-03 12:09 PM] rsulfuratus: yes, that is everything but organizations
[2023-01-03 12:10 PM] rsulfuratus: two quick comments though on this - gods should just be literal gods; we can either have an "Extraplanar Powers" subdir of People, or a separate "Extraplanar Powers" top level dir for things like Archfey, Cha'mutte, and the like
[2023-01-03 12:10 PM] Deciusmus: I like Extraplanar Powers under People
[2023-01-03 12:10 PM] rsulfuratus: And second I think we need a better name than Worldbuilding. Background isn't quite right
[2023-01-03 12:11 PM] rsulfuratus: worldbuilding feels too draft-y
[2023-01-03 12:11 PM] Deciusmus: I mean, with the gitignore approach it could just be top level folders
[2023-01-03 12:11 PM] rsulfuratus: that's true
[2023-01-03 12:11 PM] rsulfuratus: probably better
[2023-01-03 12:11 PM] rsulfuratus: actually, I like that, but maybe also keep worldbuliding as a place for drafts, ideas, things that might change, that sort of thing. totally freeform
[2023-01-03 12:12 PM] Deciusmus: sure
[2023-01-03 12:12 PM] Deciusmus: also for organizations, maybe roll into Gazeteer
[2023-01-03 12:12 PM] Deciusmus: and/or NPCs
[2023-01-03 12:12 PM] rsulfuratus: I like have gazetteer be a strict geographical organization
[2023-01-03 12:12 PM] Deciusmus: but for something like the Oracle of the Riven, it makes sense under the Tyrwingha Gazeteer
[2023-01-03 12:13 PM] Deciusmus: and for the Rangers, it makes sense under Greater Sembara, right?
[2023-01-03 12:13 PM] Deciusmus: and for stuff like the Deno'qai tribes, wouldn't that also make sense under the Gazeteer
[2023-01-03 12:13 PM] rsulfuratus: the Deno'qai tribes would make sense in a Gazetteer as they are tied to specific places
[2023-01-03 12:14 PM] rsulfuratus: but something like the Fraternity of the Empty Moon is harder to place
[2023-01-03 12:14 PM] Deciusmus: yeah
[2023-01-03 12:14 PM] rsulfuratus: I think Organizations is useful
[2023-01-03 12:14 PM] Deciusmus: maybe just a top level Organizations that starts unshared, and we can opt in for large scale organizations that should be shared
[2023-01-03 12:14 PM] rsulfuratus: but probably mostly for kind of more campaign-specific stuff, like NPCs
[2023-01-03 12:16 PM] rsulfuratus: I would say Gazetteer should generally be descriptions of places specifically, but can include details like political organization and culture of specific places. and some history may leak in, too, although in general it is probably better to make a separate note for e.g. "history of tokra" in the History/Dunmar section
[2023-01-03 12:17 PM] rsulfuratus: for the history section, I'd like to keep things as short as possible and try to focus most of the notes on specific events, for the reason that it eventually makes something like this possible: https://github.com/Darakah/obsidian-timelines
[2023-01-03 12:18 PM] rsulfuratus: I am going to clone your repo, merge the worldbuilding stuff and reorganize my notes, and then push the md files (with comments stripped) to github and send you the link and push permission
[2023-01-03 12:19 PM] Deciusmus: ok
[2023-01-03 12:19 PM] Deciusmus: if you give me 5 min I have a few tweaks based on this conversation
[2023-01-03 12:19 PM] rsulfuratus: okay
[2023-01-03 12:19 PM] rsulfuratus: i'll reorganize my local vault first and then incorporate your stuff
[2023-01-03 12:33 PM] Deciusmus: pushed
[2023-01-03 12:38 PM] Deciusmus: the gitignore is a bit anoying but pushed something that adds vistra fireforge
[2023-01-03 12:52 PM] rsulfuratus: the gitignore isn't great because it will break if I move where vistra is
[2023-01-03 12:52 PM] rsulfuratus: trying to find a better way
[2023-01-03 12:53 PM] Deciusmus: I looked for a few min and couldn't find a better way
[2023-01-03 12:53 PM] Deciusmus: you could do `**`/Vistra Fireforge.md but I think you still need to open up the folders via !folder
[2023-01-03 01:45 PM] rsulfuratus: working on other things and email. but almost have comment cleaning working and will push main repo shortly for you to test
[2023-01-03 01:57 PM] rsulfuratus: https://github.com/tsackton/taelgar
[2023-01-03 01:57 PM] rsulfuratus: if you clone it, make a few edits, and push them back I can test my "sync from remote" workflow
[2023-01-03 02:29 PM] Deciusmus: the gitignore doesnt work for vistra
[2023-01-03 02:29 PM] Deciusmus: I didn't get her in my sync
[2023-01-03 02:30 PM] rsulfuratus: oops yeah that is the wrong gitignore
[2023-01-03 02:30 PM] rsulfuratus: must have messed it up switching branchces
[2023-01-03 02:38 PM] rsulfuratus: there are still things kind of broken with my comment removal code and the gitignore
[2023-01-03 02:38 PM] rsulfuratus: I am going to fiddle a bit but might need to delete the repo and start again
[2023-01-03 02:55 PM] Deciusmus: ack it went away on me ðŸ˜¦
[2023-01-03 02:55 PM] Deciusmus: I had some updates I was going to push
[2023-01-03 02:55 PM] rsulfuratus: yeah my comment removal code is broken and I have to start again
[2023-01-03 02:56 PM] Deciusmus: meaning it kept comments?
[2023-01-03 02:56 PM] rsulfuratus: my code removed all comments but then the comments from the untracked files cannot be restored by switching branches because they are untracked
[2023-01-03 02:56 PM] rsulfuratus: so I need to figure out a different way
[2023-01-03 02:57 PM] rsulfuratus: you should still be able to push once I put the repo back
[2023-01-03 02:57 PM] rsulfuratus: but first I have to restore all my old notes from my backup to get back my comments
[2023-01-03 02:58 PM] Deciusmus: ok
[2023-01-03 02:59 PM] Deciusmus: just making sure I shouldn't delete my local repo because it was full of juicy secrets ðŸ™‚
[2023-01-03 02:59 PM] rsulfuratus: you can try just searching for `%%` and see
[2023-01-03 02:59 PM] rsulfuratus: just don't read anything if you find some comments
[2023-01-03 03:00 PM] Deciusmus: no comments
[2023-01-03 03:00 PM] rsulfuratus: there might be comments in the commit history
[2023-01-03 03:00 PM] rsulfuratus: but those are kind of hard to accidentally stumble upon
[2023-01-03 03:38 PM] Deciusmus: yeah
[2023-01-03 03:39 PM] Deciusmus: I think using git -f to force add something that is in gitignore will work better than anything else
[2023-01-03 03:54 PM] rsulfuratus: this is way more complicated than I thought, I think there are subtle weirdness coming from git + icloud
[2023-01-03 04:02 PM] Deciusmus: the issue is switching branches, right?
[2023-01-03 04:03 PM] rsulfuratus: it is a weird filename issue when there are odd characters in the file name
[2023-01-03 04:04 PM] rsulfuratus: I need to a) get a list of files with comments and b) check to see if each one is tracked
[2023-01-03 04:04 PM] rsulfuratus: then only remove comments from tracked files
[2023-01-03 04:05 PM] rsulfuratus: but the filenames that git ls-tree reports are not what grep likes for things with odd characters
[2023-01-03 04:11 PM] rsulfuratus: just had to do it in the reverse order, git check-ignore is okay with file names reported by grep "`%%`"
[2023-01-03 04:21 PM] rsulfuratus: okay I think I have it
[2023-01-03 04:23 PM] rsulfuratus: not quite
[2023-01-03 04:43 PM] rsulfuratus: looks like it is working now
[2023-01-03 04:43 PM] rsulfuratus: the repo on github is clean and I just gave you push access again
[2023-01-03 04:44 PM] rsulfuratus: once you push some changes I'll test my pull workflow
[2023-01-03 04:45 PM] Deciusmus: ok... my git repo and yours now have divergent history and I can't merge...
[2023-01-03 04:45 PM] Deciusmus: let me futz for a bit
[2023-01-03 04:46 PM] rsulfuratus: you can just delete your .git directory and reinitalize, probably
[2023-01-03 04:46 PM] rsulfuratus: or you might be able to rebase
[2023-01-03 04:47 PM] Deciusmus: yeah "futz" was shorthand for rebasing ðŸ™‚
[2023-01-03 04:47 PM] Deciusmus: I do work with git in my day job
[2023-01-03 04:50 PM] Deciusmus: a lot of conflicts though...
[2023-01-03 04:57 PM] Deciusmus: c:\Users\msackton\personal\OneDrive\taelgar>`git push
    remote: Permission to tsackton/taelgar.git denied to msackton.
    fatal: unable to access 'https://github.com/tsackton/taelgar.git/': The requested URL returned error: 403
[2023-01-03 04:57 PM] Deciusmus: duh
[2023-01-03 04:57 PM] Deciusmus: accept the invitation before pushing
[2023-01-03 04:57 PM] Deciusmus: ok, pushed
[2023-01-03 04:58 PM] Deciusmus: it was a big set of changes
[2023-01-03 04:59 PM] rsulfuratus: how did you get items in there, I don't see anything in gitignore
[2023-01-03 05:08 PM] Deciusmus: git add -f
[2023-01-03 05:08 PM] Deciusmus: you don't need git ignore
[2023-01-03 05:08 PM] Deciusmus: its much easier
[2023-01-03 05:09 PM] Deciusmus: basically, if we change the gitignore to ignore NPCs and Items and Organizations
[2023-01-03 05:09 PM] Deciusmus: you can overwrite it with
    
    git add -f `<file>`
[2023-01-03 05:09 PM] Deciusmus: then once that file is tracked it stays tracked
[2023-01-03 05:11 PM] rsulfuratus: a bigger issue is there isn't an obvious way to merge changes back into vault, since any merge will by default delete all my comments
[2023-01-03 05:12 PM] rsulfuratus: `*`my vault
[2023-01-03 05:12 PM] rsulfuratus: I am not sure that this will actually work in practice, or at least not how I currently have it set up
[2023-01-03 05:13 PM] Deciusmus: a merge shouldn't delete your comments
[2023-01-03 05:13 PM] Deciusmus: just do a git checkout secret_branch
[2023-01-03 05:13 PM] Deciusmus: git merge origin/main
[2023-01-03 05:13 PM] Deciusmus: ah
[2023-01-03 05:13 PM] rsulfuratus: that will delete comments in files where I removed comments before pushing to main
[2023-01-03 05:13 PM] Deciusmus: right
[2023-01-03 05:16 PM] Deciusmus: hrm
[2023-01-03 05:30 PM] rsulfuratus: this is like deep git stuff
[2023-01-03 05:36 PM] Deciusmus: So... here is one possible solution which might be a bit of a pain to implement....
[2023-01-03 05:36 PM] Deciusmus: use smudge and clean filters
[2023-01-03 05:38 PM] Deciusmus: You'd have to have a program/script that would:
    
    * Read the file
    * Replace `%%`SECRET NOTES FILENAME`%%` with the contents of secrets\filename
    
    And a second one that would:
    * read the file
    * Replace 
    `%%` SECRET NOTES 
    stuff
    `%%`
    * with the `%%`SECRET NOTES FILENAME`%%` and write the stuff it was replacing to secrets\filename
[2023-01-03 05:38 PM] Deciusmus: then make the first program the smudge filter - this runs on checkout
[2023-01-03 05:38 PM] Deciusmus: then make the second program the clean filter - this runs on checkin
[2023-01-03 05:39 PM] Deciusmus: I *think* you'd end up not really noticing the secrets
[2023-01-03 05:39 PM] Deciusmus: folder, I mean (which wouldn't be shared)
[2023-01-03 05:39 PM] rsulfuratus: hmm that might not actually be that bad
[2023-01-03 05:40 PM] Deciusmus: https://www.jimhester.com/post/2017-11-01-git_clean_smudge/
[2023-01-03 05:40 PM] Deciusmus: for an example
[2023-01-03 05:41 PM] Deciusmus: `[filter "p4"]`
        clean = git-p4-filter --clean %f
        smudge = git-p4-filter --smudge %f
[2023-01-03 05:41 PM] Deciusmus: as an example
[2023-01-03 05:41 PM] Deciusmus: so you could have a save-secrets.pl and restore-secrets.pl
[2023-01-03 05:41 PM] Deciusmus: clean = save-secrets %f
[2023-01-03 05:42 PM] Deciusmus: it gets invoked with the filename as the %f and then is given the file to be committed on stdin and writes what it wants to stdout
[2023-01-03 05:42 PM] Deciusmus: smudge is the opposite
[2023-01-03 05:42 PM] Deciusmus: it is given the repo file on stdin and adds what is written to stdout to the working tree
[2023-01-03 05:43 PM] rsulfuratus: i need to get my head around how it saves file-specific secrets
[2023-01-03 05:47 PM] rsulfuratus: all the examples I can find are like sed -e 's/com.blah.user-thing/com.blah.user-bnr/'
[2023-01-03 05:47 PM] rsulfuratus: whereas I need to replace `%%`(secret text)`%%` with `%%`(unique key)`%%` and then replace `%%`(unique key)`%%` with `%%`(secret text)`%%`
[2023-01-03 05:48 PM] Deciusmus: // See https://aka.ms/new-console-template for more information
    
    // invoke with secret-filter %f mysecretsdir -- written to assume all filenames are unique
    
    string? nextLine;
    while (true)
    {
        nextLine = Console.ReadLine();
        if (nextLine == null) break;
    
        if (nextLine == "`%%` SECRET NOTE PLACEHOLDER `%%`")
        {
            var secretNotePath = Path.Combine(args`[1]`, Path.GetFileNameWithoutExtension(args`[0]`));
            Console.WriteLine(File.ReadAllText(secretNotePath));
        }
        else
        {
            Console.WriteLine(nextLine);
        }
    }
[2023-01-03 05:49 PM] Deciusmus: it doesn't have to be a unique key
[2023-01-03 05:49 PM] Deciusmus: %f is the filename being processed; that is the key
[2023-01-03 05:54 PM] Deciusmus: // See https://aka.ms/new-console-template for more information
    
    // invoke with secret-filter restore %f mysecretsdir -- written to assume all filenames are unique
    // or with secret-filter save %f mysecretsdir -- written to assume all filenames are unique
    
    string? nextLine;
    var secretStorageForThisFile = Path.Combine(args`[2]`, Path.GetFileNameWithoutExtension(args`[1]`));
    
    while (true)
    {
        nextLine = Console.ReadLine();
        if (nextLine == null) break;
    
        if (args`[0]` == "restore")
        {
            // we are restoring secretes
            if (nextLine == "`%%` SECRET NOTE PLACEHOLDER `%%`")
            {
                Console.WriteLine(File.ReadAllText(secretStorageForThisFile));
            }
            else
            {
                Console.WriteLine(nextLine);
            }
        }
        else if (args`[0]` == "save")
        {
            // we are saving secrets
            if (nextLine == "`%%` SECRET NOTES ")
            {            
                // we write our placeholder to the output stream
                Console.WriteLine("`%%` SECRET NOTE PLACEHOLDER `%%`");
                while (true)
                {                
                    // read the input stream until we are done with the secret note; store in the secrets directory
                    var secretLine = Console.ReadLine();
                    if (secretLine == "`%%`" || secretLine == null)
                    {
                        break; // we are done reading secrets
                    }
                    else
                    {
                        File.WriteAllLines(secretStorageForThisFile, new`[]` { secretLine });
                    }
                }
            }
        }
    
       
    }
[2023-01-03 05:55 PM] rsulfuratus: chat gpt is translated your nasty C# to pretty Python for me
[2023-01-03 05:55 PM] rsulfuratus: ðŸ˜‚
[2023-01-03 05:59 PM] Deciusmus: haha
[2023-01-03 05:59 PM] Deciusmus: don't know if it works, to be honest
[2023-01-03 05:59 PM] Deciusmus: need to go make dinner rather than testing
[2023-01-03 05:59 PM] rsulfuratus: but it is a little tricky because comments can span multiple lines
[2023-01-03 06:00 PM] Deciusmus: the code above just keeps reading until it gets `%%` on its own line
[2023-01-03 06:00 PM] Deciusmus: or EOF
[2023-01-03 06:00 PM] Deciusmus: you have to start with
    
    `%%` SECRET NOTES
[2023-01-03 06:00 PM] Deciusmus: but
    
    `%%` SECRET NOTES
    
    It turns out the rangers are actually evil
    
    `%%`
[2023-01-03 06:00 PM] rsulfuratus: write but sometimes there are comments that are embedded in a string and you. need to just trim `%%` (text) `%%`
[2023-01-03 06:01 PM] rsulfuratus: I can rewrite with proper regexs, that is not too bad
[2023-01-03 08:00 PM] rsulfuratus: works!
[2023-01-03 08:00 PM] Deciusmus: cool
[2023-01-03 08:00 PM] rsulfuratus: nice find
[2023-01-03 08:00 PM] Deciusmus: I was just about to try to get my version working
[2023-01-03 08:00 PM] Deciusmus: with the hacky code I gave you above, it only works if you have 1 secret note at most per file
[2023-01-03 08:00 PM] rsulfuratus: yeah i track multiple secrets per file with regex groups
[2023-01-03 08:01 PM] rsulfuratus: only thing is it doesn't seem to be working for the file you added with git add -f
[2023-01-03 08:02 PM] rsulfuratus: works when I add it too
[2023-01-03 08:03 PM] rsulfuratus: but it might be easier to just modify .gitignore
[2023-01-03 08:03 PM] rsulfuratus: also, for the autogenerated html, it is much nicer if you use an actual header (with # or ##) instead of relying on the filename
[2023-01-03 08:04 PM] rsulfuratus: since the html generation can't add the filename as h1
[2023-01-03 08:04 PM] Deciusmus: ah
[2023-01-03 08:04 PM] Deciusmus: that is why you have the headers everywhere
[2023-01-03 08:04 PM] rsulfuratus: yeah
[2023-01-03 08:04 PM] Deciusmus: i'll make sure to add them in
[2023-01-03 08:04 PM] rsulfuratus: if you go to 'apperance ->` advanced' and uncheck 'show inline title' in obsidian
[2023-01-03 08:05 PM] rsulfuratus: you'll see how it will look on the generated html
[2023-01-03 08:06 PM] rsulfuratus: also, the one thing with my filter is that if you add secrets it gets testy, since I don't have the secrets to fill in
[2023-01-03 08:07 PM] rsulfuratus: I can probably fix that so the restore function ignores incoming files with actual comments and not `%%`SECRET`[1]``%%`
[2023-01-03 08:10 PM] rsulfuratus: actually, I think you might need to use the same filter, since if you push something with a secret to main, and then I do something to it and push changes, my filters will remove your secret
[2023-01-03 08:13 PM] Deciusmus: I dont care about secrets
[2023-01-03 08:13 PM] Deciusmus: I assume:
    
    `%%` GM Note: sss `%%`
[2023-01-03 08:13 PM] Deciusmus: will not be touched
[2023-01-03 08:14 PM] Deciusmus: or are you saying it tries to treat all `%%` as secrets?
[2023-01-03 08:14 PM] rsulfuratus: no that will disappear too, my filter replaces all Obsidian comments with `%%`SECRET`[1]``%%`
[2023-01-03 08:14 PM] Deciusmus: ah
[2023-01-03 08:14 PM] rsulfuratus: I could change that so that secrets always start `%%`SECRET
[2023-01-03 08:14 PM] Deciusmus: that isn't super ideal, it would be nicer if it replaced only `%%` Secret
[2023-01-03 08:14 PM] Deciusmus: or if it is easier, so that it didn't replace `%%`Shared Note
[2023-01-03 08:15 PM] rsulfuratus: right now I only have about 25-30 notes with secrets so it is probably easiest if I just make all secrets start `%%`SECRET
[2023-01-03 08:15 PM] Deciusmus: either way
[2023-01-03 08:15 PM] Deciusmus: I don't have any plans to push comments in public files in the next week or two anyway
[2023-01-03 08:16 PM] Deciusmus: I am planning on pushing some `%%` in some NPC files to keep info out of the html for players
[2023-01-03 08:21 PM] Deciusmus: fyi, you trashed my update to at least one file (the festival of the micracle of the mists)
[2023-01-03 08:22 PM] rsulfuratus: oh, hmm. not sure how that happened
[2023-01-03 08:28 PM] rsulfuratus: it looks like somehow I erased your commits after "minor sembara updates"
[2023-01-03 08:29 PM] rsulfuratus: actually that's not right
[2023-01-03 08:30 PM] Deciusmus: it does look like Vistra got reverted as well
[2023-01-03 08:31 PM] rsulfuratus: I think it is just Vistra and the Festival
[2023-01-03 08:33 PM] Deciusmus: yeah I fixed it
[2023-01-03 08:45 PM] rsulfuratus: i got my filter working to just remove `%%`SECRET
[2023-01-03 08:47 PM] rsulfuratus: as long as your comments don't start `%%`SECRET they should just pass through untouched

