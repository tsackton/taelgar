# Discord DM – 2023-11-16

[2023-11-16 08:25 AM] rsulfuratus: pushed a region and climate map (png, leaflet versions in worldbuilding, coords might be wrong). they are huge, will try to shrink for loading speed when I have more time
[2023-11-16 08:32 AM] rsulfuratus: check that - will push when I'm somewhere with better internet than Diesel
[2023-11-16 12:05 PM] Deciusmus: I am mostly working today, but took a few minutes to do a bit of refactoring...
    
    I implemented a "getFileFromTarget" method that will, given a string, return the "best match" file or undefined.
    1) If there is an exact link (i.e. if [[target]] would work) it returns the exact link
    2) otherwise, if there is a file with an alias, it returns the first one that matches (if you have 2 people with an alias of Robin it will return the first one it finds)
    3) otherwise, it looks at a "filemap" structure in the metadata.json that looks like 
    
    ``` "filemap": `[
            {
                "name": "Mike",
                "file": "Delwath"
            },
    ```
    
    The filemap is intended to be used to allow you to map terms (like say DuFr or clee) to a file without having those terms clutter up the alias namespace. Main uses are expected to be replacing the "campaigns" structure and potentially linking players to PCs, or providing short names for frontmatter for long names
[2023-11-16 12:15 PM] Deciusmus: I also implemented a new getName which takes:
    * a target string
    * a linkType (never, always, exists)
    * a case (title, default)
    
    And returns the right thing (i.e. something like [[x]] or x or [[name|x]] or whatever)
[2023-11-16 12:16 PM] Deciusmus: The main question is do you see any value in the campaign data? Right now it is just used to lookup the name for "clee" or "DuFr" for "last met by party" but I'd rather just use the name of the party page instead
[2023-11-16 12:35 PM] Deciusmus: Then I would also get rid of the species and culture descriptor and we could either add aliases to the target pages or just use the file map
[2023-11-16 02:03 PM] rsulfuratus: I don’t think there is any value in the campaign data
[2023-11-16 02:17 PM] Deciusmus: Slight spec update:
    
    * "linkmap" { "from" : string, "to" : fileThatExists, "isAlias": true | false }
[2023-11-16 02:25 PM] Deciusmus: Behavior:
    
    Assume a file: Something with aliases Thing and Some and definitive article of "the"
    Assume 2 linkmap entries :  { "from" : "st, "to" : "Something",  "isAlias":  false } &&   { "from" : "Special Something", "to" : "Something",  "isAlias":  true }
    
    getName("st") =>` "the [[Something]]"
    getName("Something") =>` "the [[Something]]"
    getName("Thing") =>` "[[Thing|Something]]"
    getName("Some") =>` "[[Some|Something]]"
    getName("Special Something") =>` "[[Special Something|Something]]"
[2023-11-16 02:46 PM] Deciusmus: So basically:
    
    If your frontmatter (i.e. partOf: x) is an alias, you get
    
    a village in `[Alias|Real]`
[2023-11-16 02:46 PM] Deciusmus: We **don't** apply definitive articles to aliases, as it isn't clear the make sense
[2023-11-16 02:59 PM] Deciusmus: You can in theory get slightly weird cases, i.e. if Open Scroll Hunters is an aliases for Society of the Open Scroll then  adding leaderOf: Open Scroll Hunters will generate
    
    Leader of Open Scroll Hunters instead of
    Leader of the Open Scroll Hunters
[2023-11-16 02:59 PM] Deciusmus: but I think fixing that is too complicated
[2023-11-16 03:24 PM] rsulfuratus: that seems fine. it is less typing to add an article than to modify the link to generate an alias, and if there are a few random slightly grammatically incorrect pages no one will care
[2023-11-16 03:47 PM] rsulfuratus: adding a few little bits to region notes during the day and realizing at some point I probably need to decide if Taelgar is the world or the continent....
[2023-11-16 04:12 PM] Deciusmus: I think its definitely the world
[2023-11-16 04:12 PM] Deciusmus: Hkar was on Taelgar
[2023-11-16 04:13 PM] Deciusmus: The mariners who sailed across the endless ocean were on Taelgar
[2023-11-16 04:13 PM] Deciusmus: I just think no one has a world for the continent because no one has any reason to think about it
[2023-11-16 04:13 PM] Deciusmus: I guess the first humans would have had a world for it
[2023-11-16 04:13 PM] Deciusmus: where did they sail to from Hkar? I don't think they were sailing from Hkar to Taelgar, they were on Taelgar sailing from Hkar to (??)
[2023-11-16 04:59 PM] rsulfuratus: I’m going to add a note on this
[2023-11-16 05:28 PM] Deciusmus: I am going to push a massive refactor of the Javascript code
[2023-11-16 05:30 PM] Deciusmus: It is dramatically cleaned up. Take a look at the metadata.json that I will be pushing (in the .obisidian folder) -- it is shared, but lets you tweak some things now (mostly the default displayDefaults per type) but I'm moving towards putting more text in there (i.e. eventually I want to move a lot of the format strings into metadata.json)
[2023-11-16 05:32 PM] Deciusmus: If you see casing decisions or "max pieces" for locations you don't like, should be pretty straightforward to fix
[2023-11-16 06:02 PM] rsulfuratus: great
[2023-11-16 06:04 PM] rsulfuratus: really it would be ideal if basically all the format strings were set in a json file by type, individually override-able by displayDefaults. then you could just delete displayDefaults entirely unless you want a non-default value. really I guess should be called displayOverrides then or something
[2023-11-16 06:04 PM] rsulfuratus: python code could also then read from same json to get consistent formatting
[2023-11-16 06:13 PM] Deciusmus: A few quick notes then I need to go make dinner:
    
    1. Use partOf to chain things together. For example, you can set a halfling boat to be "partOf" an ocean, and a halfling to have their whereabouts location the boat, and you will get: Current location: [[Wave Dancer]], the [[Green Sea]]
    2. Same deal with items. The people who current location is set to Mirror of Soul Trapping will correctly backlink to the item page (you could have an item by partOf something else
    3. You can even set items to be part of other items. For example, if you set Mirror of Soul Trapping to be part of Vindristjarna then Antonia's location becomes:  [[Mirror of Soul Trapping]], [[Vindristjarna]] 
    
    I set the default for definitiveArticle (in metadata.json) to be "" for person and default pages.  That can be changed per page or in the metadata.json. We don't process articles for links that don't match a page
[2023-11-16 06:17 PM] rsulfuratus: what functions call partOf chains? these are currently just used to construct location (for person/whereabouts and place)
[2023-11-16 06:17 PM] rsulfuratus: ?
[2023-11-16 06:17 PM] rsulfuratus: reason for question is figuring out when it is even useful to add partOf to something atypical
[2023-11-16 06:18 PM] rsulfuratus: e.g., it does nothing if you set phasing stones to be partOf Vindristjarna, unless a person is in a phasing stone or a place is partOf a phasing stone
[2023-11-16 06:20 PM] rsulfuratus: basically, anything a place or a person could occupy could be cool to add partOf information to, but it is more-or-less meaningless for things a person or place can't/don't occupy
[2023-11-16 06:20 PM] rsulfuratus: the use case for vehicles, though, is very cool
[2023-11-16 06:53 PM] Deciusmus: Currently partOf is only used for locations (so whereabouts type info plus “party met” lines)
[2023-11-16 06:56 PM] Deciusmus: It’s pretty trivial to change things to follow the chain
[2023-11-16 07:09 PM] rsulfuratus: looking at your javascript refactor
[2023-11-16 07:10 PM] rsulfuratus: with things organized the way they are, I think the best way to handle the python code is to let chatgpt translate each javascript class and then rewrite functions to replicate the obsidian api calls.
[2023-11-16 07:11 PM] rsulfuratus: in the nameManager, they look pretty simple
[2023-11-16 07:13 PM] Deciusmus: But I think broadly there are probably 4 types of relationships:
    - partOf
    - whereabouts
    - typeOf
    - memberOf
    
    I think your phasing stone example is actually whereabouts.
[2023-11-16 07:18 PM] rsulfuratus: i think fundamentally there are three relationships:
    1. whereabouts, which tells you where something is in relationship to the fixed world
    2. partOf, which tells you the hierarchy of names for a fixed point
    3. typeOf (of which memberOf is a special category), which tells you what larger thing this thing is a specific example of
[2023-11-16 07:18 PM] rsulfuratus: however, in some cases it probably makes sense to use partOf to track location, instead of whereabouts, because it is simpler
[2023-11-16 07:19 PM] rsulfuratus: formally, an item like mirror of soul trapping shouldn't be partOf anything, it should have a whereabouts; same with a ship
[2023-11-16 07:20 PM] rsulfuratus: so formally if your whereabouts are in something that itself has a whereabouts, you should get the current location of the "parent", and then follow the partOf chain up
[2023-11-16 07:21 PM] rsulfuratus: so in the complicated setup of Antonia, you could have:
    - Antonia's current location is Mirror of Soul Trapping
    - Mirror of Soul Trapping's current location is Vindristjarna
    - Vindristjarna's current location is LakeOutsideOrenlas
    - LakeOutsideOrenlas is partOf Cymean Peninsula, which is partOf Western Green Sea
    
    So for Antonia you get:
    current location: MIrror of Soul Trapping, Vindristjarna, LakeOutsideOrenlas, Cymean Peninsula, Western Green Sea Region
[2023-11-16 07:23 PM] rsulfuratus: However, the whole point of whereabouts is that we want to be able to separately track the location of people across time
[2023-11-16 07:24 PM] rsulfuratus: So a shared NPC can have a different location in 1720 and 1749
[2023-11-16 07:24 PM] rsulfuratus: it seems like for items, that is never going to happen
[2023-11-16 07:24 PM] rsulfuratus: so using partOf as a simple what to implement a fixed whereabouts is probably a good, simple idea
[2023-11-16 07:25 PM] rsulfuratus: basically, you can overload partOf as a way to track a single fixed location for something, which probably covers all the important use cases
[2023-11-16 07:26 PM] rsulfuratus: the alernative would be to use whereabouts, but basically assume that items can never go on trips, they just move homes
[2023-11-16 07:26 PM] rsulfuratus: so you can never have an unknown current location, you always have a current home
[2023-11-16 07:27 PM] rsulfuratus: or maybe the code is organized neatly enough that there is no reason not to just check - does a page have partOf? if yes grab that page, if no check does page have whereabouts? if yes grab current location, if no stop
[2023-11-16 07:28 PM] rsulfuratus: and just repeat for each step up the chain
[2023-11-16 07:30 PM] Deciusmus: Honestly just having a single whereabouts with type home and no dates is fine. Esp if I add a displayOverrides for home
[2023-11-16 07:31 PM] Deciusmus: So then you could have mirror show as “in” or “stored in” Vindistraja
[2023-11-16 07:31 PM] Deciusmus: Using whereabouts
[2023-11-16 07:31 PM] Deciusmus: But then really we are saying that things that are moveable have whereabouts and things that are fixed have partOf
[2023-11-16 07:32 PM] Deciusmus: And “location” just follows the chain
[2023-11-16 07:33 PM] rsulfuratus: yes, the implication is that having both a partOf and a whereabouts is an error, although I would say in that case you follow the partOf chain
[2023-11-16 07:35 PM] rsulfuratus: but honestly each header generation could just check:
    if a page has partOf, generate a location chain from the partOf and display the "a `<typeOf>` in partOf1, partOf2, partOf3"
    if a page has whereabouts, generate the get_whereabouts line
[2023-11-16 07:36 PM] rsulfuratus: you actually might not ever need to really check type
[2023-11-16 07:37 PM] rsulfuratus: Owner: Beryl could just be tracked by:
    whereabouts: `[ { type= "home", location = "Beryl" } ]`
[2023-11-16 07:38 PM] rsulfuratus: I mean this might be a lot of work to refactor for not much benefit
[2023-11-16 07:41 PM] Deciusmus: I like reducing special cases
[2023-11-16 07:42 PM] rsulfuratus: it would be a lot of fun to add all the whereabouts for e.g. the scepter of command - apollyon ->` "lost" ->` werewolf dude ->` agata ->` delwath ->` wellby
[2023-11-16 07:43 PM] Deciusmus: Yeah
[2023-11-16 07:43 PM] Deciusmus: I think it’s fine to have whereabouts for items instead of owners
[2023-11-16 07:44 PM] Deciusmus: Honestly I think basically the idea is that anything can have a whereabouts in which case we add a whereabouts script
[2023-11-16 07:44 PM] Deciusmus: Anything can instead have a partOf in which case we generate a static part of line
[2023-11-16 07:45 PM] Deciusmus: You can go from whereabouts ->` part of but not part of ->` whereabouts
[2023-11-16 07:45 PM] rsulfuratus: yes, I think that would be the idea
[2023-11-16 07:47 PM] Deciusmus: The placeType is removed in favor of a displayDefaults
[2023-11-16 07:47 PM] rsulfuratus: basically, a header is three kinds of things:
    type specific static text
    a whereabouts line if whereabouts exist || a partOf line if partOf exists
    a page dated line if dates exist (+ regnal dates line if regnal dates exist)
[2023-11-16 07:48 PM] rsulfuratus: maker/owner is just origin/home
[2023-11-16 07:48 PM] rsulfuratus: org "Based in: " is just whereabouts home
[2023-11-16 07:48 PM] Deciusmus: Right I guess an org could move
[2023-11-16 07:49 PM] rsulfuratus: could even have orgs that move:
    Omnis Pura
    Originally based in: Drankor, Drankorian Empire
    Based in: Chardon, Chardonian Empire
[2023-11-16 07:49 PM] rsulfuratus: Organizations can have whereabouts or partOf but not both
[2023-11-16 07:50 PM] rsulfuratus: hmm actually you might want both
[2023-11-16 07:50 PM] rsulfuratus: I think you don't care if something has both a whereabouts and a partOf
[2023-11-16 07:51 PM] rsulfuratus: just, when you follow a location chain, you follow partOf if it exists, and only check for whereabouts if partOf doesn't exist
[2023-11-16 07:51 PM] Deciusmus: Right
[2023-11-16 07:51 PM] Deciusmus: Although I’m not sure that is right
[2023-11-16 07:51 PM] rsulfuratus: but you also probably want a displayDefault to override following location chain
[2023-11-16 07:51 PM] Deciusmus: Im not sure the use case for both actually
[2023-11-16 07:52 PM] rsulfuratus: ```
    ---
    tags: `[organization]`
    displayDefaults: {startStatus: founded, startPrefix: "existed ", endPrefix: " ", endStatus: disbanded}
    campaignInfo: `[]`
    name: The Family of Someones
    pronunciation: s-o-someht
    created: 1600
    destroyed: 1700
    basedIn: Cleenseau
    orgType: family
    partOf: OrganizationWithAll
    ---
    # The Family of Someones
    *(s-o-someht)*
    >``[!info]`+ Summary
    >``$=dv.view("_scripts/view/get_PageDatedValue")`
    >` Based in: [[Cleenseau]], [[Barony of Aveil]], [[Sembara]]
    >` Parent Organization: [[OrganizationWithAll|Something Org Something]]
    ```
[2023-11-16 07:52 PM] rsulfuratus: I'm not sure I can think of a real organization that has this property
[2023-11-16 07:53 PM] rsulfuratus: but if we are eliminating special cases, you don't want basedIn, you just want a home whereabouts
[2023-11-16 07:54 PM] rsulfuratus: so actually all the sembaran army stuff would need both a whereabouts and a partOf
[2023-11-16 07:54 PM] Deciusmus: I agree org should have a whereabouts for its location but Im not sure about part of
[2023-11-16 07:55 PM] rsulfuratus: you were the one who wanted partOf to track the sembaran army subunits originally
[2023-11-16 07:58 PM] rsulfuratus: Anyway, I think the generic header is:
    ```markdown
    # DisplayName
    *(pronunciation)*
    >``[!info]` BOXNAME
    >` TYPE-SPECIFIC TEXT
    >` pagedated if it exists
    >` partOf if it exists `[static line, not auto-generated]`
    >` whereabouts if it exists
    ```
[2023-11-16 07:59 PM] rsulfuratus: oh, add: 
    Campaign info if exists at the end
[2023-11-16 07:59 PM] rsulfuratus: e.g., no reason you can't have "Last visited on:" for a place if you want, but probably I wouldn't bother for most things
[2023-11-16 08:00 PM] rsulfuratus: campaign is static line
[2023-11-16 08:00 PM] rsulfuratus: pagedated includes regnal values
[2023-11-16 08:04 PM] Deciusmus: Right. Forgot about that
[2023-11-16 08:04 PM] rsulfuratus: actually, you could disallow partOf for organizations by allowing organizations to have affiliations maybe
[2023-11-16 08:04 PM] Deciusmus: I was thinking it might be cleaner to have@something like that
[2023-11-16 08:05 PM] rsulfuratus: actually if you did that you could dramatically simplify header generation, because you (almost) wouldn't care about type
[2023-11-16 08:06 PM] rsulfuratus: the only thing that would have special type-specific text would be items (for rarity / magical / typeOf) and people
[2023-11-16 08:06 PM] Deciusmus: Right
[2023-11-16 08:06 PM] rsulfuratus: those are unique enough that it probably doesn't make sense to try to generalize
[2023-11-16 08:07 PM] rsulfuratus: then you just have:
    - additional static line if partOf exists
    - additional static line if affiliations exist
    - dataview line if whereabouts exist
    - dataview line if dates exist
    - dataview line if reign information exists
[2023-11-16 08:09 PM] rsulfuratus: actually, this would be really great. you could use partOf to represent also events - e.g., "a battle in the Great War"
[2023-11-16 08:10 PM] rsulfuratus: same concept - a fixed point in time is part of multiple events
[2023-11-16 08:10 PM] rsulfuratus: the key thing about partOf is that it is *fixed* - whether the battle of urlich pass is always a battle in the great war no matter your time reference
[2023-11-16 08:10 PM] Deciusmus: Right
[2023-11-16 08:11 PM] Deciusmus: I also think partOf implies a "same type" relationship
[2023-11-16 08:11 PM] rsulfuratus: i'm really into the summary boxes because when I was cleaning up stubs I noticed that at least 50% of places really only need a summary box and one or two lines of text to capture all the relevant information about them
[2023-11-16 08:11 PM] rsulfuratus: yes
[2023-11-16 08:11 PM] Deciusmus: I am not going to enforce it
[2023-11-16 08:11 PM] Deciusmus: but logically an event can be part of an event
[2023-11-16 08:12 PM] Deciusmus: and an place can be part of a place
[2023-11-16 08:12 PM] Deciusmus: but an event shouldn't be part of a place
[2023-11-16 08:12 PM] rsulfuratus: right, because an event is a partOf in the time dimension, and a place is partOf in the space dimension
[2023-11-16 08:12 PM] Deciusmus: right
[2023-11-16 08:12 PM] rsulfuratus: but, in the feywild, an event could be part of a place
[2023-11-16 08:12 PM] Deciusmus: (We might also want a "whereabouts" for events)
[2023-11-16 08:12 PM] rsulfuratus: sunset is part of Amberglow
[2023-11-16 08:13 PM] rsulfuratus: I'm not sure what a whereabouts for events would mean
[2023-11-16 08:13 PM] Deciusmus: Where the event happened
[2023-11-16 08:13 PM] Deciusmus: The whereabouts is the "location" of something
[2023-11-16 08:13 PM] rsulfuratus: right, okay
[2023-11-16 08:14 PM] Deciusmus: I wonder though if it would make sense to allow:
    
    whereabouts: `<string>`
[2023-11-16 08:14 PM] Deciusmus: as a shorthand
[2023-11-16 08:14 PM] Deciusmus: for:
    
    whereabouts:
    - { type: home, location: `<string>` }
[2023-11-16 08:14 PM] rsulfuratus: yeah that would only be a few lines of code and would potentially save a lot of typing
[2023-11-16 08:15 PM] Deciusmus: Sure
[2023-11-16 08:16 PM] rsulfuratus: I think if we allow whereabouts for events, we should assume by default that created = destroyed = DR, or if DR_end exists, created = DR, destroyed = DR_end
[2023-11-16 08:17 PM] rsulfuratus: that will then allow timeline code to work without having to retype dates and still give you the "happened in the past" logic of whereabouts, e.g. "Happened in: " vs "Happening in: "
[2023-11-16 08:18 PM] rsulfuratus: this would be nice for me since I have event pages for the siblings war (Sura vs Karnas) and the War of the Cloak (Grash vs orcs) that are "happening now" but at some point will be happening in the past
[2023-11-16 08:19 PM] rsulfuratus: I mean it is a tiny display point but would be satisfying to see those change from "Occurring in: " to "Happened in: " as the campaign progresses automatically
[2023-11-16 08:24 PM] Deciusmus: yeah
[2023-11-16 08:24 PM] Deciusmus: So I pushed
    
    whereabouts: `<string>` as shorthand
[2023-11-16 08:24 PM] Deciusmus: I think to make this work nicely I need to write some code to generate the home/origin etc lines from displayDefaults
[2023-11-16 08:25 PM] Deciusmus: so you don't get
    
    lived in:
[2023-11-16 08:25 PM] Deciusmus: for event-based whereabouts
[2023-11-16 08:25 PM] rsulfuratus: yes, and for maker/owner in items
[2023-11-16 08:25 PM] rsulfuratus: you need a:
    originText
    alivehomeText
    deadhomeText
    currentLocationText
[2023-11-16 08:26 PM] Deciusmus: I am not sure about currentLocationText
[2023-11-16 08:26 PM] Deciusmus: isn't "current location" always accurate?
[2023-11-16 08:26 PM] Deciusmus: (There is also Last Known)
[2023-11-16 08:26 PM] rsulfuratus: right, assuming we never use "away" whereabouts for anything that is not a person or an item
[2023-11-16 08:27 PM] rsulfuratus: which is probably a safe assumption
[2023-11-16 08:27 PM] Deciusmus: right, if it isn't a moveable item it definitely shouldn't have away whereabouts
[2023-11-16 08:27 PM] Deciusmus: what does it mean for it to be "away"
[2023-11-16 08:28 PM] rsulfuratus: right
[2023-11-16 08:28 PM] Deciusmus: (maybe a demi-plane has away whereabouts, but Current location: the Astral Plane seems fine in that case)
[2023-11-16 08:28 PM] rsulfuratus: although a secret organization could have an "Originally Based In: " / "Currently Based In: "
[2023-11-16 08:28 PM] rsulfuratus: sorry, Last Known:
[2023-11-16 08:29 PM] Deciusmus: but isn't Last Known location probably correct then?
[2023-11-16 08:29 PM] rsulfuratus: yeah, probably
[2023-11-16 08:29 PM] rsulfuratus: I guess if I were doing it I'd just remove all hardcoded text strings and just load a json for everything
[2023-11-16 08:29 PM] rsulfuratus: some things can have global defaults
[2023-11-16 08:29 PM] Deciusmus: btw if you are mucking with metadata.json - you can add a hotkey to customJS to run the "init" script
[2023-11-16 08:30 PM] Deciusmus: then if you hit the hotkey it reloads and you can see the effect of the new metadata.json
[2023-11-16 08:30 PM] Deciusmus: I'm going to define a new type: event which is anything with a DR or DR_end
[2023-11-16 08:30 PM] Deciusmus: (or CY or CY_end, I guess)
[2023-11-16 08:30 PM] rsulfuratus: then you just replace defaults.displayItem with displayDefaults.displayItem
[2023-11-16 08:30 PM] Deciusmus: to get display defaults
[2023-11-16 08:30 PM] rsulfuratus: yeah, good
[2023-11-16 08:37 PM] Deciusmus: "whereaboutsOrigin" : "Originally from: `<loc>`", 
                "whereaboutsHome": "Based in: `<loc>`", 
                "whereaboutsPastHome": "Lived in: `<loc>`"
[2023-11-16 08:38 PM] rsulfuratus: On a totally different topic, I got ChatGPT to come up with a few possible names for the main continent based on proto-Indo-European:
    - ahl-EE-os
    - ahl-TER-os 
    - NAY-wos 
    - DHAY-ghom
[2023-11-16 08:39 PM] rsulfuratus: All based around foreign / alien / new / distant
[2023-11-16 08:40 PM] Deciusmus: Most appealing of those is ahl-ter-os
[2023-11-16 08:41 PM] Deciusmus: but I think let it sit for a bit
[2023-11-16 08:41 PM] Deciusmus: "item": {
                "startStatus": "created",
                "startPrefix": "created",
                "endPrefix": "destroyed",
                "endStatus": "destroyed",
                "whereaboutsOrigin" : "Made by: `<loc>`", 
                "whereaboutsHome": "Owner: `<loc>`", 
                "whereaboutsPastHome": "Was owned by: `<loc>`"
            },
            "organization": {
                "startStatus": "founded",
                "startPrefix": "founded",
                "endPrefix": "disbanded",
                "endStatus": "disbanded",
                "whereaboutsOrigin" : "Founded in: `<loc>`", 
                "whereaboutsHome": "Based in: `<loc>`", 
                "whereaboutsPastHome": "Was based in: `<loc>`"
            },
            "event": {
                "startStatus": "started",
                "startPrefix": "",
                "endPrefix": "ended",
                "endStatus": "",            
                "whereaboutsOrigin" : "Happened in: `<loc>`", 
                "whereaboutsHome": "Occurring in: `<loc>`", 
                "whereaboutsPastHome": "Happened in: `<loc>`"
            },
[2023-11-16 08:42 PM] Deciusmus: an origin whereabouts for an event is weird, it implies an event happened in multiple places
[2023-11-16 08:42 PM] Deciusmus: I guess it could have
[2023-11-16 08:42 PM] Deciusmus: maybe Started in is bette
[2023-11-16 08:42 PM] rsulfuratus: Started in for event origin yes
[2023-11-16 08:44 PM] rsulfuratus: shouldn't event have startPrefix = startStatus and same for end?
[2023-11-16 08:44 PM] rsulfuratus: or I guess the idea is:
    1455 - 1470
[2023-11-16 08:45 PM] Deciusmus: yeah, that
[2023-11-16 08:45 PM] Deciusmus: oops but I mixed up endPrefix and endStatus
[2023-11-16 08:46 PM] rsulfuratus: so if you have an event with an end date but not a start date:
    ended in 1450
    with a start date but not an end date:
    started in 1400
    with both:
    1400-1450
[2023-11-16 08:46 PM] rsulfuratus: I'd make it "started in" and "ended in"
[2023-11-16 08:52 PM] Deciusmus: one day/one year moment in time events are a bit of a pain
[2023-11-16 08:53 PM] Deciusmus: you have to say DR and DR_end to get an end date
[2023-11-16 08:53 PM] Deciusmus: I wonder if we should assume DR_end = DR
[2023-11-16 08:53 PM] rsulfuratus: yes, I think you should
[2023-11-16 08:53 PM] Deciusmus: probably
[2023-11-16 08:54 PM] rsulfuratus: an event that is ongoing can probably just set DR_end to some far date in the future
[2023-11-16 08:54 PM] rsulfuratus: only annoying thing would be auto-populating "Event ended" in timelines
[2023-11-16 08:55 PM] rsulfuratus: probably the most correct thing is to set DR_end if DR unless DR_end is null, in which case this is an ongoing event
[2023-11-16 08:55 PM] rsulfuratus: same logic as away whereabouts
[2023-11-16 08:56 PM] Deciusmus: well, that isn't what whereabouts does
[2023-11-16 08:56 PM] Deciusmus: but I can do the definite article tricky
[2023-11-16 08:56 PM] rsulfuratus: not coding logic
[2023-11-16 08:56 PM] Deciusmus: Ah, right
[2023-11-16 08:56 PM] Deciusmus: I see what you mean
[2023-11-16 08:56 PM] rsulfuratus: same logic in that undefined has meaning
[2023-11-16 09:04 PM] Deciusmus: I was going to define 3 strings:
    
    pagePastWithStart
    pagePast
    pageCurrent
    
    Do you think there is any point in keeping startPrefix, startStatus or endPrefix?
[2023-11-16 09:04 PM] Deciusmus: Separate endStatus I like because it is used in whereabouts when you are dead
[2023-11-16 09:05 PM] Deciusmus: I guess we use start for events timelines
[2023-11-16 09:05 PM] Deciusmus: But I think the prefixes are unnecesary
[2023-11-16 09:08 PM] rsulfuratus: They are used for b. and d. in people pages aren’t they?
[2023-11-16 09:12 PM] Deciusmus: "pageCurrent": "`<start>` `<startDate>` (`<length>` years old)",
                "pagePastWithStart": "b. `<startDate>` - d. `<endDate>`, `<end>` at age `<length>`",
                "pagePast": "`<end>` `<endDate>`"
[2023-11-16 09:12 PM] rsulfuratus: but that doesn't work
[2023-11-16 09:12 PM] Deciusmus: why not?
[2023-11-16 09:12 PM] rsulfuratus: or rather you mean you can change that whole string
[2023-11-16 09:12 PM] Deciusmus: yes
[2023-11-16 09:13 PM] Deciusmus: you can set:
    end and start to whatever
[2023-11-16 09:13 PM] Deciusmus: or the whole string
[2023-11-16 09:13 PM] Deciusmus: so you could do:
    
    displayDefaults: { end: killed }
    
    and you will get
    
    b. `<startDate>` - d. `<endDate>`, killed  at age `<length>`
[2023-11-16 09:14 PM] Deciusmus: or if you want something weird, you can do:
    pagePastWithStart: "fell from heaven in `<startDate>` and was returned to hell in `<endDate>`"
[2023-11-16 09:14 PM] Deciusmus: both in the frontmatter
[2023-11-16 09:14 PM] rsulfuratus: "pagePastWithStart": "b. `<startDate>` - d. `<endDate>`, `<end>` at age `<length>`" into 
     "pagePastWithStart": "`<shortStart>``<startDate>` - `<shortEnd>``<endDate>`, `<end>` at age `<length>`"
[2023-11-16 09:14 PM] rsulfuratus: ah see what you are saying now
[2023-11-16 09:14 PM] Deciusmus: also, there is a metadata.json that sets the defaults for each type, i.e. item has:
    
                "pageCurrent": "`<start>` `<startDate>` (`<length>` years ago)",
                "pagePastWithStart": "`<startDate>` - `<endDate>`, `<end>` after `<length>` years",
                "pagePast": "`<end>` `<endDate>`"
[2023-11-16 09:15 PM] Deciusmus: whereas person has:
    
                "pageCurrent": "`<start>` `<startDate>` (`<length>` years old)",
                "pagePastWithStart": "b. `<startDate>` - d. `<endDate>`, `<end>` at age `<length>`",
                "pagePast": "`<end>` `<endDate>`"
[2023-11-16 09:15 PM] rsulfuratus: yes, okay, that makes sense
[2023-11-16 09:27 PM] Deciusmus: Ok I pushedthat
[2023-11-16 09:28 PM] Deciusmus: I did test but not a ton
[2023-11-16 09:28 PM] Deciusmus: let me know if you see issues
[2023-11-16 09:28 PM] Deciusmus: The header for events generates the dataviewjs block but it doesn't evaulate correctly outside of a header block
[2023-11-16 09:28 PM] Deciusmus: looking at fixing that
[2023-11-16 09:29 PM] rsulfuratus: i probably won't look at much tonight, i'm still working on region pages
[2023-11-16 09:29 PM] rsulfuratus: but will test a bit tomorrow or over the weekend
[2023-11-16 09:30 PM] rsulfuratus: need to send out session notes over the weekend so will need to work a bit on export
[2023-11-16 09:32 PM] Deciusmus: hopefully the export is pretty straightforward at this point
[2023-11-16 09:33 PM] Deciusmus: given the JS ->` ChatGPT ->` python pipeline
[2023-11-16 09:47 PM] rsulfuratus: yes
[2023-11-16 09:47 PM] rsulfuratus: one last thought
[2023-11-16 09:47 PM] rsulfuratus: conceptually, species and ancestry are just typeOf relationships
[2023-11-16 09:47 PM] Deciusmus: that is true
[2023-11-16 09:47 PM] rsulfuratus: so fundamentally, every page can conceptually have the following metadata:
    startDate
    endDate
    typeOf
    whereabouts
[2023-11-16 09:48 PM] rsulfuratus: partOf
[2023-11-16 09:48 PM] rsulfuratus: subType
[2023-11-16 09:48 PM] rsulfuratus: affiliation
[2023-11-16 09:48 PM] rsulfuratus: conceptually and for readablity, we alias speces == typeOf and ancestry == subType
[2023-11-16 09:48 PM] rsulfuratus: born == startDate
[2023-11-16 09:49 PM] rsulfuratus: DR = startDate
[2023-11-16 09:49 PM] rsulfuratus: etc
[2023-11-16 09:49 PM] rsulfuratus: placeType is also just typeOf
[2023-11-16 09:49 PM] Deciusmus: actually I like that, you can do a dataview query for typeOf: inn
[2023-11-16 09:49 PM] rsulfuratus: exactly
[2023-11-16 09:50 PM] Deciusmus: orgType is also just typeOf
[2023-11-16 09:50 PM] rsulfuratus: yes
[2023-11-16 09:50 PM] Deciusmus: I actually don't think subType is a thing, it is just people have 2 "typeOf" values
[2023-11-16 09:51 PM] rsulfuratus: right, sure
[2023-11-16 09:51 PM] rsulfuratus: but it matters for display which is primary vs secondary
[2023-11-16 09:51 PM] Deciusmus: yes
[2023-11-16 09:52 PM] Deciusmus: there are a few other special cases:
    * reignStart, reignEnd, leaderOf for people
    * rarity for items
[2023-11-16 09:52 PM] rsulfuratus: magical/mundane for items as well
[2023-11-16 09:52 PM] Deciusmus: yes
[2023-11-16 09:53 PM] Deciusmus: I'm trying to get the whereabouts ->` partOf ->` whereabouts to work right now
[2023-11-16 09:53 PM] rsulfuratus: but basically the only special cases you have then are a few item additions and a few leader additions
[2023-11-16 09:54 PM] rsulfuratus: plus things like ka
[2023-11-16 09:54 PM] Deciusmus: right
[2023-11-16 09:55 PM] rsulfuratus: but I think I would lean towards leaving born, died, species, ancestry in the frontmatter as aliases
[2023-11-16 09:55 PM] Deciusmus: yeah, agreed
[2023-11-16 09:55 PM] rsulfuratus: but replace created/destroyed with the generic startDate/endDate
[2023-11-16 09:55 PM] Deciusmus: why?
[2023-11-16 09:55 PM] rsulfuratus: i guess no reason
[2023-11-16 09:55 PM] Deciusmus: or do you think we should replace DR with startDate / endDate
[2023-11-16 09:56 PM] rsulfuratus: no I like DR
[2023-11-16 09:56 PM] rsulfuratus: we need to keep DR for readability on list tags
[2023-11-16 09:56 PM] Deciusmus: I think created / destroyed / DR / DR_end / born / died
[2023-11-16 09:56 PM] Deciusmus: is fine
[2023-11-16 09:56 PM] rsulfuratus: yeah, okay, agreed
[2023-11-16 09:57 PM] rsulfuratus: anyway, this sounds great and will dramatically simplify stuff. i am stopping for the night now but i'll test tomorrow, and also probably finish my region cleanup soon
[2023-11-16 10:02 PM] Deciusmus: works:
![[../_discord_assets/image-915A0.png]]
[2023-11-16 10:02 PM] Deciusmus: I will push before I go to bed
[2023-11-16 10:03 PM] Deciusmus: it is slightly wonky right now in that it uses the current fantasy date for all chains, not the target date
[2023-11-16 11:47 PM] rsulfuratus: should have gone to bed a long time ago, but I'm teaching myself python OOP, it is pretty fun. looks fairly straightforward to convert your javascript classes

