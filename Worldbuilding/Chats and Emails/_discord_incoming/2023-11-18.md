# Discord DM ‚Äì 2023-11-18

[2023-11-18 07:41 AM] rsulfuratus: code updates:
    - python export is sort of working; there is a bug in my partOf code I haven't found yet, a date formatting issue unique to Python, and a few whereabouts formatting display issues I fixed in javascript that I haven't ported, but it is good enough for session notes and I might have time to fix the last few bugs today
    - I partially reverted the header generation, moving the old code (with generic typeOf lines) to generateHeader_develop.js, where you can branch if you'd like to noodle on this. I didn't want to just revert the code because there are some format string and other updates intermingled. i kept the move to generic typeOf and whereabouts, e.g. I didn't revert to the placeType and basedIn for places and orgs, these still use whereabouts
    - get_RegnalDates is not working in either javascript or python; if you get the javascript working I can try to fix the python, but this is not a high priority for me. i think it has to do with incompatible metadata (at least that seems to be the problem with the translated python), but I'm not likely to spend the time tracking this down
    - in addition to get_RegnalDates not working, there is something a little buggy with orgs, where organizations without orgType always default to being a primaryOrg and showing up with the "of XXX" line instead of in the "Member of: " line. I just gave a bunch of things types instead of tracking this down, but would be worth fixing
[2023-11-18 07:44 AM] rsulfuratus: other small things:
    - I changed default "Ruler of XXX" to "Leader of XXX", since it is usually used w/o title for leaders of organizations; I assume there is a way to change this with displayDefaults for pages that one cares about, but it doesn't seem to be documented and I didn't want to dig around in the code
    - there are a few other small things that could be perhaps cleaned up about leaders and orgs which remain in a bit of an in-between state right now
[2023-11-18 07:47 AM] rsulfuratus: my plan:
    - except for python debugging if I feel like it, and maybe a few small header tweaks as I work on content if I see easy to fix bugs, I'm not working on code until Monday
    - i'm going to regenerate a lot of headers with the current (type-specific) header code as part of session notes and general content cleanup
    - my preference would be to keep bugfixes and other stability improvements to the current code in main, and to branch any messing about with summary line generalization.
[2023-11-18 08:56 AM] Deciusmus: This all sounds good
[2023-11-18 09:00 AM] Deciusmus: I was thinking some more about person type categorization and I still think we are missing something. You would, for example, never want to do a data view query for ‚Äúfire‚Äù I don‚Äôt think to get fire giants and fire elements (but not efreti)
[2023-11-18 09:01 AM] Deciusmus: In other words the human ancestry piece tends to be useful especially as a shorthand for a more complex origin query to get groups as people
[2023-11-18 09:01 AM] Deciusmus: Nonhuman ancestry is mostly used as a more specific description of a anything
[2023-11-18 09:03 AM] rsulfuratus: yes, I agree. conceptually probably the correct way to do it would be to treat that as typeOf, e.g. a fire elemental is a typeOf elemental, and you look up typeOf for the species and get [[ elemental|fire elemental]]
[2023-11-18 09:03 AM] rsulfuratus: but that makes dataview queries to get all elementals annoying complex
[2023-11-18 09:03 AM] rsulfuratus: and also means you need pages for every subspecies, basically
[2023-11-18 09:04 AM] rsulfuratus: ancestry, on the other hand, is really a distinct subType. you could for example be a Sembaran dwarf
[2023-11-18 09:05 AM] Deciusmus: I think the right answer is to have a ‚ÄútypeOfAlias‚Äù in the front matter
[2023-11-18 09:05 AM] rsulfuratus: well, except that I also like the ability to query all hags, for example
[2023-11-18 09:05 AM] rsulfuratus: (although at the moment I only have two invented)
[2023-11-18 09:06 AM] rsulfuratus: I think for people you really need three things:
    1. subType
    2. ancestry
    3. species
[2023-11-18 09:07 AM] rsulfuratus: default display is [[species|subType]] (ancestry) or something
[2023-11-18 09:07 AM] Deciusmus: Right so the subtype is fire giant not fire
[2023-11-18 09:07 AM] rsulfuratus: yes
[2023-11-18 09:07 AM] rsulfuratus: but that makes sense too because it simplies queries
[2023-11-18 09:07 AM] Deciusmus: For a hag would you want to point to the hag page or the fey page
[2023-11-18 09:08 AM] rsulfuratus: not sure, but that could be override with page-specific displayDefaults
[2023-11-18 09:08 AM] rsulfuratus: for a hag you might want: species (subType)
[2023-11-18 09:09 AM] Deciusmus: I was thinking you wouldn‚Äôt see the word ‚Äúfey‚Äù on line at all
[2023-11-18 09:09 AM] Deciusmus: That‚Äôs consistent with some fey like dryad where the species is (currently) just dryad
[2023-11-18 09:09 AM] rsulfuratus: if you wanted that, you could do [[subType]]
[2023-11-18 09:10 AM] rsulfuratus: I think it should be controllable by frontmatter. e.g. now that I've thought more about species in Taelgar I might want to go retag things
[2023-11-18 09:10 AM] rsulfuratus: and maybe for archfey and centaurs you don't want to display fey, but for faires and satyrs you do
[2023-11-18 09:10 AM] rsulfuratus: i haven't thought about it much
[2023-11-18 09:12 AM] rsulfuratus: if you were doing this totally specific for people pages, I'd do:
    species - your species
    subspecies - a descriptor for the specific kind of your species you are, e.g. hag, fire elemental, great wyrm
    ancestry - a shorthand for origin culture
[2023-11-18 09:12 AM] Deciusmus: So my proposal would be:
    
    subtype??species (ancestry) as the default, both linked to whatever page the link finder finds 
    
    (Including using the json link map)
[2023-11-18 09:13 AM] rsulfuratus: yes I think that is a good default
[2023-11-18 09:13 AM] Deciusmus: So we could add say a archfey ->` fey link map or a great wrym->`dragon etc
[2023-11-18 09:14 AM] rsulfuratus: right
[2023-11-18 09:18 AM] rsulfuratus: so I think then if you wanted to try to generalize to a less type specific type line, you'd really want to think about four kinds of pieces:
    
    - there is a "primary" type, this is species in people, typeOf for everything else, and is "this is a specific `<X>` of `<primary type>`"
    - there is a "subtype", this is subspecies in people, subType for everything else, and is "this is a specific `<X>` of `<subtype>` which is a kind of `<primary type>`"
    - there is an "alternate type", this is ancestry in people and e.g. rarity in magic items, which is distinct from subtype in that any combination of alt type and primary type is in principle valid (e.g., you can be a Sembaran dwarf or a Sembaran human or even a Sembaran fire elemental, but you can't be a fire elemental dwarf)
    - there is a "descriptor", this is gender/pronouns in people and magical/mundae in items, this is to represent an additional descriptor that is commonly used
[2023-11-18 09:20 AM] rsulfuratus: technically, you could make this completely general if you followed typeOf chains and did a lot of processing/default setting to a) make sure that every subtype has a typeOf defined, and b) set up some display overrides to handle outputting
[2023-11-18 09:20 AM] rsulfuratus: but that feels like it would make data entry and queries really annoying
[2023-11-18 09:22 AM] rsulfuratus: so what I'd propose if you want to generalize things is to construct a type line string format from: secondary type (ancestry in people, rarity in items, secondType in everything else); primary type (species in people, typeOf in everything else); sub type (subspecies in people, subType in everyone else); descriptor (pronouns in people, magical/mundane in items)
[2023-11-18 09:22 AM] Deciusmus: No I would do it by having specific frontmatter
    - species
    - subspecies
    Etc
[2023-11-18 09:24 AM] rsulfuratus: the key change is splitting subspecies and ancestry as conceptually different and with different display priorities and search goals
[2023-11-18 09:25 AM] rsulfuratus: this reminds me, where did we end up on item uniqueness?
[2023-11-18 09:25 AM] rsulfuratus: i guess just rarity at this point
[2023-11-18 09:26 AM] rsulfuratus: typeOf is too useful for other stuff to use undefined typeOf to mean unique
[2023-11-18 09:26 AM] Deciusmus: I was going to be a little less generic.  My plan was to have a type line string that takes format options of:
    - a set of specific metadata (pronoun, rarity, etc)
    - some calculated values like mainType 
    - and then have unique cases handled via display default override
[2023-11-18 09:26 AM] rsulfuratus: yeah that makes sense
[2023-11-18 09:27 AM] Deciusmus: I also think for unknown types the type line can be blank. You really only want it for people and items mostly
[2023-11-18 09:27 AM] rsulfuratus: yes
[2023-11-18 09:30 AM] Deciusmus: So the default item line would be something like:
    (rarity subtype type)
    And the default subtype is magical 
    
    For people it‚Äôs 
    Ancestry calculated primary type, pronouns
[2023-11-18 09:31 AM] Deciusmus: So you can if you want more descriptive item text do something like
    
    Magical mithril as the subtype (or just mithril at which point it would link to the page on mithril if it existed)
[2023-11-18 09:32 AM] Deciusmus: If you want Agata to say hag (fey) instead of just hag you set her display override to
    
    subspecies (species)
[2023-11-18 09:32 AM] rsulfuratus: yeah that makes sense
[2023-11-18 09:33 AM] rsulfuratus: items of materials is an interesting case - not sure it is worth generalizing to, but that is basicaly "ancestry" for items
[2023-11-18 09:33 AM] rsulfuratus: of course so is rarity
[2023-11-18 09:34 AM] Deciusmus: Yeah I wasn‚Äôt thinking it was worth generalizing. And also for some items you might want to see
    (rare Chardonian magic ring)
[2023-11-18 09:34 AM] rsulfuratus: right
[2023-11-18 09:35 AM] Deciusmus: But I don‚Äôt think you would ever be searching for all Chardonian magic rings per se. It‚Äôs more some nice flavor
[2023-11-18 09:35 AM] rsulfuratus: agreed, but you still want the ring to have magical = true
[2023-11-18 09:35 AM] rsulfuratus: I don't think I want to get rid of the true/false flag for magical
[2023-11-18 09:36 AM] rsulfuratus: so you probably need another frontmatter item if you want a subtype for items
[2023-11-18 09:36 AM] Deciusmus: Yeah
[2023-11-18 09:36 AM] Deciusmus: Although maybe magical is just a tag
[2023-11-18 09:37 AM] rsulfuratus: ah hmm yeah that is probably best
[2023-11-18 09:38 AM] rsulfuratus: well, wait
[2023-11-18 09:38 AM] Deciusmus: But I think in general the goal of magical is get lists of magic items.  But a tag is best for that
[2023-11-18 09:39 AM] rsulfuratus: we'd need to do a lot of tag cleaning, because the downside is that you can't set the default to magical if magical doesn't exist in tags, since then you can't ever have a mundane item
[2023-11-18 09:39 AM] Deciusmus: You just set the subType to mundane
[2023-11-18 09:40 AM] rsulfuratus: ah, okay, yeah that works
[2023-11-18 09:40 AM] rsulfuratus: anyone these small details are better to fiddle with once someone actually starts generating headers for a lot of items because in the abstract it is a bit hard to know exactly what will look nice and feel useful
[2023-11-18 09:40 AM] rsulfuratus: the general concept seems sensible
[2023-11-18 09:41 AM] rsulfuratus: and for people where we do have a lot of headers, the separation of subspecies and ancestry is a nice improvement
[2023-11-18 09:41 AM] Deciusmus: Alternatively you could grab the default subtype from the second part of the item tag
    
    Item/book becomes book
    Item/magical becomes magical
    Etc
[2023-11-18 09:43 AM] Deciusmus: Anyway we are about to have breakfast but I wil play around a bit later and also try to fix regnal@studd
[2023-11-18 11:01 AM] rsulfuratus: here is a random feature request from updating notes. it would be nice to have a "alternate name" option.
    
    Vindristjarna,the Star on the Wind
    Rostaur√´, the Forest of Rains
    Estemar, the City of Peace
    Mantle of Protection, aka the Cloak of Rainbows
    
    I don't think you want it in the h1 line
    I think you want:
    
    ```markdown
    # Vindristjarna
    `**`The Star on the Wind**
    `*`(Vind-rist-YAR-na or vin-dree-SHAR-na)*
    ```
[2023-11-18 11:05 AM] Deciusmus: I was wondering about parsing aliases
[2023-11-18 11:05 AM] Deciusmus: Maybe any alias that doesn't contain the name
[2023-11-18 11:06 AM] rsulfuratus: hmm. sometimes you want the alias just for linking though, and sometimes denomyns dont contain the name
[2023-11-18 11:06 AM] rsulfuratus: e.g. Voslander =/= Vostok
[2023-11-18 11:06 AM] rsulfuratus: Dwarven =/= Dwarf
[2023-11-18 11:06 AM] rsulfuratus: 
![[../_discord_assets/image-FE7B5.png]]
[2023-11-18 11:07 AM] rsulfuratus: (just manually added)
[2023-11-18 11:07 AM] rsulfuratus: (but I think it looks good)
[2023-11-18 11:10 AM] Deciusmus: Let me get back to that in a sec. A few things:
    
    Version management. 
    I am going to keep 3 versions of the header script: old, current, next.
    If there is no ongoing changes, the old and next will just call current, but if there is active changes it gives some protection.
    If you set the frontmatter version to "old" or "next" it will run the new or old script
    
    So basically, if I am making a major change, it can start as "next" and will only run on pages (for testing) with version: next
    once we are happy with it, we can switch it to the "current" and it will run on all pages with version: next or no version, but if it messes something up on a page you can still go back to previous with version: old
[2023-11-18 11:11 AM] rsulfuratus: üëç
[2023-11-18 11:16 AM] Deciusmus: Secondary Line (i.e. the "type of" stuff).
    
    I think I have something pretty good. There is a "secondaryInfo" display default.
    
    For people, it defaults to: `<ancestry>` `<mainType>`, `<pronouns>`
    For items: (`<rarity>` `<ancestry>` `<subtypeof>` `<typeof>`)
    For everything else: nothing
    
    The following frontmatter keys work: gender, typeOf, species, subspecies, rarity, ancestry
    There are 3 calculated values: 
    pronouns (as it always has been)
    subType   = subTypeOf or calculated from tags
    mainType = subspecies or species or typeOf or subtype
    
    To calculate subtype from tags, we
    (a) if there is item/x or place/x tag, it is x
    (b) if there is an item tag it is the word item
    (c) if there is a place tag it is the word place
[2023-11-18 11:16 AM] rsulfuratus: the item whereabouts is fun:
![[../_discord_assets/image-BED81.png]]
[2023-11-18 11:17 AM] Deciusmus: how did you get the traveling to? is that just a location
[2023-11-18 11:17 AM] Deciusmus: aha, that is the wherabouts of Vindristrjarna
[2023-11-18 11:17 AM] rsulfuratus: Vindristjarna's current location
[2023-11-18 11:17 AM] rsulfuratus: added traveling to the don't auto-link
[2023-11-18 11:17 AM] Deciusmus: it doesn't link though, presumably because you used "traveling to"
[2023-11-18 11:17 AM] rsulfuratus: yeah
[2023-11-18 11:17 AM] rsulfuratus: there isn't really another way to do it
[2023-11-18 11:17 AM] Deciusmus: I should really add a "descriptor" to whereabouts
[2023-11-18 11:18 AM] Deciusmus: so you can do
    { type: away, descriptor: travelling to, location: `<x>` }
[2023-11-18 11:18 AM] rsulfuratus: ah that would be nice
[2023-11-18 11:18 AM] Deciusmus: maybe overkill but it would make that autolink
[2023-11-18 11:18 AM] Deciusmus: alternatively, I could just split on space and link
[2023-11-18 11:18 AM] rsulfuratus: i'm not sure how valuable it is to have it autolink honestly
[2023-11-18 11:18 AM] Deciusmus: the second might be better because you don't want the current location to appear as "Xurkhaz"
[2023-11-18 11:18 AM] rsulfuratus: but for maximum flexibility it would be nice to have descriptor actually
[2023-11-18 11:19 AM] rsulfuratus: because then you can do: current location: imprisoned in `<link to place>`
[2023-11-18 11:20 AM] rsulfuratus: actually it is probably better to do it by split on space and check each part
[2023-11-18 11:20 AM] rsulfuratus: because otherwise you have to always make sure that "location" is "descriptor + location" or you get weird things
[2023-11-18 11:21 AM] rsulfuratus: ah hmm except that messes up two word locations
[2023-11-18 11:21 AM] rsulfuratus: there is probably a solution but doesn't seem that critical to solve immediately just to autolink, it is cool to have it show up
[2023-11-18 11:23 AM] rsulfuratus: ah except antonia gets a bit weird;
![[../_discord_assets/image-6C19A.png]]
[2023-11-18 11:23 AM] rsulfuratus: since the current location of Vindristjarna is "the Dunmar Fellowship" to generate the owner line
[2023-11-18 11:24 AM] rsulfuratus: since on Dec 8th, Vindristjarna was just "home" there is no whereabouts line
[2023-11-18 11:24 AM] rsulfuratus: for that date specifically
[2023-11-18 11:27 AM] rsulfuratus: it is a bit excessive but if you set all the whereabouts properly it works perfectly:
![[../_discord_assets/image-E6C2A.png]]
[2023-11-18 11:27 AM] rsulfuratus: pretty cool
[2023-11-18 11:30 AM] Deciusmus: I think for something like Vindrisjarna it makes sense to set the actual whereabouts lines
[2023-11-18 11:30 AM] Deciusmus: Eventually, if you do that with each session onte update, we can draw on the map a gps track
[2023-11-18 11:30 AM] rsulfuratus: yeah
[2023-11-18 11:30 AM] Deciusmus: which is potentially kinda excessive but also kinda cool
[2023-11-18 11:33 AM] Deciusmus: Ok I am pushing an update
[2023-11-18 11:33 AM] Deciusmus: I have "current" set to what was generate_develop, so with the new type stuff discussed here
[2023-11-18 11:34 AM] Deciusmus: Currenty the default type line for people is `<ancestry>` `<mainType>` so you will get Chardonian human instead of human (Chardonian) but if you really don't like that you can change the metadata.json üòÑ
[2023-11-18 11:35 AM] Deciusmus: If you want to have a page use the "old" i.e what you currently have version, just set version: old
[2023-11-18 11:40 AM] Deciusmus: That is pushed
[2023-11-18 11:43 AM] rsulfuratus: type line is gone from items in current it looks like? not sure what is wrong
[2023-11-18 11:45 AM] rsulfuratus: just doesn't generate type line at all with version: current
[2023-11-18 11:48 AM] rsulfuratus: did you change startup script?
[2023-11-18 11:51 AM] Deciusmus: It works for me
[2023-11-18 11:51 AM] Deciusmus: Did you reload metadata?
[2023-11-18 11:51 AM] rsulfuratus: yes
[2023-11-18 11:51 AM] rsulfuratus: 
![[../_discord_assets/image-27FD6.png]]
[2023-11-18 11:52 AM] rsulfuratus: weird
[2023-11-18 11:52 AM] Deciusmus: which item
[2023-11-18 11:52 AM] rsulfuratus: person wit all
[2023-11-18 11:52 AM] rsulfuratus: version: old works fine
[2023-11-18 11:54 AM] Deciusmus: huh
[2023-11-18 11:54 AM] Deciusmus: it worked until I reloaded obsidian and now it doesn't
[2023-11-18 11:56 AM] rsulfuratus: it works fine on most npcs so it must somethign specific to that "full" header
[2023-11-18 11:56 AM] rsulfuratus: after reload normal stuff is working okay
[2023-11-18 11:58 AM] rsulfuratus: the item line is very buggy, what do I set to display:
    (very rare magical mirror)
[2023-11-18 11:59 AM] Deciusmus: rarity: very rare
    subTypeOf: magical (or make the tag item/magical)
    typeOf: mirror
[2023-11-18 11:59 AM] rsulfuratus: ah okay
[2023-11-18 12:00 PM] rsulfuratus: there is an extra space bewteen rarity and magical
[2023-11-18 12:01 PM] Deciusmus: hrm, I don't see that
[2023-11-18 12:01 PM] rsulfuratus: it's affiliations, if I delete affiliations from PersonWithAll it looks fine
[2023-11-18 12:01 PM] Deciusmus: yeah, I fixed the affiliations bug
[2023-11-18 12:01 PM] Deciusmus: just pushed
[2023-11-18 12:02 PM] Deciusmus: can you paste the full frontmatter that geerates an extra space?
[2023-11-18 12:05 PM] rsulfuratus: hmm, can't see it now. maybe it was just a glitch
[2023-11-18 12:06 PM] rsulfuratus: if typeOf exists there shouldn't be a default "item"
[2023-11-18 12:06 PM] rsulfuratus: (very rare item mirror) ->` (very rare mirror)
[2023-11-18 12:06 PM] Deciusmus: yeah there a few bugs in default calc, about to push them
[2023-11-18 12:07 PM] Deciusmus: Pushing a slight fix so that:
    
    default typeOf is "place" or "item" if there is a place-based or item-based tag
    
    default subTypeOf is the 2nd element in a tag that starts place or item
[2023-11-18 12:08 PM] rsulfuratus: there is an extra space, obsidian just deletes it
    ```markdown
    ---
    typeOf: mirror
    tags:
      - item
      - item/magical
    whereabouts: 
    - { type: home, location: unknown hobgoblin wizard }
    - { type: home,location: dufr }
    - { type: away, start: 1748-12-05, end: 1748-12-10, location: Uzgukhar}
    - {type: away, location: Vindristjarna }
    displayDefaults:
      whereaboutsCurrent: "Stored on: `<loc>`"
    rarity: legendary
    
    ---
    # The Mirror of Soul Trapping
    >``[!info]`+ Information
    >` (legendary  magical mirror)
    >`>` `$=dv.view("_scripts/view/get_Whereabouts")`
    ```
[2023-11-18 12:08 PM] rsulfuratus: between legendary and magical
[2023-11-18 12:08 PM] rsulfuratus: if you go to reading view it is gone
[2023-11-18 12:08 PM] Deciusmus: So:
    
    tag: item
    typeOf: mirror
    rarity: rare
    
    will generate (rare mirror)
    
    tag: item/magical
    typeOf: mirror
    rarity: rare
    
    will generate (rare magical mirror)
    
    tag: item/magical
    rarity: rare
    
    will generate (rare magical item)
[2023-11-18 12:09 PM] rsulfuratus: yes, perfect
[2023-11-18 12:10 PM] rsulfuratus: the extra space is after the rarity
[2023-11-18 12:10 PM] rsulfuratus: `(legendary  magical mirror)` with rarity
    `(magical mirror)` without
[2023-11-18 12:11 PM] Deciusmus: yeah my code to trim interior spaces was wrong
[2023-11-18 12:11 PM] Deciusmus: pushing a fix
[2023-11-18 12:12 PM] Deciusmus: pushed
[2023-11-18 12:14 PM] Deciusmus: partOf also uses the tag-based defaults
    
    if you have a place with a partOf and no typeOf, it will generate based on tags, i.e.
    
    tag: place
    
    a place in 
    
    tag: place/building
    
    a building in
    
    etc
[2023-11-18 12:14 PM] Deciusmus: fixes pushed
[2023-11-18 02:50 PM] Deciusmus: I'm adding accurate whereabouts for Agata
[2023-11-18 02:50 PM] Deciusmus: whereabouts:
    - {type: home, end: 1400, location: Amberglow} # end is arbitrary, just needs to exist to prevent Amberglow from being home after she left Garamjala
    - {type: home, start: '', end: 1748-05-29, location: Garamjala Desert}
    - {type: away, start: 1748-05-29, end: 1748-11-15, location: Ring of the Warded Mind }
    - {type: away, start: 1748-11-15, end: 2000-01-01, location: Heartwood Grove } # end is abritrary
    ---
[2023-11-18 02:54 PM] Deciusmus: Is there a canonical date when Hralgar was trapped?
[2023-11-18 02:54 PM] rsulfuratus: only roughly. he was free during the reign of Akaston, and Eudomes both a) trapped him and b) was alive and had to flee during the first plague
[2023-11-18 02:55 PM] rsulfuratus: so that would be roughly 1010-1020 probably?
[2023-11-18 02:55 PM] rsulfuratus: need to double-check Akaston reign end
[2023-11-18 02:55 PM] Deciusmus: the notes say Apolloyon
[2023-11-18 02:56 PM] Deciusmus: When the Golden Age ended in civil war, and the [[Omnis Pura]] came to power, things became more difficult, and some time later he was trapped by Eudomes, during Apollyon's reign.
[2023-11-18 02:56 PM] Deciusmus: is that wrong, should I fix to Akaston
[2023-11-18 02:56 PM] rsulfuratus: no, that's right. i mean Hralgar told you that the emperor he remembered was Akaston, this was the time period he was imaging in the dreamworld in his pre-trapped state
[2023-11-18 02:57 PM] rsulfuratus: Apollyon's reign was long so trapped during his reign would make sense
[2023-11-18 02:58 PM] Deciusmus: Is Stormcaller Tower part of: Eastern Dunmar or Dunmar
[2023-11-18 02:58 PM] Deciusmus: And if is it partOf Eastern Dunmar, is eastern Dunmar in turn part of Dunmar?
[2023-11-18 02:58 PM] rsulfuratus: Eastern Dunmar, and yes, for now
[2023-11-18 02:58 PM] Deciusmus: 
![[../_discord_assets/image-58CBD.png]]
[2023-11-18 02:59 PM] rsulfuratus: set definitiveArticle: "" would probably look better for Eastern Dunmar
[2023-11-18 02:59 PM] Deciusmus: 
![[../_discord_assets/image-CF3FC.png]]
[2023-11-18 03:00 PM] Deciusmus: The lack of a descriptor for whereabouts is a little annoying
[2023-11-18 03:01 PM] rsulfuratus: you could just override whereaboutsCurrent
[2023-11-18 03:01 PM] rsulfuratus: ah although that would mess things up for you
[2023-11-18 03:01 PM] rsulfuratus: in 1720
[2023-11-18 03:01 PM] rsulfuratus: right
[2023-11-18 03:01 PM] Deciusmus: yeah
[2023-11-18 03:01 PM] rsulfuratus: why not just trapped, Stormcaller Tower, Eastern Dunmar?
[2023-11-18 03:01 PM] rsulfuratus: that should link probably even though it doesn't do partOf chains
[2023-11-18 03:04 PM] Deciusmus: yeah
[2023-11-18 03:05 PM] rsulfuratus: actually, you could proably simply a lot going forward with the following:
    split loc on comma
    if one part, follow partOf chain
    if 2 part, link first part only if actual file, follow partof chain
    if 3+ part, link first only if actual file, don't follow partof chain
[2023-11-18 03:07 PM] rsulfuratus: although that is kind of awkward for traveling to, Place because you have an extraneous comma, but whatever
[2023-11-18 03:08 PM] Deciusmus: probably the right thing to do would be:
    
    if there are no commas in the string, find the first capital letter and use everything after that as the location for linking/part of chains
[2023-11-18 03:09 PM] Deciusmus: so trapped in Stormcaller Tower would be all you had to say
[2023-11-18 03:12 PM] rsulfuratus: yeah that would probably almost always work
[2023-11-18 03:13 PM] rsulfuratus: there are a bunch of little bugs with the web export I need to fix
[2023-11-18 03:13 PM] Deciusmus: is "Red Mesa" or "Shakun's Wellspring" the right place for Sameki and Agata's death
[2023-11-18 03:14 PM] rsulfuratus: Shakun's Wellspring, which is partOf Red Mesa
[2023-11-18 03:15 PM] rsulfuratus: i am also working on note clean up now, so would be very helpful to push regularly to avoid too complicated merge conflicts
[2023-11-18 03:18 PM] Deciusmus: will do
[2023-11-18 03:18 PM] Deciusmus: I'm starting with all ancestry that is set that isn't "right" and fixing from there
[2023-11-18 03:19 PM] Deciusmus: is Red Mesa partOf Karawa, Western Dunmar, or Garmaldji
[2023-11-18 03:19 PM] rsulfuratus: eastern dunmar
[2023-11-18 03:19 PM] Deciusmus: sorry meant eastern obs
[2023-11-18 03:19 PM] rsulfuratus: agata's hut and pava and avaras' house are part of garamjala
[2023-11-18 03:19 PM] rsulfuratus: kharsan as well
[2023-11-18 03:20 PM] rsulfuratus: garamjala is part of nashtkar
[2023-11-18 03:20 PM] rsulfuratus: which I guess it part of the desolation of cha'mutte
[2023-11-18 03:20 PM] Deciusmus: A few definitive article issues but is this right?
![[../_discord_assets/image-0CFD3.png]]
[2023-11-18 03:21 PM] rsulfuratus: yes that looks right, assuming you checked session notes/timeline for dates
[2023-11-18 03:21 PM] Deciusmus: 5/29/1748 is the date we killed agata and samerki
[2023-11-18 03:21 PM] Deciusmus: per session note
[2023-11-18 03:21 PM] rsulfuratus: yes
[2023-11-18 03:23 PM] rsulfuratus: actually, samerki was watching cintra the whole time. FEb 08 1748 to death date
[2023-11-18 03:27 PM] rsulfuratus: where are we putting destroyed places?
[2023-11-18 03:27 PM] rsulfuratus: gazeteer?
[2023-11-18 03:27 PM] Deciusmus: I think a relatively recently destroyed place goes in gazeteer
[2023-11-18 03:28 PM] Deciusmus: if it predates say, the great war, its history, unless the ruins are particularly interesting, I think
[2023-11-18 03:28 PM] rsulfuratus: doing Drankor era stuff
[2023-11-18 03:28 PM] rsulfuratus: Rostaur√´
[2023-11-18 03:28 PM] Deciusmus: I think that's history right?
[2023-11-18 03:28 PM] Deciusmus: it doesn't really still exist, even as a ruin
[2023-11-18 03:28 PM] Deciusmus: although maybe it does?
[2023-11-18 03:29 PM] Deciusmus: But I think if there is some haunted remains, that would be its own place:
    
    Haunted Remains of Rostaure
[2023-11-18 03:29 PM] rsulfuratus: fair enough
[2023-11-18 03:29 PM] rsulfuratus: putting it in history for now
[2023-11-18 03:29 PM] rsulfuratus: renaming Drankorian Empire to Drankorian Era though
[2023-11-18 03:29 PM] rsulfuratus: so history is organized by time possibly region
[2023-11-18 03:30 PM] Deciusmus: for fixing non-humans:
    
    1. Mostly just setting subspeciies, i.e. Hralgar is subspecies : storm giant, species: giant and adding a linkmap for storm giant ->` giants
    2. For a small set where it seems like the subspecies is independently interesting, I am setting the secondaryInfo line to override as `<species>` (`<subspeices>`) so we get both
[2023-11-18 03:30 PM] Deciusmus: For #2 so far oni and hag are my 2 examples
[2023-11-18 03:31 PM] Deciusmus: Although for Samerki, is he is probably oni as species, giant as subspecies, right?
[2023-11-18 03:31 PM] rsulfuratus: oni is type of giant
[2023-11-18 03:33 PM] rsulfuratus: what do we call the period of history between the fall of Drankor and the Great War?
[2023-11-18 03:34 PM] rsulfuratus: for both agata and samerki i'd set species = giant/fey, subspecies = oni/hag, but set the display to be `<subspecies>` (`<species>`)
[2023-11-18 03:34 PM] Deciusmus: that's what I did
[2023-11-18 03:34 PM] Deciusmus: hrm
[2023-11-18 03:35 PM] Deciusmus: I also set Taelgar to not auto-link btw
[2023-11-18 03:35 PM] rsulfuratus: good
[2023-11-18 03:35 PM] Deciusmus: if you make a page for Taelgar it will link, but didn't want the links showing up without the page
[2023-11-18 03:37 PM] rsulfuratus: fyi i've found the metadata comments often get stripped if they are the end of lines, but tend to stay when on their own line
[2023-11-18 03:37 PM] rsulfuratus: not sure why, probably some obsidian processing thing
[2023-11-18 03:37 PM] rsulfuratus: but i've started putting them e.g. after the whereabouts instead of in the list
[2023-11-18 03:38 PM] Deciusmus: do you happen to have a death date for Typhina? I set it to 1400 (to match Agata's "end" date for feywild as home)
[2023-11-18 03:38 PM] rsulfuratus: she died in the feywild, so "sunset"?
[2023-11-18 03:38 PM] rsulfuratus: time in feywild is tricky
[2023-11-18 03:38 PM] Deciusmus: heh but that won't parse
[2023-11-18 03:39 PM] rsulfuratus: it would have been after calaus showed up (since when he showed up CLoudspinner was still around)
[2023-11-18 03:39 PM] Deciusmus: I would be kinda nice to have the ability to just say died: true
[2023-11-18 03:39 PM] rsulfuratus: probably something like 1200 - 1300 would be reasonable
[2023-11-18 03:40 PM] Deciusmus: or actually to be able to say : true for any end date
[2023-11-18 03:40 PM] rsulfuratus: yeah
[2023-11-18 03:40 PM] Deciusmus: i.e. to have agata's whereabouts be
    
    { type: home, location: Feywilded, end: true }
[2023-11-18 03:40 PM] Deciusmus: actually letting end dates by true or false would be useful
[2023-11-18 03:41 PM] rsulfuratus: although what does end true really mean?
[2023-11-18 03:41 PM] Deciusmus: end: true means this is in the past for all possible dates
[2023-11-18 03:41 PM] rsulfuratus: that will work up until someone decides to run a campaign during the Drankorian era
[2023-11-18 03:41 PM] Deciusmus: yes
[2023-11-18 03:41 PM] rsulfuratus: which I've considered
[2023-11-18 03:41 PM] Deciusmus: But, it is easier to find
[2023-11-18 03:42 PM] rsulfuratus: can just have convention that end 0001-01-01 is "true"
[2023-11-18 03:42 PM] rsulfuratus: that will, in fact, be in the past for all possible dates since you can't have a date before 1/1/1
[2023-11-18 03:43 PM] rsulfuratus: i guess unless you set your calendar to 1/1/1
[2023-11-18 03:43 PM] Deciusmus: I mean you could use 0001 and 9999 as "true" and "false" respectively
[2023-11-18 03:43 PM] rsulfuratus: yea
[2023-11-18 03:43 PM] rsulfuratus: but 0001 for end is not technically 0001, it's 0001-12-31 isn't it?
[2023-11-18 03:43 PM] rsulfuratus: not that that should matter
[2023-11-18 03:43 PM] Deciusmus: that covers all "realistc" dates until someone decides to run a game during the [[Downfall Wars]] and we need to handle CY dates
[2023-11-18 03:44 PM] rsulfuratus: right
[2023-11-18 03:44 PM] Deciusmus: (and end: 0001 is visually more appealing than end: 0001-01-01 )
[2023-11-18 03:44 PM] rsulfuratus: I do have a dr ->` cy ->` dr function working in my python code
[2023-11-18 03:44 PM] rsulfuratus: relies on python date objects being able to have bce years though
[2023-11-18 03:44 PM] rsulfuratus: otherwise you can't convert cy dates before 4133
[2023-11-18 03:46 PM] rsulfuratus: probably the way to do it in java would be to internally just convert everything to "days since time began" as an int, then you could forget about string sorting, and you'd just need a display function to convert to DR / CY
[2023-11-18 03:46 PM] Deciusmus: yeah
[2023-11-18 03:47 PM] Deciusmus: this works:
    
    ```dataview
    table from #person where contains(whereabouts.end, 1400)
    ```
[2023-11-18 03:47 PM] Deciusmus: so having 0001, 9999 should  be an easy convention for true/false
[2023-11-18 03:48 PM] rsulfuratus: actually if you did that you could fairly easily write a function to generate dynastic years and regnal years and ka from days
[2023-11-18 03:49 PM] rsulfuratus: would be nice to have a little calculator for date conversion built in, i was looking at actually doing this in python because there is a plugin that lets you do notebook-like operations
[2023-11-18 03:49 PM] rsulfuratus: don't think you'd want to support regnal years and that stuff for anything except display of course
[2023-11-18 03:50 PM] Deciusmus: right
[2023-11-18 03:52 PM] rsulfuratus: is timeline descriptor still a thing?
[2023-11-18 03:53 PM] Deciusmus: my get Events table code has been a bit neglected
[2023-11-18 03:53 PM] Deciusmus: I was planning on moving to displayDefaults but havent yet
[2023-11-18 04:05 PM] Deciusmus: ok, I pushed a bugfix where you can now use end: 0001 or died: 0001 and it should display correctly, i.e.
[2023-11-18 04:05 PM] Deciusmus: 
![[../_discord_assets/image-D4D59.png]]
[2023-11-18 04:07 PM] Deciusmus: so for example apollyon can have
![[../_discord_assets/image-89C86.png]]
[2023-11-18 04:08 PM] rsulfuratus: lich (undead) is another one where it is probably nice to have both
[2023-11-18 04:08 PM] Deciusmus: Apollyon does not have an ancestry of lich but I will add subspecies
[2023-11-18 04:09 PM] Deciusmus: the died archiecture doesn't handle undead that well
[2023-11-18 04:09 PM] rsulfuratus: well didn't want to put it in there until it was clear in game, there is no good way to have secret metadata
[2023-11-18 04:09 PM] Deciusmus: right
[2023-11-18 04:10 PM] rsulfuratus: if you have a died date will it still generate Current location?
[2023-11-18 04:10 PM] rsulfuratus: e.g., originally from drankor, killed in drankor, current location unknown?
[2023-11-18 04:10 PM] rsulfuratus: you wouldn't want that in general I guess
[2023-11-18 04:10 PM] Deciusmus: it does not
[2023-11-18 04:10 PM] rsulfuratus: undead are probably best treated specially
[2023-11-18 04:10 PM] Deciusmus: yeah
[2023-11-18 04:10 PM] rsulfuratus: i mean custom/manual
[2023-11-18 04:11 PM] Deciusmus: right, that is what I thought you meant
[2023-11-18 04:11 PM] Deciusmus: its easiest to just have a timeline block for died & reborn and let the "died" date in metadata not be set
[2023-11-18 04:11 PM] rsulfuratus: right
[2023-11-18 04:11 PM] rsulfuratus: well, eventually maybe it gets sense
[2023-11-18 04:11 PM] rsulfuratus: `*`set
[2023-11-18 04:12 PM] Deciusmus: yes. like for Grash, I am going to set the died date to 1720-01-19
[2023-11-18 04:12 PM] Deciusmus: haha
[2023-11-18 04:14 PM] Deciusmus: Speaking of Grash:
    
    is it subspecies: skeleton or subspecies: blank and ancestry: skeletal or subspecies: blank and secondaryInfo: "skeletal `<species>`"
[2023-11-18 04:15 PM] rsulfuratus: ancestry skeletal
[2023-11-18 04:15 PM] rsulfuratus: should generate skeletal undead yes?
[2023-11-18 04:16 PM] Deciusmus: yeah
[2023-11-18 04:16 PM] Deciusmus: although it capitalizes
[2023-11-18 04:16 PM] Deciusmus: although I guess we capitalize in the frontmatter so no need, i.e. it is
    Dunmari in the frontmatter
[2023-11-18 04:17 PM] Deciusmus: I'll fix the title casing there
[2023-11-18 04:18 PM] Deciusmus: Do we know when Grash left Kharsan?
[2023-11-18 04:19 PM] rsulfuratus: yes you scried on him
[2023-11-18 04:19 PM] Deciusmus: I found a scry date of ~10-23
[2023-11-18 04:20 PM] Deciusmus: I was setting slightly better whereabouts for Grash
[2023-11-18 04:20 PM] rsulfuratus: nov 28
[2023-11-18 04:20 PM] rsulfuratus: nov 28 left kharsan
[2023-11-18 04:20 PM] rsulfuratus: after that, you should have the war of the cloak page which is up to date to current day
[2023-11-18 04:21 PM] rsulfuratus: last scried would have been late dec during the time in tollen
[2023-11-18 04:25 PM] Deciusmus: 
![[../_discord_assets/image-E742B.png]]
[2023-11-18 04:25 PM] Deciusmus: with a note:
    # start date of Kharsan is guess, Tim might have a more canonical date
[2023-11-18 04:25 PM] rsulfuratus: put 1747. grash had been there at least 9 months according to the orcs you interogatted when you were in kharson in april
[2023-11-18 04:26 PM] rsulfuratus: of course that is still a guess
[2023-11-18 04:26 PM] rsulfuratus: but a more accurate one
[2023-11-18 04:26 PM] rsulfuratus: and actually, you could pin it down even more, since obviously he *wasn't* in kharsan when the werewolf leader found the scepter
[2023-11-18 04:27 PM] rsulfuratus: which is a date you got from interogatting the werewolf prisoner in tokra
[2023-11-18 04:27 PM] Deciusmus: Right, but I don't need to be that accurate
[2023-11-18 04:28 PM] rsulfuratus: put 1747, the exact date in that year is uncertain but it is definitely then
[2023-11-18 04:28 PM] rsulfuratus: 1747 (Fraternity of the Empty Moon): A werewolf who is part of the Fraternity of the Empty Moon finds the Scepter of Command near Kharsan
[2023-11-18 04:28 PM] Deciusmus: yeah switched to 1747
[2023-11-18 04:28 PM] Deciusmus: is People of the Rainbow a clan? I guess yes, right?
[2023-11-18 04:33 PM] rsulfuratus: More or less yes
[2023-11-18 04:33 PM] rsulfuratus: I‚Äôm working on orcs though, since you are heading that way
[2023-11-18 04:33 PM] Deciusmus: ok, I should stop then
[2023-11-18 04:35 PM] Deciusmus: Caelynn the Seer has broken secrets btw
[2023-11-18 04:35 PM] rsulfuratus: Actually maybe you should work on them to remind yourself who they are
[2023-11-18 04:35 PM] rsulfuratus: I‚Äôll fix caelynn
[2023-11-18 04:36 PM] rsulfuratus: Probably nothing too major. The only really important secret not to read is philosophers guild. Most other secret stuff is in my DM notes not the public notes
[2023-11-18 04:37 PM] Deciusmus: I prefer to just not read them
[2023-11-18 04:37 PM] Deciusmus: I was just trying to scan the backlinks in Caelyns file to get the date we met her
[2023-11-18 04:37 PM] Deciusmus: and saw it but I didn't read it other than accidentally to see something about how she can't die
[2023-11-18 04:38 PM] Deciusmus: If you are fixing her pull first because I updated her header to include when we met her
[2023-11-18 04:38 PM] Deciusmus: is centaur a type of fey?
[2023-11-18 04:38 PM] Deciusmus: ie. should it be centaur (fey)
[2023-11-18 04:46 PM] rsulfuratus: No centaurs would be very mad if you called them fey
[2023-11-18 04:47 PM] rsulfuratus: although I guess technically they are a type of fey as they were created by archfey. they have their own page though, so better to just do species = centaur
[2023-11-18 04:54 PM] Deciusmus: yup
[2023-11-18 04:54 PM] Deciusmus: I read the page on centaurs! üôÇ
[2023-11-18 04:54 PM] Deciusmus: and learned that
[2023-11-18 05:00 PM] Deciusmus: Ok, I need to go get Zachary from a birthday party and then we are doing stuff, so that's it for a while, but I am pushing a fix to handle auto-linking after a capital letter.
    
    location: 'trapped in Stormcaller Tower'
    
    becomes
![[../_discord_assets/image-0FFF9.png]]
[2023-11-18 05:01 PM] Deciusmus: basically if you have a location: bit that 
    (a) doesn't match a file
    (b) doesn't START with a capital letter
    (c) DOES contain a capital letter we treat it like:
    
    `[part before capital letter]` `[part after capital]`
[2023-11-18 06:27 PM] rsulfuratus: pushed some file reorg/rename
[2023-11-18 06:58 PM] Deciusmus: I pushed the new location handling as above
[2023-11-18 06:59 PM] Deciusmus: It has some kind of a stack overflow bug in certain circumstances, I think when you have a place that starts with a captial letter but dosn't exist
[2023-11-18 06:59 PM] Deciusmus: i.e. 
    
    partOf: The Western Green Sea Region
[2023-11-18 06:59 PM] Deciusmus: I've been fixing the data rather than the bug, but just FYI
[2023-11-18 08:02 PM] rsulfuratus: here's a bug - when you have DR tags in lists, it becomes an event not a person for default strings
![[../_discord_assets/image-78536.png]]
[2023-11-18 08:03 PM] rsulfuratus: probably need to use explicit event tag instead of presence of DR
[2023-11-18 08:15 PM] rsulfuratus: switched the order of the if statements which seems to work, just makes it so a page is only an event if it is nothing else]`
[2023-11-18 08:59 PM] Deciusmus: Should organizations really have a secondary info line? I have a bunch of Sembaran army stuff where just having:
![[../_discord_assets/image-0468B.png]]
[2023-11-18 08:59 PM] Deciusmus: looks kinda bad
[2023-11-18 08:59 PM] Deciusmus: I can fix on a per page basis easily enough just wondering if I should change the default
[2023-11-18 09:18 PM] rsulfuratus: Yeah that isnt unnecessary, doesn‚Äôt look great I agree
[2023-11-18 09:31 PM] Deciusmus: I‚Äôm done for the night pushed a handful of updates.
[2023-11-18 09:31 PM] Deciusmus: A few bug fixes and more non-human cleanup
[2023-11-18 09:32 PM] Deciusmus: Feel free to change the default line for orgs in metadata
[2023-11-18 09:32 PM] Deciusmus: Or I‚Äôll do it tomorrow

