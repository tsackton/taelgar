# Discord DM – 2023-11-24

[2023-11-24 09:08 AM] rsulfuratus: what are these names for, exactly? e.g., is this geographic region of the sentinel foothills; the cultural designation for the highland kingdom area, something else?
[2023-11-24 09:08 AM] rsulfuratus: taking a page from Scotland, it could make sense to just have: "Sembaran Highlands" and "Sembaran Lowlands"
[2023-11-24 09:20 AM] Deciusmus: The general region of the highland kingdoms. I don’t think they would call themselves “sembaran highlands” though
[2023-11-24 09:24 AM] rsulfuratus: I guess I don't have a good sense of whether this would be a coherent region as seen from within. like, would someone from Breva think of themselves as a person from Breva and from Jarviskar or whatever?
[2023-11-24 09:25 AM] rsulfuratus: the drankorians definitely would have called them "the Sembaran highlands"
[2023-11-24 09:25 AM] rsulfuratus: of course one complication with that is there is already a highlands region of sembara
[2023-11-24 09:30 AM] Deciusmus: Basically I think originally we called this area “Greater Sembara” and then we had “highland kingdoms” and “Tyrwingha” and such as subparts of “Greater Sembara”
[2023-11-24 09:31 AM] Deciusmus: But as I’ve developed the history I’m not happy with that naming
[2023-11-24 09:33 AM] Deciusmus: In particular I don’t think the “highland kingdoms” would ever consider themselves part of “Sembara”
[2023-11-24 09:33 AM] Deciusmus: They have a long and independent history and were only ruled from Sembara for ~100 years around the Great War
[2023-11-24 09:34 AM] rsulfuratus: so, I think it depends on where Sembara comes from
[2023-11-24 09:34 AM] rsulfuratus: take this scenario, for example
[2023-11-24 09:35 AM] Deciusmus: Well, I created the Duchy of Sembara and the river Semb as a source for the name of the kingdom
[2023-11-24 09:35 AM] rsulfuratus: river names often stick around for a long time, so perhaps the Drankorians came and the local people said the river was the Semb, and so in the Drankorian empire these were known as the Sembaran provinces
[2023-11-24 09:36 AM] Deciusmus: Right, the river name is probably ancient
[2023-11-24 09:36 AM] rsulfuratus: in Drankorian geography, Sembaran would refer to the entire Semb rivershed, basically everything from the Sentinels to the Green Sea, south of the Volta and north of the hills
[2023-11-24 09:37 AM] rsulfuratus: the duchy of Sembara takes its name from this
[2023-11-24 09:37 AM] rsulfuratus: the parallel is Great Britain
[2023-11-24 09:38 AM] Deciusmus: Although Great Britain is a counter example to me. Sembara = England, Tyrwingha = wales, highland kingdoms = Scotland
[2023-11-24 09:38 AM] rsulfuratus: but the island is called Great Britain
[2023-11-24 09:38 AM] rsulfuratus: which derives from latin
[2023-11-24 09:39 AM] rsulfuratus: and if the Angles hadn't moved in between the end of the roman empire and the growth of the english kingdoms, England very likely could just be Britain
[2023-11-24 09:39 AM] Deciusmus: I guess there is no reason you couldn’t have had Britain as the name of the English kingdom
[2023-11-24 09:39 AM] rsulfuratus: since England = land of the Angles and Britain = land of the britons
[2023-11-24 09:40 AM] rsulfuratus: which isn't to say that a name for "Scotland" = highland kingdoms isn't worth having
[2023-11-24 09:41 AM] rsulfuratus: but probably it should be "land of the X"
[2023-11-24 09:42 AM] rsulfuratus: not sure have a name for the people who live there
[2023-11-24 09:42 AM] rsulfuratus: it is actually probably useful to develop names for all the various subcultures since that makes naming regions a lot easier, since some many  names in the real world are just "land of the X"
[2023-11-24 09:43 AM] rsulfuratus: this is what I was trying to do with Vostok and Skaehem (which are land of the Vos and land of the Skaer)
[2023-11-24 09:48 AM] Deciusmus: You’ve slightly convinced me though that Sembara is actually the appropriate name. 
    
    The derivation would be:
    Drankorians appear and are told basically “we are the people of the Semb river valley, ie the Sembarans” (at the time the drankorians arrived the highland/lowland distinction was fairly minimal)
    
    They don’t conquer the highlands, but the provinces are called Sembaran provinces (ala “Gaulish or British provinces”)
    
    The highlanders themselves continue to refer to themselves as “sembaran“ or “free sembarans” or “highland sembarans”
    
    And today there is just the Sembaran lowlands and the Sembaran highlands
[2023-11-24 09:49 AM] Deciusmus: On the other hand, it probably is pretty reasonable for the sembaran highlanders to have developed a new name for themselves, or linguistic change to have happened differently, etc
[2023-11-24 09:50 AM] Deciusmus: Today (1720/1750) it seems to me the four highland kingdoms would have much more in common with each other than with sembara
[2023-11-24 09:54 AM] Deciusmus: All *that* said, for worldbuilding/in game reference purposes, it seems nicer to have a word for the highland kingdoms as I find it unsatisifying to refer to the language as "highlander" and so on. And there is an actual region of the kingdom of Sembara that is called the Sembaran Highlands as well. In the real world things end up with confusing names all the time, but I'd prefer to not have this particular situation be confusing
[2023-11-24 09:55 AM] rsulfuratus: right
[2023-11-24 09:55 AM] Deciusmus: So if we can come up with a good name for the "land where the people of Lavnoch, Breva, Ardlas, and Zovcka live" it probably makes sense
[2023-11-24 09:55 AM] rsulfuratus: i think a name for the people is most useful
[2023-11-24 09:55 AM] rsulfuratus: then you'd just have X-land
[2023-11-24 09:55 AM] rsulfuratus: and also a name for the language
[2023-11-24 09:55 AM] Deciusmus: Yeah, agreed
[2023-11-24 10:11 AM] Deciusmus: On a totally different topic, I am refactoring the Javascript stuff pretty significantly
[2023-11-24 10:11 AM] Deciusmus: I'm moving towards an architecture where there is a string formatter class that takes strings in the form of:
    
    "Some data `<token:format>`"
    
    and applies the format
[2023-11-24 10:12 AM] Deciusmus: This is designed to centralize all formatting of locations and dates so that we can more easily add fancy features (like approximate dates or location slices)
[2023-11-24 10:12 AM] Deciusmus: It also makes it much easier to use pieces of frontmatter logic in dataview queries, i.e. to allow for things like the secondary line or pronunciation or pronouns in a "members of" table
[2023-11-24 10:14 AM] rsulfuratus: i am hopefully going to push a new taeglarverse build today with session 82 session notes, fwiw
[2023-11-24 10:15 AM] rsulfuratus: a string formatter makes a lot of sense and will also be worth implementing in python (the more things that can be moved to classes with clearly defined functions the simpler the translation is in my experience)
[2023-11-24 10:15 AM] rsulfuratus: but it might be a while before I get to it
[2023-11-24 10:17 AM] Deciusmus: It shouldn't matter a ton, except that python won't have access to certain new features, i.e. if we add splices to loc
[2023-11-24 10:20 AM] Deciusmus: The basic idea is that the DV scripts (like get_pageDatedValue, get_Whereabouts) are for picking a format string
[2023-11-24 10:21 AM] Deciusmus: I'm still trying to figure out exactly the best solution to your whereabouts problem
[2023-11-24 10:28 AM] rsulfuratus: it seems like allowing specific display overrides on particular whereabouts lines (or campaignInfo lines) should be fairly easy, you just check if whereabout.displayDefaults exists and then if it does just use your merge code to create a new format string, in buildFormattedLocationString
[2023-11-24 10:32 AM] Deciusmus: the challenge for whereabouts is you don't know if the whereabouts line is going to be a current location or a last known location or a home location
[2023-11-24 10:33 AM] Deciusmus: I need to go back and read your example, but I am not sure if you need to know the usage type of the whereabout to know what to put in the string
[2023-11-24 10:33 AM] Deciusmus: I'm also a bit nervous about slicing  because it is susceptible to unpredictable changes if you reorganize a region or something
[2023-11-24 10:34 AM] Deciusmus: Like, if I added a "Greater Sembara" region everything that sliced that was rooted back at Sembara could get weird.
[2023-11-24 10:36 AM] rsulfuratus: it wouldn't change anything more than already
[2023-11-24 10:37 AM] rsulfuratus: i wasn't thinking of arbitrary slices
[2023-11-24 10:37 AM] rsulfuratus: just continuous slices
[2023-11-24 10:38 AM] rsulfuratus: so for location chain a-b-c-d-e-f, you can pick to display b-c-d instead of a-b-c
[2023-11-24 10:38 AM] rsulfuratus: not you can pick a-c-f
[2023-11-24 10:38 AM] Deciusmus: right, ok
[2023-11-24 10:38 AM] Deciusmus: so a start + count only, not arbitrary ranges
[2023-11-24 10:38 AM] rsulfuratus: yeah
[2023-11-24 10:38 AM] rsulfuratus: i agree arbitrary ranges get wonky
[2023-11-24 10:39 AM] rsulfuratus: the use case is really for something like buliding a full whereabouts for delwath
[2023-11-24 10:39 AM] rsulfuratus: you'd want a good chunk of that time to be in "Dunmar Fellowship"
[2023-11-24 10:40 AM] rsulfuratus: but you don't (necessarily) want the location to be "Dunmar Fellowship, Vindristjarna, Vetta"
[2023-11-24 10:40 AM] rsulfuratus: you might prefer: "Vetta, Skaer Islands, Western Green Sea"
[2023-11-24 10:41 AM] rsulfuratus: or for a lot of my chardonian adventurers, if i build a full whereabouts, I don't want to copy and past, I want a whereabouts container
[2023-11-24 10:41 AM] Deciusmus: right, so it is mostly about skipping to the "actual" location
[2023-11-24 10:42 AM] rsulfuratus: exactly
[2023-11-24 10:42 AM] Deciusmus: Would it make more sense to have a filter for only showing actual location pieces?
[2023-11-24 10:42 AM] Deciusmus: `<loc:p>` = location with places only
[2023-11-24 10:42 AM] rsulfuratus: yeah, that might be easier
[2023-11-24 10:43 AM] rsulfuratus: but, you'd still want that to be applied per-whereabouts
[2023-11-24 10:43 AM] rsulfuratus: e.g., for antonia, I don't want to skip over Mirror of Soul Trapping
[2023-11-24 10:43 AM] Deciusmus: right, but I actually think the "per whereabouts" is just the formatter
[2023-11-24 10:43 AM] rsulfuratus: but do probably want to skip over "Kadmos Team"
[2023-11-24 10:43 AM] Deciusmus: i.e. you do not want to say: "Currently in: `<loc:p>`"
[2023-11-24 10:44 AM] Deciusmus: you want to just say:
    
    { type: away, location: Dunmar Fellowship, format: p }
[2023-11-24 10:44 AM] rsulfuratus: ah yes, that would work
[2023-11-24 10:44 AM] Deciusmus: What you really want is a selector for what type of things to show
[2023-11-24 10:44 AM] Deciusmus: format: pio shows places, organizations, and items is the default
[2023-11-24 10:45 AM] rsulfuratus: but it is also useful to adjust the location size by whereabout as well
[2023-11-24 10:45 AM] Deciusmus: right
[2023-11-24 10:45 AM] Deciusmus: that still works
[2023-11-24 10:45 AM] Deciusmus: so you could do format: 10p
[2023-11-24 10:45 AM] rsulfuratus: yes
[2023-11-24 10:45 AM] Deciusmus: means 10 sizes, places only
[2023-11-24 10:45 AM] Deciusmus: or format 10ip means 10 pieces items and places only
[2023-11-24 10:46 AM] Deciusmus: format 10 means 10 pieces, items, places, and organizations
[2023-11-24 10:46 AM] Deciusmus: I'd actually prefer to have an exclude
[2023-11-24 10:46 AM] Deciusmus: maybe o means exclude organizations, i means exclude items, etc
[2023-11-24 10:46 AM] Deciusmus: p would mean exclude people
[2023-11-24 10:46 AM] rsulfuratus: the one reason to still do slices, although maybe there is a better solution, is i started putting the whereabouts of some people as, e.g., an inn, so that the Met by Party line would show the specific meeting location
[2023-11-24 10:47 AM] rsulfuratus: but I don't necessarily like the actual location of the person to be the inn
[2023-11-24 10:47 AM] Deciusmus: right you'd like to allow subtypes of places
[2023-11-24 10:47 AM] Deciusmus: but that gets confusing to represent in single characters
[2023-11-24 10:47 AM] Deciusmus: i.e. exclude place/inn
[2023-11-24 10:47 AM] Deciusmus: but maybe a slice is better for that
[2023-11-24 10:47 AM] Deciusmus: because you know it is always the first one
[2023-11-24 10:48 AM] rsulfuratus: probably p = exclude places, i= exclude items, o = exclude organizations, f = exclude first would be sufficient
[2023-11-24 10:48 AM] Deciusmus: you might also want an exclude person
[2023-11-24 10:49 AM] rsulfuratus: right, yes
[2023-11-24 10:49 AM] Deciusmus: I would use p for exclude person
[2023-11-24 10:49 AM] rsulfuratus: sure
[2023-11-24 10:49 AM] rsulfuratus: not sure you'd ever want to exclude places, really
[2023-11-24 10:49 AM] Deciusmus: and l for exclude places
[2023-11-24 10:49 AM] Deciusmus: maybe in a whereabout of an item
[2023-11-24 10:49 AM] rsulfuratus: sure if you just want to track the owner/maker
[2023-11-24 10:49 AM] Deciusmus: yeah
[2023-11-24 10:49 AM] Deciusmus: same with organizations
[2023-11-24 10:50 AM] Deciusmus: org and item whereabouts lines use loc:1 often
[2023-11-24 10:50 AM] Deciusmus: to avoid showing the full details
[2023-11-24 10:50 AM] Deciusmus: but loc:l to exclude locations works better
[2023-11-24 10:51 AM] Deciusmus: you could also use casing, i.e. L P O I could mean include only  locations people organizations items
[2023-11-24 10:51 AM] Deciusmus: and F
[2023-11-24 10:51 AM] Deciusmus: actually if you did that plus R r for regions
[2023-11-24 10:53 AM] Deciusmus: You could probably get rid of the counting entirely, i.e. you could say:
    
    R = include regions only; r = exclude regions (i.e. places with typeOf region)
    L = include locations only; l = exclude locations
    P = include people only; p = exclude people
    I = include items only; p = exclude items
    F = include first step only; f = exclude first step
    O = include organizations only; o = exclude organizations
[2023-11-24 10:53 AM] rsulfuratus: so this would be very easy to do in python, you just record the location chain as a list of dicts and then you can use a lamba function to filter however you want, it is like one line of code
[2023-11-24 10:53 AM] rsulfuratus: but you want to split the get_location_from_part_of into two functions
[2023-11-24 10:54 AM] rsulfuratus: one that builds the chain, one that formats the array once you have it
[2023-11-24 10:54 AM] rsulfuratus: I'm not sure the javascript approach
[2023-11-24 10:54 AM] Deciusmus: Haven't looked but it isn't hard
[2023-11-24 10:54 AM] Deciusmus: when formatting a whereabout which wins? the `<loc:xxx>` or the inside the whereabout version?
[2023-11-24 10:55 AM] Deciusmus: I guess the inside the whereabout one
[2023-11-24 10:55 AM] rsulfuratus: presumably it has to be the inside the whereabouts
[2023-11-24 10:56 AM] Deciusmus: i.e. if you had:
    
    whereaboutsCurrent: "Based in: `<loc:pi>`"
    
    and then a whereabout like:
    
    { type: , location: , format: fp }
    
    presumably you want to end up formatting using fp not pi
[2023-11-24 11:01 AM] Deciusmus: There is some complexity about whether you follow whereabouts or partof if you have both
[2023-11-24 11:11 AM] rsulfuratus: I think you should always follow whereabouts if it exists
[2023-11-24 11:12 AM] rsulfuratus: conceptually, partOf: `<loc>` for places is just shorthand for whereabouts: {type: home, location: `<loc>`}
[2023-11-24 11:13 AM] rsulfuratus: since it (almost). never makes sense for a place to have a whereabouts line
[2023-11-24 11:13 AM] rsulfuratus: although imagine an inn that is teleported from Chardon to Tollen
[2023-11-24 11:13 AM] Deciusmus: I think the end state should be:
    * A format string logic as per the above
    * A set of different replacements that represent different things you might care about
    
    >` `<current:format>`:  this represents the current location of an item and uses the "current" whereabout as of the current fantasy date. it follows current whereabouts if current exists, but if current doesn't exist on the first item it uses last known instead. When using last know if follows the chain using the last known's date, rather than the current date. If a page further up the chain doesn't have current, it terminates with unknown unless the page has a partOf
    
    >` `<onlycurrent:format>` : this represents the current location of an item and uses the "current" whereabout as of the current fantasy date. it follows current whereabouts up the chain or partofs if there is no current whereabout. Unlike current it never uses last known and will report Unknown if there is no current
    
    >` `<partof:format>`: this represents what the thing is part of. it never looks at whereabouts and can be used to present something other than a location, i.e. an organization is part of a larger organization or a phasing stone is part of Vindistraja
    
    >` `<origin:format>`: this is the same as current but when following the chain it uses the page creation date, not the current date
    
    >` `<home:format>`: this follows home whereabouts if they exist, otherwise partof. It won't follow current whereabouts (i.e. an away whereabout)
[2023-11-24 11:14 AM] Deciusmus: The reason to distinguish partof and current is because an organization could have both
[2023-11-24 11:14 AM] Deciusmus: or an item could have both
[2023-11-24 11:14 AM] rsulfuratus: but if you are following a location chain you always want the whereabouts
[2023-11-24 11:14 AM] Deciusmus: right but you might want to follow the partOf chain instead
[2023-11-24 11:15 AM] rsulfuratus: but only for a place
[2023-11-24 11:15 AM] Deciusmus: or an organization or item
[2023-11-24 11:15 AM] Deciusmus: or even a person
[2023-11-24 11:15 AM] rsulfuratus: but when would you want to follow the partOf for an item?
[2023-11-24 11:15 AM] Deciusmus: an item on Vindistraja
[2023-11-24 11:16 AM] Deciusmus: you might want the header line to be:
    
    (`<rarity>` `<etc>` `<partof:I>`)
[2023-11-24 11:16 AM] Deciusmus: so it would be (a rare magical phasing stone on Vindistraja)
[2023-11-24 11:16 AM] Deciusmus: I mean, I guess that is a bit weird
[2023-11-24 11:16 AM] Deciusmus: because you would probably just use whereabouts
[2023-11-24 11:16 AM] Deciusmus: The better use case is organizations
[2023-11-24 11:17 AM] rsulfuratus: exactly
[2023-11-24 11:17 AM] Deciusmus: the Cleenseau Garrison is partOf: Dunfry Regiment and whereabouts: Cleenseau
[2023-11-24 11:17 AM] Deciusmus: you then want to show both:
    
    Parent Organization: `<partof>`
    Based in: `<home>`
[2023-11-24 11:18 AM] rsulfuratus: i'm only talking about what you do when you are building a location chain
[2023-11-24 11:18 AM] rsulfuratus: e.g., if a person has Cleenseau Garrison as their whereabouts
[2023-11-24 11:18 AM] rsulfuratus: conceptually, that means, "this person is where the Cleenseau Garrison is"
[2023-11-24 11:19 AM] Deciusmus: right but I think you want to distinguish different bits
[2023-11-24 11:19 AM] Deciusmus: see the spec above
[2023-11-24 11:19 AM] Deciusmus: `<current:x>` means "current location" following the current whereabouts if there are any whereabouts and partof only if there are not
[2023-11-24 11:20 AM] rsulfuratus: your spec seems too complicated to me but maybe i'm missing something
[2023-11-24 11:22 AM] rsulfuratus: my take is whereabouts are a super useful way to speed up notetaking once you get using them, because many items and people move around in clumps, so you just need to track the clump and then you can put the whereabouts of the things in the clump as "clump"
[2023-11-24 11:22 AM] rsulfuratus: but to make this sensible requires tweaking display a bit
[2023-11-24 11:22 AM] Deciusmus: Right, my goal is slightly different and maybe not clear
[2023-11-24 11:22 AM] Deciusmus: I'm not talking about formatting the whereabouts line itself or rules on the whereabouts line
[2023-11-24 11:23 AM] Deciusmus: I'm talking about trying to generalize the formatting so you can make a data view table like:
    
    column 1 = "`<typeof>`, `<pronouns>`"
    column 2 = "`<current>`
[2023-11-24 11:23 AM] Deciusmus: and that works but you could also add a column 3
    
    column 3 = "`<partof:1>`"
[2023-11-24 11:24 AM] Deciusmus: and have it all mean something
[2023-11-24 11:24 AM] rsulfuratus: ah, i see
[2023-11-24 11:24 AM] Deciusmus: for the whereabouts line itself, you'd just have {format:x}
[2023-11-24 11:24 AM] rsulfuratus: so, i think i would simplify that, though
[2023-11-24 11:24 AM] Deciusmus: then the "whereaboutsCurrent" in the display defaults would be "Currently in: `<current>`"
[2023-11-24 11:25 AM] rsulfuratus: I actually kind of think we should replace partOf: x with whereabouts: x in places
[2023-11-24 11:25 AM] Deciusmus: I mean, arguably partOf doesn't need to exist for anything
[2023-11-24 11:25 AM] Deciusmus: for organizations it is affiliations
[2023-11-24 11:26 AM] Deciusmus: i.e. the Cleenseau garrison is not "part of" the Dunfry regiment, it is affliated with and has a primary affiiation typeof set correctly
[2023-11-24 11:27 AM] Deciusmus: conceptually leaderOf is not really meaningful either
[2023-11-24 11:27 AM] Deciusmus: I actually think there are really just 2 relationships:
    whereabouts and affiliations
[2023-11-24 11:28 AM] rsulfuratus: so, i would argue you are overgeneralizing a little bit
[2023-11-24 11:28 AM] rsulfuratus: whereabouts only ever means one thing: where is this in space
[2023-11-24 11:28 AM] rsulfuratus: but affiliations gets complicated if it has to track a large number of different relationships
[2023-11-24 11:29 AM] Deciusmus: isn't it just
    
    { title: , thing: , start:, end:, isLeader: }
[2023-11-24 11:29 AM] Deciusmus: leaderOf is definitely being misused for "navigator of the x"
[2023-11-24 11:29 AM] rsulfuratus: sure, that is a display hack
[2023-11-24 11:29 AM] Deciusmus: entirely because you can't set the title of an affliation
[2023-11-24 11:30 AM] rsulfuratus: but yeah I think generalizing the leaderOf structure could work
[2023-11-24 11:30 AM] Deciusmus: I actually think "affiliation" just means:
    
    this specific creature or group of creatures is associated with this other group of creatures
[2023-11-24 11:31 AM] rsulfuratus: it makes dataview queries a bit hairer
[2023-11-24 11:31 AM] Deciusmus: it does
[2023-11-24 11:31 AM] Deciusmus: but whereabouts: x instead of partof: x has the same problem
[2023-11-24 11:31 AM] Deciusmus: basically it requires mostly using javascript helpers
[2023-11-24 11:34 AM] Deciusmus: and actually it works fine
[2023-11-24 11:34 AM] Deciusmus: as long as you don't care about dates
[2023-11-24 11:34 AM] Deciusmus: i.e. this query works
    
    table from #person where contains(affiliations, "Drankor") or contains(affiliations.org, "Drankor")
[2023-11-24 11:34 AM] Deciusmus: in the case where I have one page with
    
    affiliations: `[ Drankor ]`
    
    and another page with
    
    affiliations: `[ {org: Drankor }]`
[2023-11-24 11:35 AM] Deciusmus: this also works:
    
    table from #person where contains(whereabouts, "Cleenseau") or contains(whereabouts.location, "Cleenseau")
[2023-11-24 11:36 AM] rsulfuratus: yeah i just tested the same thing
[2023-11-24 11:36 AM] Deciusmus: It just ignores the types and dates; so you end up with everything that has ever been somewhere (or anything that has ever been affiliated with something)
[2023-11-24 11:37 AM] Deciusmus: but I actually think i.e. for checking the part of chains of places, its totally fine to just ignore that
[2023-11-24 11:37 AM] Deciusmus: the teleporting inn appears in both Chardon and Tollen's list - who cares?
[2023-11-24 11:37 AM] Deciusmus: and if you want perfect accuracy there is always javascript helpers
[2023-11-24 11:38 AM] Deciusmus: but collapsing leaderOf / partOf for organizations / affliations into one thing actually is appealing from a simplification standpoint
[2023-11-24 11:38 AM] Deciusmus: You end up getting the same display as before, with just "Member" being the default title for affiliations with no title
[2023-11-24 11:39 AM] Deciusmus: but it lets you specify dates for affliations if you want
[2023-11-24 11:39 AM] Deciusmus: i.e. Antonia when she becomes a key NPC in the far northern 1760s campaign, could have
    
    affiliation: `[ {org: The Cleansed, start: xxx, end: yyy }]`
[2023-11-24 11:40 AM] rsulfuratus: that is nice
[2023-11-24 11:40 AM] rsulfuratus: i think instead of just isLeader, you need  "leader of" and "subordinate to" relationships
[2023-11-24 11:41 AM] Deciusmus: Right that gets into the ruledBy stuff I was trying to avoid
[2023-11-24 11:41 AM] rsulfuratus: e.g. for "Kadmos Team" org, you have:
    - affiliated with Society of the Open Scroll
    - ruled by The Cleansed
[2023-11-24 11:42 AM] Deciusmus: I think a type: on affiliation that currently supports “none” or “leader” is probably a good starting spot
[2023-11-24 11:42 AM] rsulfuratus: sure
[2023-11-24 11:42 AM] Deciusmus: And see where it goes
[2023-11-24 11:42 AM] Deciusmus: Anyway afk for a bit. Will revisit some of this later
[2023-11-24 11:43 AM] rsulfuratus: hmm actually
[2023-11-24 11:44 AM] rsulfuratus: there are really three display options:
    halfling, she/her, of the AFF1
    ---
    Queen of AFF2
    ---
    Member of: AFF3
[2023-11-24 11:44 AM] rsulfuratus: I think you want those to be tracked in the affiliation object
[2023-11-24 11:44 AM] rsulfuratus: so:
    type = primary, leader, none
[2023-11-24 11:45 AM] rsulfuratus: that works fine for people, but using affliations to track organizational relationships also implies a partOf
[2023-11-24 11:46 AM] rsulfuratus: that is, I might want the Voltara Legion to be:
    Voltara Legion
    a garrison in the Chardonian Army
    Based In: Voltara
[2023-11-24 11:47 AM] rsulfuratus: but I don't want the Chardonian Army to be:
    Leader of Voltara Garrison, Myraeni Garrison, Chardon Garrison, Chasa Garrison, Valandros Garrison, etc, etc
[2023-11-24 11:47 AM] Deciusmus: Maybe part of actually does make sense for orgs
[2023-11-24 11:48 AM] Deciusmus: It could be unitOf instead
[2023-11-24 11:48 AM] rsulfuratus: so I think minimally you want:
    - primary (implies of XXX in the secondary info line)
    - leader (implies Leader of XXX in separate lie)
    - partof (imples A `<typeof>` in XXX in separate line)
    - none (implies Member Of: XXX)
[2023-11-24 11:49 AM] Deciusmus: Ah you are suggesting using it as affiliation type
[2023-11-24 11:49 AM] rsulfuratus: whether those are all combined into a single affiliations line or not i think is more about ease of programming or ease of querying
[2023-11-24 11:49 AM] rsulfuratus: but I think at least in the notes I've worked on / am thinking about, those are the four types of affiliation relationships that should be separately tracked/displayed
[2023-11-24 11:50 AM] rsulfuratus: honestly having it all in one affiliations object would be way simpler for primary affiliations, which currently were quite annoying for the halflings because I had to make a stub note for every halfling family with typeOf: family
[2023-11-24 11:54 AM] rsulfuratus: so i think i'd lean towards putting everything as an affiliation type, which is also more easily extensible if we think of another relationships that needs to be captured (maybe feudal relationships for example)
[2023-11-24 11:54 AM] Deciusmus: Right so I think getting rid of leader of and primary affiliation and just having a type line of “primary” | “leader” | “member”
    
    Last is the default. 
    
    Makes sense
[2023-11-24 11:55 AM] Deciusmus: Of course if the primary affiliation is dated then it has to be dynamic but I suppose that is rare
[2023-11-24 11:55 AM] Deciusmus: Part of is less clear. Need a bit of thought. 
    All affiliations would support the dates and title features of leader of
[2023-11-24 11:57 AM] Deciusmus: Display logic and allow for either
    
    Non primary affiliations 
    Primary affiliations
    All affiliations
[2023-11-24 12:00 PM] Deciusmus: Currently leader would be unused except for 
    
    - leader title defaults to page title
[2023-11-24 12:09 PM] Deciusmus: Let me mess around with this a bit later today
[2023-11-24 12:13 PM] Deciusmus: I want to finish the string format refactor first. But I might implement the affiliation stuff before the whereabouts format stuff
[2023-11-24 02:31 PM] rsulfuratus: ```dataview
    TABLE WITHOUT ID Link.file.name as Note, join(split(meta(Link).path,"/",2),"/") as Folder, Link as Link, choice(contains(Link.tags, "status/unknown"), "check", choice(contains(Link.tags, "status"), "wip", "complete")) As Status
    FROM "Campaigns/Dunmari Frontier/Session Notes/Session 81 (DuFr)"
    FLATTEN file.outlinks as Link
    WHERE Link
    GROUP BY Link
    ```
[2023-11-24 02:31 PM] rsulfuratus: gets all the notes that link to a specific page, with status info. could probably be neater in javascript
[2023-11-24 02:31 PM] rsulfuratus: but is great for prioritizing updating notes that are linked to session notes
[2023-11-24 02:35 PM] Deciusmus: I’ve made some progress on refactor. 
    
    Basically all string display and composition is based on the new string formatter class.
[2023-11-24 02:35 PM] Deciusmus: It takes -dozen special `<xxx>` strings plus will fall back to just looking at metadata
[2023-11-24 02:40 PM] Deciusmus: The special ones are:
    - current: get the current whereabouts for this page and follow the chain using the “now” date
    - “home” currently same as current except it starts from home 
    - “origin” starts are origin and follows chain at page creation date or 0001 if there is no page creation date
    - lastknown: starts with last known and follows at “end date” of last known
[2023-11-24 02:41 PM] Deciusmus: Logically I’m planning on getting rid of part of. These chain following functions will only follow whereabouts
[2023-11-24 02:41 PM] Deciusmus: For back compat a page with type = place, partOf set, no whereabouts will act like a single whereabouts with the part of value
[2023-11-24 02:42 PM] Deciusmus: The get_xxx methods then are just about selecting the right format string
[2023-11-24 05:02 PM] Deciusmus: do you think it is worth keeping the "primary affiliation" stuff for backwards compat or is it fine to have to update all the pages to have
    
    affiliations: `[ {org: Goodbarrels, type: primary}]` if you want Of xxx to appear?
[2023-11-24 05:03 PM] rsulfuratus: its fine to not retain backwards compatibility. its a static line anyway
[2023-11-24 05:05 PM] Deciusmus: Any opinion on the "org" bit?
[2023-11-24 05:05 PM] Deciusmus: I didn't want to use affiliation as it is long to type
[2023-11-24 05:05 PM] Deciusmus: currently supporting either
    
    { org: xxx }
    
    or
    
    { place: xxx }
    
    where 
    
    { place: xxx } is shorthand for { place:xxx, type: leader }
[2023-11-24 05:06 PM] rsulfuratus: org is fine
[2023-11-24 05:18 PM] Deciusmus: I assume you don't really need to see:
    
    Properitor of The Salty Pig, Fiskirk, Tollen
[2023-11-24 05:18 PM] Deciusmus: Or do you want that?
[2023-11-24 05:18 PM] rsulfuratus: i don't think so
[2023-11-24 05:18 PM] Deciusmus: it is a lot easier to not have that for now
[2023-11-24 08:36 PM] Deciusmus: I'm about to push a major rewrite of the Javascript to a branch
[2023-11-24 08:36 PM] rsulfuratus: i'm about to push session notes
[2023-11-24 08:36 PM] Deciusmus: There are likely some bugs but it is a lot more flexible
[2023-11-24 08:38 PM] Deciusmus: I'll try to write a bit of a guide
[2023-11-24 08:38 PM] rsulfuratus: adding some more notes to test cases (ones that use the new features and work) is almost as useful
[2023-11-24 08:38 PM] Deciusmus: true
[2023-11-24 08:39 PM] Deciusmus: A lot of it is magic formatting strings:
    
         // t: title case; s: lower case, u: initial upper case
            // a: indefinite article, A: indefinite article if first
            // n: never link, y: always link
[2023-11-24 08:39 PM] Deciusmus: so you can do stuff like (`<ancestry:A>` `<typeof:A)
    
    and it will get you
    
    a Sembaran human
    or
    a human
    
    but not
    
    a a human or a Sembaran a human
[2023-11-24 08:43 PM] Deciusmus: Affiliations are also no longer static
[2023-11-24 08:43 PM] Deciusmus: because they are normalized with regnal stuff
[2023-11-24 09:03 PM] Deciusmus: Do you have any examples of complex intercrossing whereabouts chains?
[2023-11-24 09:03 PM] Deciusmus: Or did you not commit them because they didn't really work?

