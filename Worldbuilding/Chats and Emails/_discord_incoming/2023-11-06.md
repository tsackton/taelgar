# Discord DM â€“ 2023-11-06

[2023-11-06 03:44 PM] Deciusmus: Can't stay away from messing around with Obsidian instead of doing work... ðŸ™‚
    
    I have a question on the map. I found an Obsidian leaflet plugin and it works really well to show the taelgar map (which I grabbed for now from https://tsackton.github.io/taelgarmap/)
[2023-11-06 03:44 PM] Deciusmus: What did you do to set up the coordinate system though so that Lat/Long is correct and so that distances are correct?
[2023-11-06 04:32 PM] Deciusmus: Adding this:
    
    ---
    tags: `[location-source]`
    location: `[2543.2695, 1705.1875]`
    mapmarker: town
    ---
    
    Get this:
![[../_discord_assets/image-07397.png]]
[2023-11-06 04:57 PM] rsulfuratus: I have been actually working all day ðŸ˜
[2023-11-06 04:57 PM] rsulfuratus: The coordinate system is a huge mess - you can look at the taelgar map repo
[2023-11-06 04:57 PM] Deciusmus: I got it working
[2023-11-06 04:58 PM] rsulfuratus: The thing Iâ€™ve been thinking about is moving away from the current static site generator to something a little more flexible.
[2023-11-06 04:59 PM] rsulfuratus: We are currently working on rebuilding our website for my group so I spent a lot of today browsing themes - the taelgar verse is kind of ugly compared to whatâ€™s out there
[2023-11-06 04:59 PM] rsulfuratus: The obsidian leaflet stuff is very cool but Iâ€™m not sure how easy it would be to push to web
[2023-11-06 05:00 PM] rsulfuratus: Iâ€™d love to be able to sync the leaflet taelgar map with the taelgar verse
[2023-11-06 05:16 PM] rsulfuratus: Eg with better ssg could do this: https://davidjvitale.com/tech/jekyll-leaflet/getting-started/
[2023-11-06 05:17 PM] Deciusmus: I'm not sure what ssg means here
[2023-11-06 05:27 PM] rsulfuratus: static site generator
[2023-11-06 05:27 PM] rsulfuratus: something that converts md to html
[2023-11-06 05:28 PM] rsulfuratus: very popular in academic world
[2023-11-06 05:28 PM] rsulfuratus: https://snparcher.readthedocs.io/en/latest/
[2023-11-06 05:28 PM] rsulfuratus: for example, autobuilds website from md docs embedded in github repo
[2023-11-06 05:29 PM] Deciusmus: Right. So I was going to say there are 2 architectures for an obsidian export --
    
    1. A ssg that parses markdown to generate a site
    2. An obsidian plugin that exports the obsidian rendered view (which is HTML, after all)
[2023-11-06 05:29 PM] Deciusmus: i.e. https://github.com/KosmosisDire/obsidian-webpage-export
[2023-11-06 05:29 PM] Deciusmus: The problem with any SSG in this scenario is that inevitably it won't be able to handle codeblocks very well
[2023-11-06 05:30 PM] Deciusmus: Or, more specifically, to handle a code block it will increasingly need to reimplement stuff
[2023-11-06 05:30 PM] Deciusmus: There are kinda hacky fixes in most cases, i.e. the stuff we already did with dataview special casing
[2023-11-06 05:31 PM] rsulfuratus: yeah that is another option
[2023-11-06 05:32 PM] rsulfuratus: I guess could imagine a workflow like: private vault ->` public vault ->` website or something
[2023-11-06 05:33 PM] Deciusmus: I mean, if my day job was writing typescript I'd be tempted to just fork obsidian-webpage-export and change it to only export files linked from a root page
[2023-11-06 05:33 PM] Deciusmus: I was messing around with it a little bit, it already exports dataview perfectly
[2023-11-06 05:34 PM] rsulfuratus: it isn't just the things not linked, it is things like dataview commands that pull up both secret and public files
[2023-11-06 05:34 PM] rsulfuratus: need to rerender the dataview in a vault that doesn't have the secret files
[2023-11-06 05:34 PM] Deciusmus: Right, dataview with secrets doesn't work
[2023-11-06 05:35 PM] Deciusmus: Actually private ->` export ->` plugin to do the export is a much stronger workflow than anything else, as it allows various plugins to work
[2023-11-06 05:35 PM] Deciusmus: i.e. private vault to export vault
[2023-11-06 05:37 PM] Deciusmus: you could practically do it with the existing obsidian-webage-export, if the idea was say:
    1. Run a python script or whatever that created the "to export" value. This would include only files from the linked node and strip the `%%`^Campaign blocks and such, but wouldn't render dataview blocks
[2023-11-06 05:37 PM] Deciusmus: 2. Trigger an export from the export value
[2023-11-06 05:37 PM] rsulfuratus: does the obsidian-webpage-export work with leaflet?
[2023-11-06 05:38 PM] Deciusmus: not quite
[2023-11-06 05:38 PM] Deciusmus: it doesn't include the JS
[2023-11-06 05:38 PM] rsulfuratus: but it does work with dataviewjs?
[2023-11-06 05:38 PM] Deciusmus: yes
[2023-11-06 05:42 PM] Deciusmus: So the leaflet exports correctly but because the leaflet JS isn't included, you can't scroll or interact with the map
[2023-11-06 05:42 PM] Deciusmus: 
![[../_discord_assets/image-3C25A.png]]
[2023-11-06 05:43 PM] Deciusmus: so you get something like the above, where clicking the icons doesn't do anything, and you can't + or - the map to change sizes
[2023-11-06 05:43 PM] Deciusmus: whereas the dataview stuff works fine, because the dataview generates a static html page, and doesn't depend on loaded JS to work
[2023-11-06 05:45 PM] rsulfuratus: so the options are basically:
    a) run custom/specialized code to go from  obsidian vault ->` clean md, and then use the massive set of tools available to build nice websites from clean md to generate the taelgarverse website
    b) use custom code to sanitize the obsidian vault, then use specialized code to export the vault to html
[2023-11-06 05:45 PM] rsulfuratus: the advantage of (b) is obviously that it is easy to build a lot of stuff in obsidian with dataview and similar tools that will get seemlessly exported
[2023-11-06 05:46 PM] rsulfuratus: the disadvantage of (b) is that you are kind of stuck relying on whoever is developing the obsidian html export
[2023-11-06 05:46 PM] Deciusmus: I mean, on (b), that is only because neither of us really wants to learn typescript
[2023-11-06 05:47 PM] Deciusmus: syncing a plugin, i.e. by just having a custom "taelgar-html-export" that is un-git-ignored would be very easy
[2023-11-06 05:48 PM] Deciusmus: I think the real disadvantage of (b) is that it is very tightly coupled to Obsidian itself
[2023-11-06 05:49 PM] Deciusmus: and for example, if Obsidian wanted to try to push monetization of their own Publish flow, it could all fall apart
[2023-11-06 05:49 PM] rsulfuratus: right, that too
[2023-11-06 05:49 PM] Deciusmus: Or if they are not careful about breaking changes. I'm looking at the export code and it is pretty deeply tied to the HTML structure that the obsidian rendering engine produces
[2023-11-06 05:49 PM] rsulfuratus: in general it is just more brittle
[2023-11-06 05:49 PM] Deciusmus: Well, the brittleness is different
[2023-11-06 05:50 PM] Deciusmus: The clean MD architecture is very brittle when using any code block or similar feature in Obsidian
[2023-11-06 05:50 PM] rsulfuratus: right, in the past we haven't used a ton of code blocks but with the events/timelines I can see those being really useful
[2023-11-06 05:51 PM] Deciusmus: Or with leaflets, say
[2023-11-06 05:54 PM] rsulfuratus: right, but leaflets is actually where i was thinking that clean md + a ssg would be better. it would require a bit more tweaking but seems much more likely to a) consistently work, and b) be easy to use/look nice. 
    
    e.g., do you know if you can use tiles with obsidian? for local browsing the 25 Mb map is fine but for web browsing it is noticably slow
[2023-11-06 05:55 PM] Deciusmus: You can use tiles but you need a server for that
[2023-11-06 05:56 PM] rsulfuratus: theoretically is should be possible to tile any raster image and serve it from localhost
[2023-11-06 05:56 PM] Deciusmus: Yeah but obsidian-leaflets doesn't do that
[2023-11-06 05:56 PM] rsulfuratus: ah okay
[2023-11-06 05:56 PM] Deciusmus: I mean, obsidian leaflet has an image mode or a tile mode, and it only supports local images via image mode
[2023-11-06 05:57 PM] Deciusmus: Dataview is really the main problem
[2023-11-06 05:58 PM] Deciusmus: Because of its complexity
[2023-11-06 05:59 PM] Deciusmus: ALthough any highly complex plugin is complicated. For example, obsidian leaflet generates markers from location: tags in your vault
[2023-11-06 05:59 PM] Deciusmus: No idea how easy it would be replicate that in something else
[2023-11-06 06:07 PM] rsulfuratus: some of that is fairly straightforward - e.g. the plugin i linked to above can do exactly that
[2023-11-06 06:07 PM] Deciusmus: Then again, something like Jekyll already works with YAML frontmatter so it should work trivially
[2023-11-06 06:08 PM] rsulfuratus: generally speaking I think that the real question is whether the website turns into a separate project for fiddling around with or not
[2023-11-06 06:08 PM] rsulfuratus: right now it basically is just what it is; with the obsdian website export it would be the same
[2023-11-06 06:09 PM] rsulfuratus: in both cases there is a small bit of python cleanup, but generally there would never be a lot of fiddling around with the website as a website
[2023-11-06 06:11 PM] Deciusmus: Mermaid is another plugin I've used in a few places
[2023-11-06 06:14 PM] Deciusmus: But it also has a jekyll equivalent
[2023-11-06 06:18 PM] rsulfuratus: hmm. so looking at obsidianhtml, which we currently use (and is now no longer being developed, so probably worth moving on)
[2023-11-06 06:18 PM] rsulfuratus: it basically uses a github-secrets-like workflow to handle things like dataview
[2023-11-06 06:19 PM] rsulfuratus: which doesn't work perfectly, but might something to think about
[2023-11-06 06:19 PM] Deciusmus: I'm going to eat dinner... the complexity with dataview is related to executing the javascript
[2023-11-06 06:19 PM] rsulfuratus: yeah I need to start cooking
[2023-11-06 06:20 PM] rsulfuratus: the idea is you run obsidian website export to generate html
[2023-11-06 06:20 PM] rsulfuratus: then you cut out the dataview bits and replace them with the generated html
[2023-11-06 06:51 PM] rsulfuratus: for the obisidian ->` clean markdown, this could be useful
[2023-11-06 06:51 PM] rsulfuratus: https://github.com/devidw/obsidian-to-hugo
[2023-11-06 06:53 PM] rsulfuratus: Anyway for now I actually need to work on content if I spend more time on this. Iâ€™m taking the week of thanksgiving off so maybe will fiddle the
[2023-11-06 06:53 PM] rsulfuratus: `*`then

