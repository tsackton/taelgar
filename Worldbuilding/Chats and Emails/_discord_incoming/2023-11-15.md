# Discord DM – 2023-11-15

[2023-11-15 08:11 AM] rsulfuratus: probably not going to do much coding on taelgar stuff today, but am thinking a bit about organization and don't really like having the python stuff embedded in the taelgar notes repository (the javascript makes more sense since it is never run independently of the notes). so i'm splitting out the python code into a new taelgar-utils repo, which we could make a submodule of taelgar if we wanted to. i spent a while trying to get the calling java in python to work last night and I think it is probably faster and easier to debug chatgpt translated code than debug a pure python java vm running inside my python code, and for anything other than header generation we probably need a different solution anyway
[2023-11-15 08:13 AM] rsulfuratus: anyway, not going to think about this deeply today and tonight will probably mostly work on content, but this is what i'm thinking right now
[2023-11-15 09:02 AM] rsulfuratus: okay I lied, I'm actually messing around with updating my python utilities. what data do you actually use from the various json configs (I guess primarily metadata.json and taelgarConfig.json)
[2023-11-15 10:58 AM] Deciusmus: Taelgar config is gone
[2023-11-15 10:58 AM] Deciusmus: I don’t think it is used at all
[2023-11-15 10:58 AM] Deciusmus: Metadata config is used for the campaign prefix mapping only
[2023-11-15 11:00 AM] Deciusmus: But I don’t think anything in python needs that. If the idea is that the python code is only to reimplement the dynamic bits, at the moment the only dynamic page pieces that don’t depend on dv.table are:
    
    Get whereabouts
    Get page dated value
    Get regnal value
[2023-11-15 11:02 AM] Deciusmus: The page dated and regnal stuff in turn requires the fantasy calendar json for current date. 
    
    The whereabouts stuff uses current date logic as well, plus a bunch of obsidian apis to map Cleenseau to Cleenseau, Barony of Averil, Sembara
[2023-11-15 11:02 AM] rsulfuratus: i'm making my own config for the python utilities that allow you to set things like default campaign and obsidian path, and if you had anything that got information like a default campaign from an existing json i'd read it from there (like I read current date from the fantasy calendar data json) instead of from the utilities  config
[2023-11-15 11:03 AM] Deciusmus: No, none of the JavaScript cares about default campaign
[2023-11-15 11:04 AM] Deciusmus: Thinking ahead a bit, btw, if we define some “core” dataview tables it might be relatively realistic, using obsidian tools, to just recreate them in python
[2023-11-15 11:05 AM] rsulfuratus: yeah obsidian tools is pretty nice. it certainly makes things like building the location chain from partOf metadata very easy
[2023-11-15 11:05 AM] rsulfuratus: it is harder to implement stuff that uses dataviewjs for complex filtering
[2023-11-15 11:06 AM] Deciusmus: Right but if we had something like
    
    dvStandardTables.getNPCsInTown(dv.current())
[2023-11-15 11:07 AM] Deciusmus: It might be pretty straightforward to just use obsidian tools to reimplement the npcs in the town table
[2023-11-15 11:09 AM] rsulfuratus: yeah. at least until i find a work coding project to work on and spend my breaks from meetings and paper editing and grant writing doing work instead of hobby programming
[2023-11-15 11:10 AM] Deciusmus: Well maybe by then someone will have done something open source or obsidian will have a cleaner way to generate markdown or something
[2023-11-15 11:11 AM] rsulfuratus: ha, maybe.
[2023-11-15 11:45 AM] Deciusmus: I am assuming it is on you to tag people I newly create with duFr/unware and so on. That is, you, if you care, should find all pages with tag = person and !tag = dufr and fix. Or are you hoping I will add tags for you?
[2023-11-15 11:45 AM] rsulfuratus: no, don't add tags
[2023-11-15 11:46 AM] rsulfuratus: I will probably update my various filters to just use person not dufr instead of having a specific dufr unaware
[2023-11-15 12:00 PM] Deciusmus: I'm not sure if I love the repeated ands:
![[../_discord_assets/image-02F70.png]]
[2023-11-15 12:00 PM] Deciusmus: But being able to tag a sembaran royalty to a bunch of kingdoms really helps keeping track of when various places were conqueored/broke away
[2023-11-15 12:04 PM] Deciusmus: what tag are we using for stubs?
[2023-11-15 12:04 PM] rsulfuratus: status/stubs
[2023-11-15 12:04 PM] rsulfuratus: `*`status/stub
[2023-11-15 12:06 PM] rsulfuratus: i plan to have: "status/stub" for stubs, "status/uptodate" for don't need to work on this unless something changes during a session that impact its, "status/wip" for something in between, and perhaps "status/notes" for pages with extensive notes that need to be integrated (or perhaps use status/wip for that)
[2023-11-15 12:06 PM] rsulfuratus: my logic for having them all under status is it makes it easy to find tags with no status information (which are kind of a random mix)
[2023-11-15 12:06 PM] Deciusmus: Do you think the header generator should link everything even if is dangling?
[2023-11-15 12:07 PM] Deciusmus: i.e. if someone has an affliation that is not currently a page, do we create it as
    
    [[something]]
    or just
    something
[2023-11-15 12:07 PM] rsulfuratus: i used to dislike all the dangling links, but I use them a lot now to keep track of things that should have a page
[2023-11-15 12:07 PM] rsulfuratus: so i'd lean towards awlays link
[2023-11-15 12:08 PM] rsulfuratus: i usually browse the dangling links page and create pages for things with like 5+ dangling notes
[2023-11-15 12:08 PM] Deciusmus: I've just been cleaning up sembaran royalty and it is kinda annoying to have
    
    House of Teckburg
    
    unlinked, because then I need to go create the page manually and so on
[2023-11-15 12:09 PM] rsulfuratus: i'm fine with always linked
[2023-11-15 12:09 PM] rsulfuratus: also helps to find things that aren't consistently named as you get a bunch of dangling links to something you have a page for
[2023-11-15 12:09 PM] rsulfuratus: although I'm not sure the best way to fix that - i guess create the page and then merge?
[2023-11-15 12:09 PM] rsulfuratus: if you just create the page you get all the ugly full paths
[2023-11-15 12:10 PM] rsulfuratus: but does merge clean those up? i guess we can test
[2023-11-15 12:10 PM] Deciusmus: it does
[2023-11-15 12:11 PM] Deciusmus: I used it to fix ugly links when I mistakenly created a Notes page with the same name as something real
[2023-11-15 12:11 PM] Deciusmus: Or to fix a bunch of Avatus vs Atavus mistakes in my timeline
[2023-11-15 12:17 PM] Deciusmus: 
![[../_discord_assets/image-F7402.png]]
[2023-11-15 12:18 PM] Deciusmus: The only annoying thing about having family be part of affiliations is that if the page doesn't exist it displays wrong
[2023-11-15 12:18 PM] Deciusmus: So for I example I had to create a page for the Dharajun Dynasty. But I guess that is fine
[2023-11-15 12:19 PM] rsulfuratus: how does it display families again? it looks up the page and gets the tag information to determine display?
[2023-11-15 12:19 PM] Deciusmus: yeah
[2023-11-15 12:19 PM] Deciusmus: it looks for front matter of
    orgType: family
[2023-11-15 12:19 PM] rsulfuratus: ah okay so anything not tagged family gets the: member of [[thing]]
[2023-11-15 12:19 PM] Deciusmus: familes get the "of xxx"
    others get
    Member of: xxx
[2023-11-15 12:20 PM] rsulfuratus: so family pages need to be named the FamilyNamePlural?
[2023-11-15 12:20 PM] rsulfuratus: or do you insert "the"
[2023-11-15 12:22 PM] Deciusmus: The current logic is:
    
    Given affiliation: `[x, y]`
    
    We look for the page named x
    if the page exists, we use the "name" attribute from frontmatter, and if it is different from the page name, link like `[name|file]`, otherwise we link like `[file]`
    
    if the page doesn't exist, we just link `[x]`
[2023-11-15 12:22 PM] rsulfuratus: ah okay that makes sense
[2023-11-15 12:22 PM] Deciusmus: But we might want 2 different names - a name and a descriptor
[2023-11-15 12:24 PM] Deciusmus: because, i.e. to get
    
    the Dharajun dynasty
    
    instead of The Dharajun Dynasty
    
    I had to set the name in the page to the Dharajun dynasty
    which means the header of the page is
    
    # the Dharajun dynasty
    
    not
    
    # The Dharajun Dynasty
    
    or
    
    # Dharajun dynasty
[2023-11-15 12:24 PM] Deciusmus: alternatively, I could just add "the", i.e. say
    
    of the `<x>`
    rather than
    of `<x>`
[2023-11-15 12:26 PM] rsulfuratus: for given group, I think you want 
    Member of: `[XXXX]`
    of `[XXXX]` 
    # XXXX (on the org page)
    
    to pretty much always be the same, the only difference is you want the title on the org page to be title case, the member of `[XXXX]` to be title case, and the of `[XXXX]` to be unconverted
[2023-11-15 12:27 PM] rsulfuratus: e.g. if I tag Grash's Horde as a family and a random orc gets "of Grash's Horde", I don't want a the inserted
[2023-11-15 12:27 PM] Deciusmus: right
[2023-11-15 12:27 PM] Deciusmus: maybe I should just do:
    
    of `<x>` where I toLower the first letter in x
[2023-11-15 12:27 PM] Deciusmus: but even that isn't right
[2023-11-15 12:27 PM] rsulfuratus: I'd do it the other way
[2023-11-15 12:27 PM] Deciusmus: because you don't want
    
    of grash's horde
[2023-11-15 12:28 PM] rsulfuratus: for the header of org, you to x to upper the first letter in x
[2023-11-15 12:28 PM] Deciusmus: Right, that makes more sense.
[2023-11-15 12:29 PM] rsulfuratus: then you set the name of Dharajun Dynasty to "the Dharajun Dynasty", the file name to Dharajun Dynasty", and add an alias for Dharajun if you wish
[2023-11-15 12:29 PM] rsulfuratus: displays as "The Dharajun Dynasty" for the title; "of the Dharajun Dynasty" in person pages, and links to either Dharajun Dynasty or Dharajun (if set as an alias)
[2023-11-15 12:29 PM] rsulfuratus: for Grash's Horde, you'd have just Grash's Horde as title
[2023-11-15 12:30 PM] rsulfuratus: (name sorry not title)
[2023-11-15 12:31 PM] rsulfuratus: what happens if there are multiple family affiliations? i assume this is an error?
[2023-11-15 12:33 PM] rsulfuratus: in that case might treat it not as family, might instead organization groups into two classes - membershipType: unique and membershipType: shared
    you can only be in one membershipType unique group and these are displayed as "of [[NAME]]" in person pages
    you can be in as many membershipType shared groups as you want and these are displayed as "Member of: [[XXXX.toTitle]], [[YYYY.toTitle]] on person pages
[2023-11-15 12:34 PM] rsulfuratus: that lets you use the "family" tag for things like orc hordes where it isn't really family but functions like family. or perhaps deno'qai tribes
[2023-11-15 12:34 PM] rsulfuratus: they are family-ish
[2023-11-15 12:35 PM] rsulfuratus: separately, i wonder how to track dwarven thuhrs, I think probably just having them as affiliations is fine, with the name set to Ruler Thuhr
[2023-11-15 12:37 PM] rsulfuratus: alternatively if you can display multiple families, perhaps just leave orgType: family and document that this is family-ish things, and primarily controls whether a person is "of `[XXXX]`" or "Member: `[XXX]`",
[2023-11-15 12:42 PM] Deciusmus: So I implemented as follows:
    
    Anytime you get a "name" of something (family, place, person) you can decide if you want title casing or not.
    
    Title case = yes: We uppercase every first letter except for a short hardcoded list of words (the, of, an, and a few others) which are kept lower case if they are NOT the first word. 
    
    So the House of Sewick in title case is The House of Sewick not The House of Sewick
    
    Title case = no: preserve exact casing
[2023-11-15 12:43 PM] Deciusmus: Currently, we use title case for:
    
    Member of: xxx, on people pages when linking to an affiliation
    H1 title on all pages
    
    Everything use uses regular case
[2023-11-15 12:43 PM] Deciusmus: Aliases are ignored
[2023-11-15 12:45 PM] rsulfuratus: I’d use title case for location partOf probably too
[2023-11-15 12:45 PM] rsulfuratus: Although that might never come up?
[2023-11-15 12:46 PM] Deciusmus: The Green Sea vs the Green Sea
[2023-11-15 12:46 PM] rsulfuratus: I mean you might never have the plain text be non-title case
[2023-11-15 12:47 PM] Deciusmus: Well, do you want:
    
    Current Location: Tollen, the Green Sea
    
    or
    
    Current Location: Tollen, Green Sea
    
    or
    
    Current Location: Tollen, The Green Sea
[2023-11-15 12:47 PM] rsulfuratus: I would lean towards last
[2023-11-15 12:48 PM] Deciusmus: I guess if you are never going to want the Green Sea (outside of plain text like the [[Green Sea]]) then I'm not sure it matters because the name can just be The Green Sea
[2023-11-15 12:50 PM] rsulfuratus: Right. We don’t really have a consistent scheme for how to name pages, eg what is the file called, what goes in aliases, and what goes in name
[2023-11-15 12:57 PM] Deciusmus: Ok, well, I implemented so that for locations I implemented as:
    People:
    
    "Ruler of X": regular case
    All whereabouts: title case EXCEPT died in X is regular case
    (so Lived in: The Green Sea or died in the Green Sea)
    
    Organizations:
    
    "Based in: X" title case
    
    Places:
    "an inn in X": title case
    
    Additionally, where it says title case, only the first in the location series is title case.
    
    So:
    
    an inn in the Seventh Ward, Tollen, The Green Sea
    
    instead of
    
    an inn in the Seventh Ward, Tollen, the Green Sea
[2023-11-15 12:57 PM] Deciusmus: It obviously doesn't matter if the name is already title cased
[2023-11-15 01:06 PM] Deciusmus: >` Right. We don’t really have a consistent scheme for how to name pages, eg what is the file called, what goes in aliases, and what goes in name
    
    It would be good to define this. There are really several things:
    
    1) The file name. This is what you need to specify in anything that tries to read the file (partOf, affiliations) as well as the easiest thing to link to when typing
    2) The aliases. This is an almost-as-easy-as-the-filename thing to refer to when typing (but if you rename the file, links via alias don't rename automatically, they rename the target but keep the same text)
    3) The front matter "names". These are used in constructing the header and in generating content
[2023-11-15 01:08 PM] rsulfuratus: I think for people, the convention should be:
    file name - unique full name w/out title
    aliases - anything you want to auto link (eg just first name)
    name - display name which can vary, eg for generic halflings I’d set to full name but for Wellby goodbarrel just to Wellby
[2023-11-15 01:09 PM] rsulfuratus: header is: title + name
[2023-11-15 01:11 PM] rsulfuratus: For organizations and places it is a bit trickier. I’d lean towards never including starting prepositions in the file name, except when you would never say “place” `<other noun>` where place is an adjective
[2023-11-15 01:11 PM] rsulfuratus: Eg Green Sea trade routes
[2023-11-15 01:12 PM] rsulfuratus: So for example inn names that start with “The” might be easier to leave alone
[2023-11-15 01:13 PM] rsulfuratus: Rationale is for linking. Green Sea will link either The Green Sea or just Green Sea, but if file name is Green Sea you need aliases and this gets annoying when fixing names
[2023-11-15 01:16 PM] rsulfuratus: Eg still a bunch of broken Great War links from “the Great War” vs “Great War”
[2023-11-15 01:17 PM] Deciusmus: Do you mean if the file name is The Green Sea
[2023-11-15 01:18 PM] rsulfuratus: if the file name is "Green Sea", the if I type "Wellby confronted a group of Green Sea merchants" and "It was a calm day on the Green Sea" in session notes, both will autolink
[2023-11-15 01:19 PM] rsulfuratus: if the file name is "The Green Sea", only the first will autolink (or neither, depending on how autolinking handles case)
[2023-11-15 01:20 PM] rsulfuratus: you can just add "Green Sea" as an alias, but then a) when you have "the Green Sea" in session notes, it gives you two choices to link to that point towards the same page (more likely to produce garbled links when you are clicking fast), and b) if we ever change the name of the Green Sea, only the text linked to the file directly, and not to the alias, will update
[2023-11-15 01:21 PM] rsulfuratus: so my argument is that (for places and organizations at least) we should usually prefer linking to the file name, and should prefer file names without leading prepositions to make auto linking easier
[2023-11-15 01:21 PM] Deciusmus: But the text string
    The Green Sea 
    In a session note will generate a link like
    The [[Green Sea]]
    Right?
[2023-11-15 01:22 PM] rsulfuratus: not if the file name is The Green Sea
[2023-11-15 01:22 PM] Deciusmus: Right
[2023-11-15 01:22 PM] Deciusmus: We are agreeing
[2023-11-15 01:22 PM] rsulfuratus: yes okay
[2023-11-15 01:23 PM] Deciusmus: “the” should never be in file names unless it is intrisnic to the place, ie The Flying Fox Inn
[2023-11-15 01:23 PM] Deciusmus: Or a book title or something
[2023-11-15 01:24 PM] Deciusmus: To go back to families for a minute while I eat lunch…
[2023-11-15 01:26 PM] rsulfuratus: so then I think the convention is pretty simple:
    file name is unique full name without leading prepositions
    name is display name, in regular case if you want the option for it to show up in regular case, in title case if you always want title case
    aliases are used for any other text that should link to that page (but don't include the `<file name>` or really any alias that contains the file name, unless there is a good reason)
[2023-11-15 01:26 PM] Deciusmus: Yes
[2023-11-15 01:27 PM] Deciusmus: With one exception for people an  alias  of just first name
[2023-11-15 01:27 PM] Deciusmus: Also sometimes the file name needs disambiguating
[2023-11-15 01:28 PM] rsulfuratus: right, aliases that are just part of the file name, or if there are two pages with the same file name, would be good reasons to include exceptions
[2023-11-15 01:29 PM] Deciusmus: Does this imply the Drankorian emperors should have file names of just X rather than Emperor X?
[2023-11-15 01:29 PM] rsulfuratus: yes
[2023-11-15 01:29 PM] Deciusmus: On organizations…
[2023-11-15 01:29 PM] rsulfuratus: i have a meeting in a few minutes but send your family thoughts I'll reply later
[2023-11-15 01:37 PM] Deciusmus: The basic idea is that a person might have a “special” organization that we want to display differently. I think there is also an implication that a person can only belong to one of these organizations at a time. Most commonly this is a noble house, a clan, an extended family, an orc horde, etc. Most commonly it’s tied to birth or marriage although there are exceptions. 
    
    At the moment the only thing we want to do differently with these organizations is show a “of X” line rather than a member of: x line
[2023-11-15 01:38 PM] Deciusmus: One option is to make this something other than an affiliation / organization pair. This is likely annoying though given for data query purposes we think these are basically the same
[2023-11-15 01:57 PM] Deciusmus: Looking at Wikipedia a bunch, there is a tendency to structure "affiliations" via affiliation specific language, i.e. have a bio block like:
    
    Political Party: XXX
    Other political affilations: YYY, ZZZ
    
    or
    
    House: QQQ
    
    or
    
    Company: YYY
    Board Member of: QQQ, ZZZ
[2023-11-15 02:16 PM] rsulfuratus: for simplicity, I'd start with just a simple true/false flag in organization metadata that is true if we want to print "of XXXX" and false otherwise
[2023-11-15 02:23 PM] rsulfuratus: if we want to later on we can use the organization/XXXX tags to trigger different display information, but this seems overkill at the moment
[2023-11-15 02:27 PM] rsulfuratus: on names - can i also request that we don't use unicode characters in file names? Alicarinquë always messes up my git history because my work terminal and my home terminal interpret it differently for some reason i don't care to debug
[2023-11-15 02:27 PM] Deciusmus: I was starting to write a longer reply here but got pulled into a meeting
[2023-11-15 02:29 PM] Deciusmus: I think the real question is:
    
    * orgType and membershipType
    * just membershipType
    * just orgType
    
    I don't love the idea that you *have* to be in a single noble house or you get an error, so either way I think that only the first affiliation that matches the rule gets special treatment.
[2023-11-15 02:33 PM] rsulfuratus: sure, that's fine
[2023-11-15 02:34 PM] rsulfuratus: I would actually call it orgDisplay not orgType
[2023-11-15 02:34 PM] rsulfuratus: i think it is not an actual classification (e.g., i'd probably put orgDisplay = True or whatever) on adventuring parties, to get Dewalth of the Side Quests
[2023-11-15 02:35 PM] rsulfuratus: you could even just make it an optional displayDefaults value
[2023-11-15 02:38 PM] rsulfuratus: if you really want to make it customizable you have have an additional primaryOrg optional display default on a person page that overrides group tags and assigns that to the primary org
[2023-11-15 02:39 PM] rsulfuratus: so the idea would be that any person page has 0 or 1 primary organizations.
    
    primary organizations are determined as: 
    - the first affiliation that has the orgType = primary or whatever
    - unless the primaryOrg displayDefault is set on the person page, which then uses that
[2023-11-15 02:39 PM] rsulfuratus: that is probably overengineered since you could just rely on changing the affiliation order
[2023-11-15 02:41 PM] rsulfuratus: unless there are some organizations that you want to be displayed as "of XXX" on some pages and "member of: xxxx" on other pages
[2023-11-15 02:44 PM] Deciusmus: So if you are `[ House of Sewick, House of Lils, Oracle of the Riven ]` you get
    
    of House of Sewick
    Member of: House of Lils, Oracle of the Riven
[2023-11-15 02:44 PM] rsulfuratus: yes
[2023-11-15 02:44 PM] Deciusmus: I would do something a little different
[2023-11-15 02:45 PM] Deciusmus: I would say that we have an "orgType" just to categorize orgs for unknown future purposes
    
    and then the displayDefaults has a primaryOrgType: X
[2023-11-15 02:47 PM] Deciusmus: We can then default the primaryOrgType to "family"
[2023-11-15 02:49 PM] rsulfuratus: sure, that's fine
[2023-11-15 02:49 PM] rsulfuratus: that allows any customization you want as long as all orgs have an orgType
[2023-11-15 02:50 PM] rsulfuratus: presuming that if primaryOrgType is undefined it will never display "of XXX"
[2023-11-15 02:50 PM] rsulfuratus: should orgtype just be a tag though?
[2023-11-15 02:51 PM] rsulfuratus: i guess it is a bit easier to look up orgType
[2023-11-15 02:51 PM] rsulfuratus: and also enforces that all orgs can only have one type, which is probably good
[2023-11-15 02:51 PM] rsulfuratus: anyway yes I think your solution works fine
[2023-11-15 02:55 PM] rsulfuratus: your regenerate header script deletes all the text in a file if there is no header there to begin with, is that intended/is there another template to use if a header doesn't exist?
[2023-11-15 02:57 PM] rsulfuratus: also - do we want the top level folders in the gazetteer to be "The South Region" or "South Region"
[2023-11-15 02:59 PM] Deciusmus: Either we should default displayOrg to family in the display defaults section in the python yaml cleanup, or we should assume family if it isn't present
[2023-11-15 02:59 PM] Deciusmus: it is kinda a pain perhaps to go add it to all the rulers I just fixed
[2023-11-15 02:59 PM] Deciusmus: That is a bug, it shouldn't do anything if there is no yaml frontmatter
[2023-11-15 02:59 PM] rsulfuratus: no, i mean in this note:
    ---
    yaml
    ---
    this is a stub
[2023-11-15 03:00 PM] rsulfuratus: "this is a stub" seems to be deleted
[2023-11-15 03:00 PM] rsulfuratus: maybe it was user error
[2023-11-15 03:01 PM] Deciusmus: It considers everything between the end of the yaml and the first newline to be "header frontmatter"
[2023-11-15 03:01 PM] Deciusmus: I guess I could update it to say if the "header frontmatter" has no h1 to not delete and just insert
[2023-11-15 03:01 PM] rsulfuratus: 
![[../_discord_assets/image-334C9.png]]
[2023-11-15 03:01 PM] rsulfuratus: that gets deleted
[2023-11-15 03:01 PM] rsulfuratus: because there is no newline after the end of the yaml
[2023-11-15 03:02 PM] Deciusmus: Right
[2023-11-15 03:03 PM] rsulfuratus: i think the current behavior is fine just need to be aware
[2023-11-15 03:04 PM] rsulfuratus: minor bug: "an university"
[2023-11-15 03:05 PM] Deciusmus: heh, I can't really fix that
[2023-11-15 03:05 PM] Deciusmus: I just implemented "vowel = an, consonant = a"
    I could special case un I guess?
[2023-11-15 03:06 PM] Deciusmus: Do all un words start use a, I'm not sure off hand
[2023-11-15 03:06 PM] Deciusmus: an undead or a undead? both sound ok in my head
[2023-11-15 03:07 PM] rsulfuratus: it is just words that start with "u" but phonetically sound like "you"
[2023-11-15 03:07 PM] rsulfuratus: e.g., a universe, a university, a unicycle
[2023-11-15 03:07 PM] rsulfuratus: might just be "uni"
[2023-11-15 03:07 PM] Deciusmus: yeah but Javascript doesn't have a handy helper function for what the phonentic sound of a word is!
[2023-11-15 03:08 PM] rsulfuratus: but it would be "an uninformed person"
[2023-11-15 03:08 PM] rsulfuratus: it is plain text so it is easy to fix
[2023-11-15 03:08 PM] rsulfuratus: there are also some others like an hour not a hour
[2023-11-15 03:08 PM] rsulfuratus: I mean fix directly in the note
[2023-11-15 03:10 PM] rsulfuratus: going back to this - i would write it as defaults to family unless displayDefaults.primaryOrgType is defined
[2023-11-15 03:11 PM] rsulfuratus: but if you have a templater to generate yaml for a new note, I'd have it set displayDefaults.primaryOrgType : family for people
[2023-11-15 03:11 PM] rsulfuratus: then at some point if we want we can either manually or via code update the ones missing the default (in case we want to do something like make more org types, e.g. dynasty vs family or something)
[2023-11-15 03:13 PM] rsulfuratus: honestly timelineDescriptor could also be in displayDefaults, with a default value of name if missing
[2023-11-15 03:13 PM] rsulfuratus: i would prefer to keep as much "display control" things in displayDefaults to avoid metadata clutter, it does look way nice with minimal metadata
[2023-11-15 03:14 PM] rsulfuratus: (probably name.titlecase actually)
[2023-11-15 03:16 PM] Deciusmus: Pushing two changes:
    
    1.  A fix to the delete bug in regen
    2. A special case for uni in my "an" vs "a" handler
[2023-11-15 03:17 PM] rsulfuratus: playing around, I'd actually prefer that locations either all be title case or never title case, in "a city in XXX" and in whereabouts
[2023-11-15 03:17 PM] rsulfuratus: this looks kind of weird to me:
![[../_discord_assets/image-33B33.png]]
[2023-11-15 03:18 PM] Deciusmus: See in that one shouldn't it just be
    
    the Chasa River Valley, Chardonian Empire
    
    ?
[2023-11-15 03:19 PM] rsulfuratus: probably not worth worrying too much about little details
[2023-11-15 03:19 PM] Deciusmus: but happy for title case to propogate onward. Just change get_LocationByPieces in metadatautils to pass titleCase in the recursive call rather than always passing true
[2023-11-15 03:19 PM] rsulfuratus: this also looks a bit weird IMO:
![[../_discord_assets/image-D6E1B.png]]
[2023-11-15 03:20 PM] Deciusmus: true
[2023-11-15 03:20 PM] rsulfuratus: generally I like notes to be The XXXX as the title as well
[2023-11-15 03:20 PM] rsulfuratus: e.g., The Chardonian Empire as opposed to Chardonian Empire
[2023-11-15 03:20 PM] Deciusmus: yeah, I guess that's true
[2023-11-15 03:20 PM] Deciusmus: having "The XXX" as the name: and XXX as the file solves a lot of display issues
[2023-11-15 03:21 PM] rsulfuratus: well, "the XXX" as the name
[2023-11-15 03:21 PM] Deciusmus: that's what I mean
[2023-11-15 03:22 PM] rsulfuratus: yeah
[2023-11-15 03:28 PM] Deciusmus: should we add thurh to dwarves like ka for elves?
[2023-11-15 03:28 PM] rsulfuratus: leaning towards just making it an affiliation
[2023-11-15 03:34 PM] rsulfuratus: so playing around a bit, noticing a few things:
    
    1. always creating links for any text may not be the best idea. for locations, there are a lot of people with location information like "plains west of Tokra" or "somewhere in the Feywild". e.g., look at Cloudspinner, those links are pretty cluttered. for organizations, it is probably safer
[2023-11-15 03:36 PM] rsulfuratus: 2. I'm not sure that using name to store appropriate definte article in non-title case is correct
[2023-11-15 03:40 PM] rsulfuratus: 3. some (many?) organizations have leaders, and it is nice to be able to use the leaderOf for these, but the end result is a bit cluttered:
![[../_discord_assets/image-81FE9.png]]
[2023-11-15 03:40 PM] rsulfuratus: e.g., you duplicate "Ruler of" and "Member of", and those are both fixed text
[2023-11-15 03:43 PM] rsulfuratus: theoretically you could fix most of this by using displayDefaults more heavily, where pretty much any text in the header can be overwritten with displayDefaults (but has sensible defaults in most cases to avoid needing to set displayDefaults for everything)
[2023-11-15 03:44 PM] rsulfuratus: but since most of this is not live, and most people won't have headers updated all that frequently, i'm not sure how much effort it is worth putting into programmatically customizing everything
[2023-11-15 03:46 PM] rsulfuratus: I think for now what I'd propose is:
    1. document what  metadata affects header text (e.g., if leaderOf exists, displays text "Rule of [[XXXX]]")
    2. use it for a while and get a sense of what QoL improvements would be worthwhile
    3. update
[2023-11-15 03:46 PM] Deciusmus: The main use of programmatic customization is that it is faster to hit ATL-W / ALT-R then to type
[2023-11-15 03:46 PM] rsulfuratus: yes
[2023-11-15 03:47 PM] rsulfuratus: but if it is only 5 people it affects the amount of time is not worth it
[2023-11-15 03:47 PM] Deciusmus: (or whatever your hotkeys are)
[2023-11-15 03:47 PM] rsulfuratus: unless you enjoy the programming
[2023-11-15 03:47 PM] Deciusmus: well, if it only takes 90 seconds to fix the Javascript...
[2023-11-15 03:48 PM] rsulfuratus: fair enough
[2023-11-15 03:48 PM] rsulfuratus: I guess my feeling would be that the "standard" should be any display text in the header should a) have a sensible default, and b) check displayDefaults to see if there is an override
[2023-11-15 03:49 PM] rsulfuratus: you could use this also for definite articles, for example, set the default as "the" for places/organizations, "" for people/items with displayDefaults.article overriding
[2023-11-15 03:50 PM] Deciusmus: The changes I'd propose for the next 10 min at least are:
    * Before processing affiliations, remove any that are also in the leaderOf list, using exact text match
    * Change locations so that any location with the word "in" or "of" doesn't auto-link unless it matches a place
[2023-11-15 03:51 PM] rsulfuratus: add "somewhere, unknown" to the auto-linking exclusions
[2023-11-15 03:51 PM] Deciusmus: what I should do is move some of these things to metadata.json
[2023-11-15 03:52 PM] rsulfuratus: yeah, the no-autolinking stuff especially would be best there
[2023-11-15 04:24 PM] rsulfuratus: documenting a few more bugs, can try to fix a few myself tonight:
![[../_discord_assets/image-01623.png]]
[2023-11-15 04:25 PM] rsulfuratus: the TypeError is because of missing displayDefaults I assume but not sure why Owner: undefined
[2023-11-15 04:29 PM] rsulfuratus: here is another one where having a "definite article" displayDefault would be nice, this should ideally say "maker: The Bahrazel" imo
[2023-11-15 04:29 PM] rsulfuratus: 
![[../_discord_assets/image-65ADA.png]]
[2023-11-15 04:31 PM] rsulfuratus: wonder if it is worth having rarity tag for items? either using traditional dnd: common, uncommon, rare, very rare, legendary, artifact or something else
[2023-11-15 04:33 PM] rsulfuratus: the idea behind the unique tag is that there are some items of which there are many copies in the world, e.g. phasing stones or sending stones, and you might want a page for both the "general" version and the specific (likely campaign - related) version. e.g. for phasing stones I have the general page but might also want a "Vindristjarna's phasing stones" page
[2023-11-15 04:34 PM] rsulfuratus: so one could extent partOf logic here as well, e.g., "Vindristjarna's phasing stone" is partOf "phasing stones"
[2023-11-15 04:35 PM] rsulfuratus: then you could link back to the generic version, perhaps even embedding the note e.g. with ![[generic]]
[2023-11-15 04:35 PM] rsulfuratus: in other cases it is not worth tracking the individual versions, e.g. Kenzo's and Wellby's driftglobes on party treasure, or various sending stones, but you might want a link on party treasure to a generic "sending stone" page
[2023-11-15 04:51 PM] Deciusmus: I'm moving some stuff to metadata.json (which is shared, I believe)
[2023-11-15 04:52 PM] Deciusmus: But JavaScript async methods don't seem to always play well with inline dataview
[2023-11-15 04:52 PM] Deciusmus: So I had to implement a customJS initialization function to load the metadata into a static cache so I didn't need to await any time I needed it
[2023-11-15 04:53 PM] Deciusmus: So with my next push you will need to change your customJS configuration to set the "Startup script" to init
[2023-11-15 04:53 PM] Deciusmus: Also, changes to metadata.json will require an Obisidian restart
[2023-11-15 04:54 PM] Deciusmus: but in exchange you get:
        "placeNameFragmentsThatSkipAutoLinking" : `["somewhere", "unknown", "of", "in"]`,
[2023-11-15 04:56 PM] Deciusmus: pushed
[2023-11-15 05:01 PM] Deciusmus: Fixed
[2023-11-15 05:02 PM] Deciusmus: Where would this displayDefault be?
[2023-11-15 05:02 PM] Deciusmus: on the Bahazeral page?
[2023-11-15 05:03 PM] Deciusmus: Oh, ok. But why have a unique tag? Why not just have an oneOf: x
[2023-11-15 05:04 PM] Deciusmus: So for items I would do:
    
    1. Get rid of unique
    2. Add an optional oneOf or typeOf or instanceOf tag to the item header
    3. If the item has a instanceOf we add
    
    (a [[instanceOf]])
[2023-11-15 05:05 PM] Deciusmus: i.e.
    
    # Vindristjarna's phasing stones
    (magical item)
    maker: Hlrogar
    created DR 1522
    (a [[Phasing Stone]])
[2023-11-15 05:05 PM] rsulfuratus: Yeah, I think in this case you’d get the display default for the page you are linking
[2023-11-15 05:06 PM] rsulfuratus: But not everything that is not unique has an instanxeOf page to link to
[2023-11-15 05:07 PM] rsulfuratus: Unique vs not is important for magic item worldbuilding
[2023-11-15 05:09 PM] rsulfuratus: Although maybe there is a better way to tag that
[2023-11-15 05:10 PM] rsulfuratus: On some level every item that has a page is unique, the worldbuilding question is “are there other things that function like this out there”
[2023-11-15 05:10 PM] rsulfuratus: It is largely just for consistency, I want some way to tag the floating disc coin as “lots of these”
[2023-11-15 05:11 PM] rsulfuratus: But the unique true/false is maybe a clumsy way to do this
[2023-11-15 05:12 PM] Deciusmus: Right, I see, you want to distinguish between:
    
    * this is an specific instance of a magic item, there are others like it out there, but I don't feel like writing up a page on the generic item, or it is too boring to bother
    * this is a specific instance of a magic item, there are others like it out there, and the general type of item (sending stones) is something I actually have lore about, so I want to create a page for the generic item
    * this is a specific instance of a magic item, and it is unique. It has a distinct history and there are certainly not others out there
[2023-11-15 05:13 PM] Deciusmus: instanceOf: works well for the 2nd case, but lack of instanceOf doesn't let you distinguish between 1 and 3
[2023-11-15 05:18 PM] rsulfuratus: Exactly
[2023-11-15 05:19 PM] rsulfuratus: Unless you have a “generic” instanceOf that doesn’t auto link and perhaps doesn’t even display but can be used in queries
[2023-11-15 05:21 PM] rsulfuratus: The advantage of unique is that the default generally should be 1
[2023-11-15 05:25 PM] Deciusmus: Update on leaderOf:
    1. Will now skip outputting to Member of: x or "of X" blocks anything you are a leader of
    2. Supports (for edge cases) a displayDefaults.leaders array of the form:
    leaders: `[{ name: Army of the West, title: Commander }]`
    
    The name is the name of the organization/place and the title is the title
[2023-11-15 05:26 PM] Deciusmus: Let's you potentially do, for complex cases:
![[../_discord_assets/image-967FD.png]]
[2023-11-15 05:26 PM] Deciusmus: displayDefaults: { leaders: `[{ name: Army of the West, title: Commander },{ name: Tyrwingha, title: Princess } ]`}
[2023-11-15 05:27 PM] Deciusmus: Same titles are grouped, i.e.
![[../_discord_assets/image-7284D.png]]
[2023-11-15 05:30 PM] Deciusmus: What is the advantage of rarity tag? I think I'd for game purposes have it on a mechanics page
[2023-11-15 05:30 PM] Deciusmus: I don't think you'd usually care to query or see it on the main page
[2023-11-15 05:33 PM] rsulfuratus: re: items. can't think of a use case for rarity so probably better to leave untouched for now
[2023-11-15 05:33 PM] rsulfuratus: was just idlely thinking
[2023-11-15 05:33 PM] Deciusmus: For items, how about:
    
    * unique: true / false
    * typeOf or instanceOf: optional
    
    Output is:
    
    (unique magical item) if unique is true
    (magical item type) if unique is false
[2023-11-15 05:34 PM] Deciusmus: instanceOf: `<anything>` implies unique
[2023-11-15 05:34 PM] Deciusmus: and changes the line to:
    
    (unique magical `<instanceOf>` `[mechanics]`)
[2023-11-15 05:35 PM] rsulfuratus: i think that works
[2023-11-15 05:35 PM] Deciusmus: Where instance of is not auto-linked, but is linked if it exists
[2023-11-15 05:35 PM] rsulfuratus: default parsing should assume unique is False if not present, which i presume is how it works
[2023-11-15 05:37 PM] rsulfuratus: so:
    
    - magical: true 
    (magical item)
    
    -magical: true
    -unique: true
    (unique magical item)
    
    -magical: true
    -typeOf: sending stone
    (unique magical sending stone)
    
    -magical: true
    -unique: false
    -typeOf: sending stone
    magical sending stone
    
    (but probably last case is never wanted?)
[2023-11-15 05:38 PM] rsulfuratus: the generic sending stone page would just be:
    magical: true
[2023-11-15 05:38 PM] Deciusmus: Hrm
[2023-11-15 05:38 PM] rsulfuratus: i guess I'd probably not display unique for typeOf: `<case>`
[2023-11-15 05:38 PM] Deciusmus: It feels sensible but looking at the Treasure stuff you have for our game, it is not clear it is right
[2023-11-15 05:38 PM] rsulfuratus: you really only want three cases as you outlined before
[2023-11-15 05:39 PM] Deciusmus: i.e. 
    # Ring of Jumping
    
    A ring of a Drankorian design, a twisted silver hare motif. Gift from [[Havdar]], in exchange for the [[Spear of the War Leader]].
[2023-11-15 05:39 PM] Deciusmus: what is the right thing to set?  just unique: false I guess?
[2023-11-15 05:39 PM] rsulfuratus: right, that is a specific instance of a generic thing
[2023-11-15 05:39 PM] rsulfuratus: this is "this is an specific instance of a magic item, there are others like it out there, but I don't feel like writing up a page on the generic item, or it is too boring to bother"
[2023-11-15 05:39 PM] rsulfuratus: i actually thing unique is the wrong frame
[2023-11-15 05:40 PM] rsulfuratus: you want:
    
    typeOf: generic
    typeOf: `<something>`
    typeOf: unique
[2023-11-15 05:40 PM] Deciusmus: Yeah
[2023-11-15 05:40 PM] Deciusmus: that is much better
[2023-11-15 05:40 PM] rsulfuratus: if I wanted for some reason to tag all magical shields for a query, you could use typeOf: shield
[2023-11-15 05:41 PM] Deciusmus: ah, I see
[2023-11-15 05:41 PM] rsulfuratus: since it isn't autolinked doesn't matter if a page doesn't exist
[2023-11-15 05:41 PM] rsulfuratus: generic is just a special keyword that doesn't display
[2023-11-15 05:41 PM] rsulfuratus: as is unique
[2023-11-15 05:41 PM] Deciusmus: so Ring of Jumping would be:
    
    either
    
    typeOf: ring or
    typeOf: generic
[2023-11-15 05:42 PM] Deciusmus: Or is generic meant to imply "this is a category"
[2023-11-15 05:42 PM] Deciusmus: i.e. it is a kind of item, rather than a specific item
[2023-11-15 05:42 PM] rsulfuratus: no, generic implies "i don't even care what category this is"
[2023-11-15 05:42 PM] rsulfuratus: you could do this with displayDefaults instead
[2023-11-15 05:42 PM] Deciusmus: ah, ok
[2023-11-15 05:42 PM] rsulfuratus: e.g., showType: False
[2023-11-15 05:42 PM] rsulfuratus: or just leave typeOf blank
[2023-11-15 05:43 PM] Deciusmus: or just not show if it is blank
[2023-11-15 05:43 PM] rsulfuratus: right
[2023-11-15 05:43 PM] rsulfuratus: that is is probably easier
[2023-11-15 05:43 PM] Deciusmus: So, what do you set the typeOf for the generic page on phasing stones
[2023-11-15 05:43 PM] rsulfuratus: wonderous item or nothing
[2023-11-15 05:43 PM] Deciusmus: right, ok
[2023-11-15 05:43 PM] rsulfuratus: basically, from a query perspective, you only care about 1+2 vs 3 for in-game lore
[2023-11-15 05:44 PM] rsulfuratus: you care about 1 vs 2 only for note building
[2023-11-15 05:44 PM] rsulfuratus: but you can easily make a dataview query that lists all items with typeOf != unique and not blank
[2023-11-15 05:44 PM] rsulfuratus: that is your "what notes should I work on query"
[2023-11-15 05:44 PM] rsulfuratus: typeOf == unique is your "these are special items query"
[2023-11-15 05:44 PM] rsulfuratus: so really only "unique" is a special reserved word
[2023-11-15 05:45 PM] Deciusmus: So basically.
    
    If typeOf: unique we generate a header like
    
    (unique magical item)
    
    If typeOf is blank, we generate
    
    (magical item)
    
    If typeOf is anything else, we generate
    
    (magical `<typeOf>`) and link typeOf only if it is a valid link
[2023-11-15 05:45 PM] rsulfuratus: yes
[2023-11-15 05:45 PM] Deciusmus: which is really to say, the default typeOf is "item"
[2023-11-15 05:45 PM] rsulfuratus: exactly
[2023-11-15 05:52 PM] Deciusmus: I think I'm going to make magical: true the default
[2023-11-15 05:53 PM] Deciusmus: almost everything worth having a note on is going to be magical
[2023-11-15 05:53 PM] rsulfuratus: agreed
[2023-11-15 05:53 PM] Deciusmus: so I'll change it to
    
    mundane: true
[2023-11-15 05:53 PM] Deciusmus: required to make it non-magical
[2023-11-15 05:54 PM] rsulfuratus: btw I'm looking at adding the ability to get a definitive article from the displayDefaults of the page you are building a descriptiveName for in your get_Name function
[2023-11-15 05:54 PM] rsulfuratus: doesn't seem that hard. only question is - do you ever get a name for something that has a definitive article where you wouldn't want it to be added to the descriptiveName?
[2023-11-15 05:57 PM] rsulfuratus: logic is:
    if article in displayDefaults, use that
    else if organization or place in tags, add "the"
    else blank
[2023-11-15 05:57 PM] Deciusmus: you don't want to default to add "the" for places
[2023-11-15 05:58 PM] Deciusmus: The Cleenseau, The Sembara are both wrong
[2023-11-15 05:58 PM] Deciusmus: The Tollen
[2023-11-15 05:58 PM] rsulfuratus: right, probably more places with no definitive article
[2023-11-15 05:58 PM] Deciusmus: The Chardon
[2023-11-15 05:58 PM] Deciusmus: the right heuristic is whether it has >`1 word
[2023-11-15 05:58 PM] rsulfuratus: yeah
[2023-11-15 05:58 PM] Deciusmus: not always correct but relatively close
[2023-11-15 05:58 PM] Deciusmus: maybe default to the for >` 1 word, not for 1 word, and wrong guesses can be fixed in display defaults
[2023-11-15 05:59 PM] rsulfuratus: yes I think that is correct
[2023-11-15 06:00 PM] rsulfuratus: the other question is with capitalization, would need to either code whether it should be returned upper/lower, or add a option to titleCase to handle first word
[2023-11-15 06:00 PM] Deciusmus: titleCase already title-cases the first word if it is true
[2023-11-15 06:00 PM] rsulfuratus: ah okay
[2023-11-15 06:00 PM] rsulfuratus: right because we just didn't use titleCase for "Chardon, the Chardonian Empire" location strings
[2023-11-15 06:01 PM] Deciusmus: i.e. 
    
    the Green Sea in title case is The Green Sea
    
    but 
    
    Green Legs of the West in title case is Green Legs of the West
[2023-11-15 06:01 PM] rsulfuratus: so you should always return article lowercase and just use titleCase if you want titleCase
[2023-11-15 06:01 PM] Deciusmus: yes
[2023-11-15 06:02 PM] rsulfuratus: and probably the only function that cares is the get_Name, right? you use that for location parsing?
[2023-11-15 06:03 PM] Deciusmus: get_Name is ultimately called by everything that starts with a raw string, turns it into a file link, and then gets the name
[2023-11-15 06:03 PM] Deciusmus: so should be good
[2023-11-15 06:03 PM] Deciusmus: to only change things there
[2023-11-15 06:03 PM] Deciusmus: it is also called to generate the header
[2023-11-15 06:03 PM] Deciusmus: the H1 header on the page
[2023-11-15 06:03 PM] rsulfuratus: great
[2023-11-15 06:04 PM] Deciusmus: So actually with this, we'd probably want to just say that 
    name: frontmatter and also filename should never have articles
[2023-11-15 06:04 PM] rsulfuratus: yes
[2023-11-15 06:04 PM] Deciusmus: unless it is integral to the name
[2023-11-15 06:04 PM] Deciusmus: you probably need to handle displayDefaults.definitiveArticle: ""
[2023-11-15 06:05 PM] rsulfuratus: yes that is plan
[2023-11-15 06:05 PM] Deciusmus: as distinct from undefined
[2023-11-15 06:06 PM] Deciusmus: 
![[../_discord_assets/image-E102C.png]]
[2023-11-15 06:06 PM] Deciusmus: 
![[../_discord_assets/image-46194.png]]
[2023-11-15 06:10 PM] Deciusmus: Is Eudomes' mirror typeOf: unique or typeOf: mirror
[2023-11-15 06:10 PM] rsulfuratus: hmmm. actually I've never decided
[2023-11-15 06:11 PM] Deciusmus: It feels important to have a typeOf: mirror so we can add a dataview query for all of the mirrors
[2023-11-15 06:11 PM] Deciusmus: When we go on our side quest to collect all the magical mirrors in taelgar
[2023-11-15 06:11 PM] rsulfuratus: it is probably not the only history-revealing mirror ever to exist so typeOf: mirror seems better
[2023-11-15 06:11 PM] Deciusmus: I actually wonder if rarity: unique is better than typeOf: unique
[2023-11-15 06:11 PM] rsulfuratus: yeah was just thinking that
[2023-11-15 06:12 PM] rsulfuratus: you still sometimes want typeOf for unique things e.g. to query all the magic mirrors in Taelgar
[2023-11-15 06:13 PM] rsulfuratus: frontmatter could just be:
    rarity magical/mundane typeOf
[2023-11-15 06:13 PM] rsulfuratus: rarity defaults to nothing
[2023-11-15 06:13 PM] rsulfuratus: typeOf to item
[2023-11-15 06:13 PM] rsulfuratus: magical/mundane to magical
[2023-11-15 06:15 PM] rsulfuratus: do you trim excess whitespace before printing descriptiveName or should I?
[2023-11-15 06:15 PM] rsulfuratus: I guess I should
[2023-11-15 06:15 PM] Deciusmus: you should
[2023-11-15 06:16 PM] Deciusmus: I like rarity, you can do stuff like:
![[../_discord_assets/image-716B3.png]]
[2023-11-15 06:16 PM] rsulfuratus: ha nice
[2023-11-15 06:20 PM] rsulfuratus: what's your code to tell if a page is a person with tags?
[2023-11-15 06:20 PM] Deciusmus: I'm just checking if tags.startsWith(person)
[2023-11-15 06:20 PM] Deciusmus: sorry
[2023-11-15 06:21 PM] Deciusmus: tags.filter(t =>` t.startsWith(person)).length >` 0
[2023-11-15 06:27 PM] rsulfuratus: I hate how javascript handles undefined
[2023-11-15 06:28 PM] rsulfuratus: is there a simple way to tell if a key exists, but not care if it is defined? e.g., distinguish these two key2:
    { key1: , key2: }
    { key1: }
[2023-11-15 06:28 PM] Deciusmus: no
[2023-11-15 06:28 PM] Deciusmus: not that I know of
[2023-11-15 06:29 PM] rsulfuratus: yuck
[2023-11-15 06:29 PM] Deciusmus: why do you care?
[2023-11-15 06:29 PM] Deciusmus: key2: "" vs key2: should be detectable via key2 == undefined vs key2 == ""
[2023-11-15 06:29 PM] rsulfuratus: I wanted to treat { definitiveArticle: } and { definitiveArticle: ""} the same
[2023-11-15 06:29 PM] rsulfuratus: but it doesn't really matter if you can't
[2023-11-15 06:30 PM] Deciusmus: I don't know of any way to do that, but I don't really know javascript
[2023-11-15 06:30 PM] Deciusmus: maybe null vs undefined
[2023-11-15 06:32 PM] Deciusmus: yup
[2023-11-15 06:33 PM] Deciusmus: displayDefaults: {startStatus: born, x: , y: "", startPrefix: b., endPrefix: d., endStatus: died}
[2023-11-15 06:33 PM] Deciusmus: displayDefaults.x == null
[2023-11-15 06:33 PM] Deciusmus: displayDefaults.z == undefined
[2023-11-15 06:34 PM] Deciusmus: nope
[2023-11-15 06:34 PM] Deciusmus: aha
[2023-11-15 06:34 PM] Deciusmus: use the magic ===
[2023-11-15 06:34 PM] Deciusmus: triple equals
[2023-11-15 06:34 PM] Deciusmus: meaning "actually compare" rather than "randomly guess"
[2023-11-15 06:35 PM] rsulfuratus: oh java
[2023-11-15 06:35 PM] Deciusmus: ```null == undefined
    true
    null === undefined
    false
    ```
[2023-11-15 06:36 PM] rsulfuratus: actually the bug was different
[2023-11-15 06:36 PM] rsulfuratus: key in dict does actually return true for both null and undefined
[2023-11-15 06:36 PM] Deciusmus: don't think of javascript objects as dictionaries
[2023-11-15 06:37 PM] Deciusmus: just dot into things
[2023-11-15 06:37 PM] Deciusmus: don't use dictionary syntax
[2023-11-15 06:37 PM] rsulfuratus: ah but my problem was that, frontmatter.displayDefaults.article throws an error if frontmatter.displayDefaults doesn't exist
[2023-11-15 06:38 PM] Deciusmus: x?.
[2023-11-15 06:38 PM] Deciusmus: x?.y
[2023-11-15 06:38 PM] rsulfuratus: ah nice chatgpt didn't find that one for me
[2023-11-15 06:39 PM] Deciusmus: I actually didn't know that per se, it is just a C# feature that I just tried in Javascript and it worked
[2023-11-15 06:42 PM] rsulfuratus: ah that doesn't actually work
[2023-11-15 06:43 PM] rsulfuratus: doesn't return
[2023-11-15 06:43 PM] rsulfuratus: you need to use "key in dict" if you want to return true if and only if the key is present no matter what the value
[2023-11-15 06:43 PM] rsulfuratus: at least nothing else I've tried works
[2023-11-15 06:44 PM] rsulfuratus: except then it returns "Null The Thirsty Scholar" if definitiveArticle:
[2023-11-15 06:44 PM] rsulfuratus: and "The Thirsty Scholar" if definitiveArticle: ""
[2023-11-15 06:49 PM] Deciusmus: this seems to do the right thing:
    
    ```
        get_DisplayArticle(metadata) {
            if (metadata.displayDefaults) {
                let article = metadata.displayDefaults.article
                if (article === null) return "blank"
                if (article === undefined) return "default"
                if (article == "") return "blank"
                return article
            }
    
            return "default"
        }
    ```
[2023-11-15 06:49 PM] Deciusmus: on my test page it seems to return blank vs default as you expect
[2023-11-15 06:50 PM] rsulfuratus: this works:
    ```java
    
            if (input.frontmatter.displayDefaults && "definitiveArticle" in input.frontmatter.displayDefaults) {
                // we have a page override, use as is
                // if null or undefined or blank, don't add anything
                if (input.frontmatter.displayDefaults.definitiveArticle) descriptiveName = input.frontmatter.displayDefaults.definitiveArticle + " " + descriptiveName;
                else descriptiveName = descriptiveName;
            }
    ```
[2023-11-15 06:52 PM] rsulfuratus: but i'm changing it to return article so I can link to just the page not the [[article page|page]]
[2023-11-15 06:52 PM] rsulfuratus: almost done
[2023-11-15 07:52 PM] rsulfuratus: pushed my definitive article code, just need to clean up title case usage now. i'd say title case for:
    H1
    Member Of:
    
    Not title case for:
    maker/owner
    location strings
    "of XXX" for primary org
[2023-11-15 07:52 PM] rsulfuratus: actually, maybe yes title case for Maker/Owern
[2023-11-15 07:52 PM] rsulfuratus: `*`Owner
[2023-11-15 07:52 PM] rsulfuratus: don't really care about that one, just would like non-title case for location
[2023-11-15 07:52 PM] rsulfuratus: I can probably track it down
[2023-11-15 07:53 PM] rsulfuratus: also, do you care about:
    The [[file]] vs [[the file|file]]
[2023-11-15 07:53 PM] rsulfuratus: I have the first right now which I think looks better in location strings but might look worse in Member Of:
[2023-11-15 07:53 PM] Deciusmus: I prefer the [[file]] I think
[2023-11-15 07:54 PM] Deciusmus: But maybe in some cases the t will not look at good
[2023-11-15 07:54 PM] rsulfuratus: can tweak if desired. honestly for Member Of: you might not even want the article, e.g. 
    Member Of: Society of the Open Scroll, Great Library, University of Chardon
    vs
    Member Of: The Society of the Open Scroll, The Great Library, The University of Chardon
[2023-11-15 07:55 PM] rsulfuratus: both look fine to me but with links I think the first will look better
[2023-11-15 07:58 PM] rsulfuratus: added: `get_Name(input, link, titleCase, returnArticle = true)`
[2023-11-15 07:58 PM] rsulfuratus: if you want to generate a name without the article for some reason
[2023-11-15 07:59 PM] rsulfuratus: returnArticle = false just sets the article to "" no matter what is the in the file or the defaults
[2023-11-15 08:03 PM] Deciusmus: "of XXX" definitely looks much better as
    
    of the [[XXX]]
[2023-11-15 08:03 PM] Deciusmus: makes all my Sembaran royalty look much nicer
[2023-11-15 08:05 PM] rsulfuratus: looks like it is working from my testing. i just pushed the returnArticle=false update and changed location have consistent titleCase across all pieces (currently all set to false)
[2023-11-15 08:11 PM] rsulfuratus: there is one bug I don't fully understand - if the partOf page doesn't exist, it doesn't properly set defaults based on number of words
[2023-11-15 08:11 PM] Deciusmus: what's an example
[2023-11-15 08:11 PM] rsulfuratus: 
![[../_discord_assets/image-64DB7.png]]
[2023-11-15 08:12 PM] rsulfuratus: should be a place in the Mawar Place
[2023-11-15 08:12 PM] rsulfuratus: works fine if the page exists:
![[../_discord_assets/image-09A9B.png]]
[2023-11-15 08:13 PM] rsulfuratus: (neither Mawar Confederacy or West Coast Region have displayDefaults.definitiveArticle set)
[2023-11-15 08:14 PM] Deciusmus: well, wait
[2023-11-15 08:14 PM] Deciusmus: it doesn't call get_Name if there is no file
[2023-11-15 08:14 PM] rsulfuratus: yeah I just saw that
[2023-11-15 08:15 PM] Deciusmus: I guess it should
[2023-11-15 08:15 PM] Deciusmus: but really, the code should be restructured
[2023-11-15 08:16 PM] Deciusmus: there should be a 
    
    get_Name(targetFilename, metadata, link, titleCase)
[2023-11-15 08:17 PM] Deciusmus: then the whole mapping for 
    let fileName = blah blah blah goes away
[2023-11-15 08:24 PM] Deciusmus: I'm going to do a bit of refactoring
[2023-11-15 08:31 PM] rsulfuratus: Refactoring makes sense but actually I think not returning articles for non-files is fine, it is such as edge case
[2023-11-15 08:32 PM] Deciusmus: Yeah
[2023-11-15 08:32 PM] Deciusmus: I'm not even touching that code
[2023-11-15 08:32 PM] Deciusmus: for the moment I'm just getting rid of all the old whereabouts stuff
[2023-11-15 08:32 PM] Deciusmus: and date stuff
[2023-11-15 08:32 PM] Deciusmus: so that DateManager manages dates and WhereaboutsManager manages whereabouts
[2023-11-15 08:32 PM] Deciusmus: I'd actually like metadataUtils to just be short functions for helping with dataview queries
[2023-11-15 08:44 PM] rsulfuratus: i am going to work on gazetteer content for a while
[2023-11-15 08:44 PM] Deciusmus: You've pushed all your code, right?
[2023-11-15 08:44 PM] rsulfuratus: yes
[2023-11-15 08:57 PM] rsulfuratus: pushed massive rename to convert "The West Coast Region" ->` "West Coast Region" fy
[2023-11-15 09:06 PM] Deciusmus: Wait did you intend title case for locations?
[2023-11-15 09:06 PM] rsulfuratus: no, I thought I changed that
[2023-11-15 09:07 PM] rsulfuratus: I changed the get location by pieces to use the titleCase variable for everything but this should be false from the original function call
[2023-11-15 09:07 PM] rsulfuratus: but only tested for partOf, not sure how it interacts with dview calls
[2023-11-15 09:07 PM] Deciusmus: yeah the dview calls were passing true
[2023-11-15 09:07 PM] Deciusmus: just fixed will push shortly
[2023-11-15 09:28 PM] Deciusmus: Pushed a big update / refactor
[2023-11-15 09:29 PM] Deciusmus: Let me know if you see bugs
[2023-11-15 09:29 PM] Deciusmus: I also fixed the bug where NPCs get "The" added if they have >` 1 word in name
[2023-11-15 09:40 PM] rsulfuratus: I'm using, roughly:
    status/uptodate - I don't think there is anything more to add until more detail is invented
    status/draft - think this is pretty good but could use review
    status/wip - some initial notes or cleaning
    status/notes - extensive notes (from e.g., Google Drive or similar) that have not been incorporated, although I haven't been checking google drive to confirm stuff has been copied
    status/stub - minimal detail, often just a summary box
[2023-11-15 09:40 PM] rsulfuratus: these are not hard and fast categories
[2023-11-15 09:41 PM] rsulfuratus: for "my" NPCs I assume you wouldn't edit much, for gazetteer stuff feel free to change tags if it is a region you feel comfortable on
[2023-11-15 09:42 PM] rsulfuratus: once the initial round of header updates stabilizes, it will be easy to use recent changes + status tags to review, e.g., recent status/uptodate to get things to review
[2023-11-15 09:43 PM] Deciusmus: That sounds good
[2023-11-15 09:43 PM] Deciusmus: I pushed another round of bug fixes
[2023-11-15 09:45 PM] rsulfuratus: the auto place linking doesn't work by alias, or at least doesn't seem to. i assume this is tricky to do
[2023-11-15 09:45 PM] Deciusmus: That is correct, it needs "real" filenames
[2023-11-15 09:45 PM] Deciusmus: I dont know if there is a good way to find a place by alias
[2023-11-15 09:45 PM] Deciusmus: I haven't looked at the obisidan api very carefully
[2023-11-15 09:46 PM] rsulfuratus: you almost never want to actually link to the alias, and it is find to edit by hand if you do, I think
[2023-11-15 09:46 PM] rsulfuratus: just was curious, e.g., Kunda (stoneborn village) should be a village in the Indalas not a village in the Sentinel Range
[2023-11-15 09:48 PM] rsulfuratus: I put Taelgar as the partOf for a few top level regions, but not sure if I like that...
[2023-11-15 09:49 PM] rsulfuratus: I really like the summary boxes for places, though, because for a lot of stubs all you really want is the summary box information. makes the stubs look neat and organized
[2023-11-15 09:51 PM] rsulfuratus: I am also trying to tag comments, e.g., `%%` notes `%%` vs `%%` detail `%%`
[2023-11-15 10:13 PM] rsulfuratus: last comment for tonight - I'm using status/stub to mean "nothing much has been made up about the subject of this note" and status/needswork to mean "there is detail about the subject of this note somewhere - email, session notes, google drive, our heads -- that isn't captured in obsidian"
[2023-11-15 10:13 PM] rsulfuratus: generally status/stub then don't need work, it is status/needswork, status/notes, and status/wip that need work

