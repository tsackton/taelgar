# Discord DM – 2024-01-15

[2024-01-15 10:53 AM] rsulfuratus: did a bunch more work on website - live now although some things to clean up still: https://tsackton.github.io/taelgarverse/
[2024-01-15 10:55 AM] rsulfuratus: leaflet, backlinks, home page all set up and working. a bunch of new options in the config as well, see readme: https://github.com/tsackton/taelgarverse-site-generator/
[2024-01-15 10:59 AM] rsulfuratus: I still want to implement a ruler, full screen mode, and tiles in leaflet maps but that is going to be a longer-term project
[2024-01-15 11:00 AM] rsulfuratus: i also want to handle images a bit better (there is no reason for them to be quite so big for the website and it makes pages load slowly), but also might not tackle that today
[2024-01-15 11:02 AM] rsulfuratus: there are two bugs:
    1. when there is just a backlinks on the right nav, the spacing between "Backlinks" and the first entry is weird, this is probably some css thing in the toc.html or something
    2. there is a bug with the prep for export that sometimes generates a blank card - marcella is an example. maybe has to do with unknown current location
[2024-01-15 11:10 AM] Deciusmus: the backlinks don't actually work onthe live website either
[2024-01-15 11:10 AM] Deciusmus: because they don't prefix with taelgarverse
[2024-01-15 11:12 AM] rsulfuratus: right i meant to fix that in toc.html but wanted to do it via config option so that we could use the same toc.html
[2024-01-15 11:17 AM] Deciusmus: pushed a fix for the marcella bug
[2024-01-15 11:18 AM] Deciusmus: did you grab my utf8 fix in export_vault.py btw?
[2024-01-15 11:18 AM] rsulfuratus: yes
[2024-01-15 11:20 AM] Deciusmus: So if I wanted to finish up my version, fastest approach would be to fork your taelgarverse repo and then much around, right?
[2024-01-15 11:21 AM] rsulfuratus: yeah
[2024-01-15 11:21 AM] rsulfuratus: although you need to make sure you get the submodules when you fork
[2024-01-15 11:21 AM] rsulfuratus: or you can just make a bare repo and add taelgar and taelgarverse-site-generator as submodules
[2024-01-15 11:22 AM] rsulfuratus: only thing you actually need from my website repo is the requirements.txt and the github actions
[2024-01-15 11:22 AM] rsulfuratus: everything else you can copy from taelgarverse-site-generator and edit as desired
[2024-01-15 11:24 AM] rsulfuratus: the one other thing i am likely to do now is fix up image processing to automatically downsample any image that doesn't match `*map*` or `*region*`
[2024-01-15 11:27 AM] Deciusmus: remind me the syntax for pip to process  a requirements .txt
[2024-01-15 11:27 AM] rsulfuratus: pip install -r requirements.txt
[2024-01-15 11:28 AM] Deciusmus: is the literate nav dest relative to docs?
[2024-01-15 11:28 AM] rsulfuratus: yes
[2024-01-15 11:28 AM] rsulfuratus: all the dest are relative to docs
[2024-01-15 11:28 AM] Deciusmus: so I can have a toc.md in the root
[2024-01-15 11:29 AM] rsulfuratus: yeah that is how i have it set up. it doesn't get listed anywhere. you'll want to make sure that it is ignored in backlinks - look at mkdocs_example.yml
[2024-01-15 11:54 AM] Deciusmus: Your leaflet code doesn't handle windows paths
[2024-01-15 11:55 AM] rsulfuratus: arg yes i keep using replace('\'', "") instead of os.path.separator
[2024-01-15 11:55 AM] rsulfuratus: it is this line
[2024-01-15 11:55 AM] rsulfuratus: image_file_name = str(template_content`["image"]``[0]`).replace("`[", "").replace("]`", "").replace('\'', "")
[2024-01-15 11:55 AM] rsulfuratus: `image_file_name = str(template_content`["image"]``[0]`).replace("`[", "").replace("]`", "").replace('\'', "")`
[2024-01-15 11:56 AM] rsulfuratus: oh wait actually nvm
[2024-01-15 11:56 AM] rsulfuratus: that is not the problem
[2024-01-15 11:56 AM] rsulfuratus: what does the output look like for a leaflet block?
[2024-01-15 11:57 AM] Deciusmus: /assets\map-2024-01-02.png
[2024-01-15 11:57 AM] Deciusmus: but it needs to be
    /assets/map-2024-01-02.png
[2024-01-15 11:57 AM] Deciusmus: I think because the incoming string is the md-link, which is file-style, so on windows has \
[2024-01-15 11:57 AM] Deciusmus: the fix is, I would guess .replace("/", "\")
[2024-01-15 11:58 AM] Deciusmus: will try in a minute
[2024-01-15 11:58 AM] rsulfuratus: wait do all your paths end up with \ when you convert wikilinks?
[2024-01-15 11:58 AM] Deciusmus: yes
[2024-01-15 11:58 AM] rsulfuratus: ah hmm that isn't going to work for the website
[2024-01-15 11:58 AM] rsulfuratus: there must be a way to change this in pathlib
[2024-01-15 11:58 AM] rsulfuratus: hold on
[2024-01-15 11:58 AM] Deciusmus: mkdocs converts to real paths
[2024-01-15 11:59 AM] rsulfuratus: ah okay
[2024-01-15 11:59 AM] Deciusmus: I mean http paths
[2024-01-15 11:59 AM] Deciusmus: mkdocs is smart enough to handle the md link with file paths to ->` html A tag with proper paths no problem
[2024-01-15 11:59 AM] Deciusmus: it
[2024-01-15 11:59 AM] Deciusmus: the leaflet code is the only place (I think) where your python code is doing the conversion itself
[2024-01-15 12:00 PM] rsulfuratus: yeah
[2024-01-15 12:00 PM] rsulfuratus: this should be the fix: `template_content`["image"]` = abs_path_root + str(page_path.as_posix())`
[2024-01-15 12:01 PM] Deciusmus: abs_apath_root is not defined
[2024-01-15 12:01 PM] rsulfuratus: just change that to "/"
[2024-01-15 12:01 PM] Deciusmus: already did
[2024-01-15 12:01 PM] rsulfuratus: or pull the new version
[2024-01-15 12:02 PM] rsulfuratus: but working on image resize now
[2024-01-15 12:02 PM] rsulfuratus: so a bit in flight
[2024-01-15 12:02 PM] Deciusmus: I'm not totally convinced image resize is worthwhile
[2024-01-15 12:03 PM] Deciusmus: what are you resizing images to?
[2024-01-15 12:03 PM] rsulfuratus: longest dimension 1600 pixels
[2024-01-15 12:04 PM] rsulfuratus: the current repo is 850 Mb
[2024-01-15 12:04 PM] rsulfuratus: mostly in images
[2024-01-15 12:05 PM] rsulfuratus: i don't want to run into github repo size limits
[2024-01-15 12:05 PM] Deciusmus: that's fair
[2024-01-15 12:05 PM] Deciusmus: most of these would be better resized in the obisidian side though right?
[2024-01-15 12:05 PM] rsulfuratus: well, i have mixed feelings. i sometimes go back and edit things (like use photoshop to fix eyes in early version midjourney)
[2024-01-15 12:06 PM] rsulfuratus: for that having the full size image is crucial
[2024-01-15 12:06 PM] rsulfuratus: so resizing for the website only is a bit of a compromise
[2024-01-15 12:07 PM] rsulfuratus: if the obsidian repo gets too big due to images, then might reconsider, or keep full size versions outside my vault or something
[2024-01-15 12:09 PM] Deciusmus: I guess I just looked I don't think I have any images >` 1600, except for a few maps
[2024-01-15 12:10 PM] Deciusmus: so I don't really care what you do as long as it excludes -region
[2024-01-15 12:10 PM] Deciusmus: or -map
[2024-01-15 12:10 PM] Deciusmus: it might be worth having something like *fullsize* as well
[2024-01-15 12:10 PM] Deciusmus: * fullsize *
[2024-01-15 12:11 PM] Deciusmus: i.e. exclude resize on
    
    ```
    *map*
    *region*
    *fullsize*
    ```
[2024-01-15 12:11 PM] Deciusmus: so if anyone wants a big picture for some reason, it is easy to do
[2024-01-15 12:11 PM] rsulfuratus: resize saves about 200 Mb. not nothing but not amazing. probably cleaning up unlinked files would also help
[2024-01-15 12:12 PM] rsulfuratus: that should be done in obsidian, though
[2024-01-15 12:13 PM] Deciusmus: pushed a fix for windows path issue in leaflet
[2024-01-15 12:16 PM] Deciusmus: ok, let's see if it works
[2024-01-15 12:18 PM] rsulfuratus: resize images does make things much slower. you can disable by setting resize_images: false in the config json
[2024-01-15 12:19 PM] Deciusmus: are you using classic github pages or the actions version?
[2024-01-15 12:19 PM] rsulfuratus: actions
[2024-01-15 12:19 PM] rsulfuratus: much better
[2024-01-15 12:19 PM] rsulfuratus: copy this: https://github.com/tsackton/taelgarverse/blob/main/.github/workflows/gh-pages.yml
[2024-01-15 12:19 PM] Deciusmus: I did copy that, but it failed because it said pages wasnt enabled
[2024-01-15 12:19 PM] rsulfuratus: into .github/actions in your website repo
[2024-01-15 12:20 PM] rsulfuratus: right you still need to go to the pages setting and enable "Github Actions"
[2024-01-15 12:26 PM] Deciusmus: did you have to do any tweaking to get the page to actually work?
[2024-01-15 12:26 PM] rsulfuratus: no
[2024-01-15 12:27 PM] rsulfuratus: although maybe i broke something with script changes, just pushing an updated version to my repo to test
[2024-01-15 12:28 PM] Deciusmus: how did you get the /assets in the leaflet to have taelgarverse prepended?
[2024-01-15 12:28 PM] Deciusmus: and my navigation links are all to md files instead of real
[2024-01-15 12:30 PM] rsulfuratus: you need the latest version of the script to make the leaflet work, then set abs_path_root to /website/ in json
[2024-01-15 12:30 PM] rsulfuratus: also set base_path: /website/ in mkdocs.yml
[2024-01-15 12:31 PM] rsulfuratus: plugins should be:
    ```
    plugins:
      - search  
      - glightbox
      - callouts
      - mkdocs-backlinks:
          ignored_pages: `[ 'Toc', 'Gazetteer', 'Home' ]`
      - literate-nav:
          nav_file: toc.md
      - section-index
    ```
[2024-01-15 12:31 PM] rsulfuratus: missing section-index is a possible explanation for the nav link issues
[2024-01-15 12:37 PM] Deciusmus: it is working locally; might have been old script or something
[2024-01-15 12:38 PM] Deciusmus: will try again via gh-actions in a minute
[2024-01-15 12:38 PM] Deciusmus: is there any reason for prep and export to be different, now that it is all just a script?
[2024-01-15 12:38 PM] Deciusmus: I know I suggested might want it for static-dataviews, but I am not sure that is really worthwhile
[2024-01-15 12:39 PM] rsulfuratus: the export script has an ignore file now
[2024-01-15 12:39 PM] Deciusmus: ah, cool
[2024-01-15 12:39 PM] rsulfuratus: files matching are not added to the master list, so don't get copied and can't be linked to
[2024-01-15 12:40 PM] rsulfuratus: you can still use the export script if you care about deleting files prior to staticification, but you don't need to
[2024-01-15 12:41 PM] rsulfuratus: also note the export script now deletes stubs by default, where stub = file with only newlines, headers or (stub) or stub
[2024-01-15 12:41 PM] rsulfuratus: can be changed in the config if you want
[2024-01-15 12:41 PM] Deciusmus: headers meaning # right? so anything with a generated header will appear
[2024-01-15 12:41 PM] Deciusmus: ?
[2024-01-15 12:41 PM] rsulfuratus: note that this counts codeblocks, so e.g. the 1500s.md page still gets passed through (though the codeblock is removed)
[2024-01-15 12:41 PM] rsulfuratus: yeah headers is just markdown #
[2024-01-15 12:42 PM] rsulfuratus: so e.g. 
    ```
    ---
    yaml
    ---
    
    # The Great War
    
    (stub)
    
    ```
[2024-01-15 12:42 PM] rsulfuratus: that would get removed
[2024-01-15 12:42 PM] Deciusmus: right
[2024-01-15 12:42 PM] rsulfuratus: this is calculated *after* comments are stripped
[2024-01-15 12:43 PM] rsulfuratus: so if you remember to enclose your codeblocks in `%%`^Campaign:None`%%` lines then notes with just codeblocks will also get stripped
[2024-01-15 12:44 PM] Deciusmus: Right
[2024-01-15 12:44 PM] rsulfuratus: so e.g. you can have a page where the entire contents is contained within a date block and it will be automatically stripped from the website until that date passes in game
[2024-01-15 12:44 PM] rsulfuratus: (as long as it doesn't have a header)
[2024-01-15 12:45 PM] rsulfuratus: but for e.g. letters, texts, notes
[2024-01-15 12:45 PM] Deciusmus: right
[2024-01-15 12:45 PM] Deciusmus: huh, I could in theory update the header generation code to include a 
    `%%`^Date:`<year born>``%%`
    
    block
[2024-01-15 12:45 PM] Deciusmus: wrapping the entire page
[2024-01-15 12:46 PM] rsulfuratus: yeah that would be a nice way to automatically strip pages that don't exist yet from website
[2024-01-15 12:46 PM] Deciusmus: it would even potentially be sensible to have something in frontmatter like activeYear: xxx
    which represents a year that a page starts being "relevant"
[2024-01-15 12:47 PM] Deciusmus: which can default to born, but also makes it easy to strip all the 2 and 3 year old dunmari
[2024-01-15 12:47 PM] rsulfuratus: yeah lots of possibilities
[2024-01-15 12:49 PM] Deciusmus: your glob-based nav generates backslashes on windows, which I think breaks navigation on github pages
[2024-01-15 12:50 PM] rsulfuratus: need to drop in a few .as_posix() to the paths
[2024-01-15 12:50 PM] Deciusmus: I think on windows either direction works
[2024-01-15 12:50 PM] Deciusmus: but on linux, it has to be /
[2024-01-15 12:51 PM] rsulfuratus: right as_posix forces /
[2024-01-15 12:51 PM] rsulfuratus: which is fine on windows
[2024-01-15 12:51 PM] Deciusmus: at least, it seems like that is how literate nav works
[2024-01-15 12:51 PM] Deciusmus: so if you generate the literate nav on windows and then use it on linux it seems to die
[2024-01-15 12:51 PM] rsulfuratus: markdown_list.append(f"{indent}- `[{title}]`({index_file})") needs to be index_file.as_posix()
[2024-01-15 12:51 PM] rsulfuratus: and
    ```markdown_list.append(f"{indent}- `[{title}]`({file_display_path})")```
[2024-01-15 12:52 PM] rsulfuratus: needs to be
    ```
    markdown_list.append(f"{indent}- `[{title}]`({file_display_path.as_posix()})")
    ```
[2024-01-15 12:52 PM] rsulfuratus: i think that should fix it
[2024-01-15 12:52 PM] rsulfuratus: non-globs are passed unchanged so you also need to make sure your paths all use /
[2024-01-15 12:52 PM] rsulfuratus: i'll push a fix in a bit
[2024-01-15 12:54 PM] Deciusmus: where is the ignore path set?
[2024-01-15 12:54 PM] Deciusmus: I see
[2024-01-15 12:54 PM] Deciusmus: nevermind
[2024-01-15 01:09 PM] Deciusmus: Does the comment stripping work with nested blocks?
[2024-01-15 01:10 PM] rsulfuratus: it should work the same way obsidian does
[2024-01-15 01:10 PM] rsulfuratus: that is each comment is the smallest `%%`(text)`%%` block
[2024-01-15 01:10 PM] Deciusmus: i.e. does
    
    `%%`^Date:something`%%`
    
    Some text
    Some more text
    
    `%%`^Campaign:Something`%%`
    Something
    `%%`^End`%%`
    
    More text
    `%%`^End`%%`
    
    work?
[2024-01-15 01:10 PM] rsulfuratus: ah you mean the campaign stuff
[2024-01-15 01:10 PM] Deciusmus: yeah, I was going to add the active-year stuff
[2024-01-15 01:11 PM] Deciusmus: but wasn't sure if it would work for pages with emedded other things
[2024-01-15 01:11 PM] rsulfuratus: it will work for embedded campaign
[2024-01-15 01:12 PM] rsulfuratus: because campaign stripping happens first
[2024-01-15 01:12 PM] rsulfuratus: and it takes the smallest text between `%%`Campaign`%%` and `%%`End`%%`
[2024-01-15 01:12 PM] rsulfuratus: but if you have nested `%%`date`%%` blocks it won't work
[2024-01-15 01:13 PM] rsulfuratus: although actually if the goal is just to remove pages that don't exist, no reason not to just do that directly with metadata in python
[2024-01-15 01:13 PM] rsulfuratus: much easier than handling nested comments
[2024-01-15 01:14 PM] Deciusmus: I was just going to only add the `%%`Date`%%` stuff if the file doesn't already have a date
[2024-01-15 01:14 PM] Deciusmus: i.e. if there are no date matches in the file
[2024-01-15 01:14 PM] rsulfuratus: that's fine, that should work
[2024-01-15 01:15 PM] Deciusmus: it will miss a few cases potentially, but Im not sure it matters
[2024-01-15 01:15 PM] rsulfuratus: but it is really easy to implement this in python, it is like 3 lines of code
[2024-01-15 01:15 PM] Deciusmus: as long as we never implement fancier date syntax, sure
[2024-01-15 01:16 PM] Deciusmus: but it breaks if say 
    born: CY(5422) starts working
[2024-01-15 01:16 PM] Deciusmus: or something
[2024-01-15 01:18 PM] Deciusmus: honestly, it would be nicer to just have a 
    
    excludePublish: `[campaign, campaign, all]`
[2024-01-15 01:19 PM] Deciusmus: which I assume is also easy, but ends up being more useful as I can do targeted excludes of things I dont want published
[2024-01-15 01:20 PM] rsulfuratus: yeah
[2024-01-15 01:20 PM] rsulfuratus: i am trying to fix a few edge case parsing bugs now
[2024-01-15 01:20 PM] rsulfuratus: and delete unlinked images
[2024-01-15 01:21 PM] rsulfuratus: but can clean up the publish selection in a bit
[2024-01-15 01:21 PM] rsulfuratus: are you still using the rooted logic?
[2024-01-15 01:21 PM] Deciusmus: no
[2024-01-15 01:21 PM] Deciusmus: i was going to delete from obsidian side as well
[2024-01-15 01:43 PM] rsulfuratus: pushed new version of script, fixes a few small bugs and adds option to remove unlinked images from site
[2024-01-15 01:44 PM] rsulfuratus: not well documented yet, look at the code where it reads in the website.json file
[2024-01-15 01:47 PM] rsulfuratus: still planning on:
    1. clean up file selection by removing the rooted option, and instead parse an excludePublish list that will exclude a note from the website if either "campaign" or "all" is in the excludePublish list
    2. double check display to make sure there are no other edge case bugs (let me know if you find any)
    3. maybe change some of the colors
[2024-01-15 01:47 PM] rsulfuratus: then might fix up a bit of content then sending out the new link
[2024-01-15 01:48 PM] Deciusmus: I have a change to the prep script that adds date exclude for any page that it is safe to do so and that either has a born/created/activeYear
[2024-01-15 01:48 PM] Deciusmus: Any reason to make it configurable?
[2024-01-15 01:49 PM] Deciusmus: I am also going to delete the rooted calculations
[2024-01-15 01:49 PM] rsulfuratus: i am a little nervous about nested comments, it will be easy to inadvertently break since it relies heavily on the order of operations in the python code
[2024-01-15 01:50 PM] Deciusmus: Maybe it’s cleaner to set exclude publish automatically
[2024-01-15 01:50 PM] rsulfuratus: it is also easy to do this directly by parsing the frontmatter
[2024-01-15 01:51 PM] rsulfuratus: if we ever add date conversion to javascript, then the export code can just write activeYear in DR
[2024-01-15 01:51 PM] Deciusmus: That’s true
[2024-01-15 01:52 PM] Deciusmus: It would actually be trivial for the obsidian to just set active year on all pages that don’t have it
[2024-01-15 01:52 PM] rsulfuratus: neither excludePublish or page exist parsing are implemented yet but i am going to do that this afternoon, about to head to do some errands so it won't be a for a bit
[2024-01-15 01:52 PM] rsulfuratus: it might be cleaner to have the export code set activeYear automatically if it doesn't exist, then python only has to look at activeYear and compare to export_date
[2024-01-15 01:53 PM] rsulfuratus: just need to be a bit careful about the default, i guess should be 1-1-1 if there is no information about a real active year in the frontmatter
[2024-01-15 01:54 PM] Deciusmus: Can’t you just ignore it?
[2024-01-15 01:55 PM] rsulfuratus: ah sure, yes, you can just set activeYear if it exists
[2024-01-15 01:55 PM] Deciusmus: Ie if null, don’t do anything?
[2024-01-15 01:55 PM] rsulfuratus: yeah
[2024-01-15 02:06 PM] Deciusmus: ok, I am pushing a change that will cause the website export in Obsidian to set activeYear if it is not set
[2024-01-15 02:07 PM] Deciusmus: It will currently always be a full year, equal to the year the person was born. If the element is set, it will not be overwritten
[2024-01-15 02:44 PM] rsulfuratus: did you push?
[2024-01-15 02:45 PM] Deciusmus: oops, forget to push
[2024-01-15 02:45 PM] Deciusmus: just did
[2024-01-15 02:45 PM] Deciusmus: delete unlinked images is buggy for me btw
[2024-01-15 02:45 PM] Deciusmus: it deleted 100% of my images
[2024-01-15 02:45 PM] Deciusmus: except 2 heic images and some maps
[2024-01-15 02:45 PM] rsulfuratus: might also be a windows path issue
[2024-01-15 02:45 PM] rsulfuratus: let me look
[2024-01-15 02:46 PM] rsulfuratus: not used to developing cross platform
[2024-01-15 02:47 PM] rsulfuratus: yup windows issue
[2024-01-15 02:50 PM] rsulfuratus: think i fixed it
[2024-01-15 03:05 PM] Deciusmus: I will try in a bit
[2024-01-15 03:07 PM] Deciusmus: I kinda want to get rid of fantasy calendar in the obsidian API. I keep having various issues with it, and it is annoying because it isn't apparently published anymore so for example if I add a plugin to the taelgarverse vault version it causes issues
[2024-01-15 03:08 PM] Deciusmus: The only thing it is used for is 
    (a) tracking current date
    (b) formatting month names for YYYY-MM dates
    (c) formating the entire date for YYYY-MM-DD dates
[2024-01-15 03:09 PM] Deciusmus: I might rewrite to just use an in-house month name lookup and then format everything like
    
    Month Day(suffix), Year
[2024-01-15 03:09 PM] Deciusmus: where suffix is 1st/2nd/3rd/4th/etc
[2024-01-15 03:18 PM] rsulfuratus: tracking the moon is the only thing I use fantasy calendar for
[2024-01-15 03:18 PM] rsulfuratus: plus current date
[2024-01-15 03:23 PM] rsulfuratus: did you add the .md-typeset to extra.css or is that from my lab website?
[2024-01-15 03:23 PM] rsulfuratus: trying to clean up the css and get a better color scheme
[2024-01-15 03:23 PM] Deciusmus: I added
[2024-01-15 03:24 PM] Deciusmus: that reduces the header margin, right?
[2024-01-15 03:24 PM] rsulfuratus: .md-typeset .ext-one-column {
      background: lightgray;
      grid-template-columns: 1fr;
    }
    
    .md-typeset .ext-narrow-margin {
      margin-top: 0.25rem;
      margin-bottom: 0.25rem;
    }
    
    .md-typeset h1 {
      margin-bottom: 0.15rem;
    }
[2024-01-15 03:24 PM] rsulfuratus: yeah for h1
[2024-01-15 03:24 PM] Deciusmus: oh, the light grey
[2024-01-15 03:24 PM] Deciusmus: that I added to offset the bio box
[2024-01-15 03:24 PM] rsulfuratus: ah okay, that defines the bio box color
[2024-01-15 03:32 PM] Deciusmus: pushed a change, if there is a website.json the export dialog will default to the date there
[2024-01-15 03:38 PM] rsulfuratus: export seems to take much, much longer than before
[2024-01-15 03:39 PM] Deciusmus: the rewrite frontmatter is, I think, slow
[2024-01-15 03:39 PM] Deciusmus: I could optimize by skipping for pages that don't have activeyear/born/created
[2024-01-15 03:40 PM] rsulfuratus: honestly if it is just checking born/created in addition to activeyear it doesn't seem worth the extra time to run in javascript
[2024-01-15 03:53 PM] Deciusmus: the main reason to run in javascript is because I want to preserve future design space and don't want to have to revisit the python code
[2024-01-15 03:53 PM] Deciusmus: I pushed a major perf fix
[2024-01-15 03:57 PM] rsulfuratus: pushed some bugfixes. i am pretty sure the windows image thing was a different problem than i thought, but i tried a different approach to solve
[2024-01-15 03:57 PM] Deciusmus: I still haven't tried that yet
[2024-01-15 03:58 PM] Deciusmus: I am, for reasons that are not 100% clear,working on a run.py that will automatically do the obsidian export
[2024-01-15 03:58 PM] Deciusmus: it almost works
[2024-01-15 03:59 PM] rsulfuratus: conceivably that could allow you to just update the date on the website.json, push, and have the website autobuild entirely via github actions
[2024-01-15 03:59 PM] Deciusmus: still needs obsidian
[2024-01-15 03:59 PM] Deciusmus: it uses the obsidian URL syntax to open obsidian, run prep-for-export, and close obsidian
[2024-01-15 04:00 PM] rsulfuratus: ah okay that would be annoying to do in github vm
[2024-01-15 04:00 PM] rsulfuratus: or really probably impossible
[2024-01-15 04:00 PM] Deciusmus: in theory you could do it, if you had a custom runner image or something that had obsidian installed
[2024-01-15 04:00 PM] Deciusmus: but not really worthwhile
[2024-01-15 05:15 PM] rsulfuratus: 
![[../_discord_assets/image-C591E.png]]
[2024-01-15 05:15 PM] rsulfuratus: 
![[../_discord_assets/image-023D2.png]]
[2024-01-15 05:15 PM] rsulfuratus: going to fiddle a bit with a few more color things, then clean up a bit of content then text everyone
[2024-01-15 05:15 PM] rsulfuratus: pretty happy with this
[2024-01-15 06:07 PM] Deciusmus: Looks nice. I personally don't love the default blue color that is everywhere but it definitely looks good
[2024-01-15 06:07 PM] Deciusmus: I pushed an autobuild process, if you are interested
[2024-01-15 06:07 PM] rsulfuratus: i am trying to change that but it is a bit tricky to figure out exactly what to change in the css
[2024-01-15 06:08 PM] Deciusmus: https://squidfunk.github.io/mkdocs-material/setup/changing-the-colors/
[2024-01-15 06:08 PM] Deciusmus: ?
[2024-01-15 06:08 PM] Deciusmus: or https://squidfunk.github.io/mkdocs-material/setup/changing-the-colors/#custom-colors
[2024-01-15 06:09 PM] Deciusmus: FYI. I have an autobuild process working
[2024-01-15 06:09 PM] Deciusmus: Look at build.bat and run.py in my repo
[2024-01-15 06:10 PM] Deciusmus: It basically does the following:
    * sync branch
    *  copy a templater config file to your obsidian directory to make the prep-for-export run at startup
    * launch obsidian via the URI scheme
    * wait for obsidian to exit
    * export py & commit
[2024-01-15 06:11 PM] Deciusmus: If you define a templater "system command" that kills obsidian (you can see my windows example) obsidian will auto-exit at the end of the prep-for-export run
[2024-01-15 06:11 PM] Deciusmus: The only user interaction is hitting enter inthe date box, which I left, because the code needs to wait for the obsidian index to finish building, if it needs to reindex
[2024-01-15 06:15 PM] rsulfuratus: 
![[../_discord_assets/image-7E5EF.png]]
[2024-01-15 06:15 PM] rsulfuratus: 
![[../_discord_assets/image-C6665.png]]
[2024-01-15 06:16 PM] Deciusmus: I like that bette
[2024-01-15 06:23 PM] rsulfuratus: home page fiddling:
![[../_discord_assets/image-C3A56.png]]
[2024-01-15 06:24 PM] rsulfuratus: not sure i love it
[2024-01-15 06:24 PM] Deciusmus: I don't
[2024-01-15 06:24 PM] Deciusmus: too much green on the map
[2024-01-15 06:24 PM] Deciusmus: if the map was totally normal by taelgarverse, maybe?
[2024-01-15 06:24 PM] Deciusmus: but the gradient is too strong
[2024-01-15 06:24 PM] rsulfuratus: yeah i haven't figured out how to control the gradient
[2024-01-15 06:29 PM] rsulfuratus: have to change text colors and also set up a dark mode version, but:
![[../_discord_assets/image-D6C7B.png]]
[2024-01-15 06:29 PM] rsulfuratus: scrolling effect:
![[../_discord_assets/image-45C5D.png]]
[2024-01-15 08:50 PM] Deciusmus: looks nice
[2024-01-15 08:50 PM] Deciusmus: It would be useful to split all your custom themeing from the site generator
[2024-01-15 08:50 PM] Deciusmus: The extras.css on the site gen side should only be function stuff that is important for the site to look nice (i.e. the layout stuff)
[2024-01-15 08:51 PM] Deciusmus: all the colors and things should really be in taelgarverse, because I don't necessary want to use your colors
[2024-01-15 08:59 PM] Deciusmus: The image stuff still isn't working on windows, but I don't really care enough to try to figure it out right now
[2024-01-15 10:14 PM] Deciusmus: I set excludePublish: `["all"]` on a couple of obviously incomplete pages
[2024-01-15 10:54 PM] Deciusmus: I’m going to bed…
    
    I pushed a change to allow excluding nav on pages via tags.
[2024-01-15 10:55 PM] Deciusmus: If you get a chance to clean up the css let me know, at the moment my homepage looks kinda mess
[2024-01-15 11:44 PM] rsulfuratus: almost all the CSS is just for the home page, but i separated it out
[2024-01-15 11:48 PM] rsulfuratus: i also added in the home-informatics html and css, which is based on my lab site. doesn't support dark mode at the moment
[2024-01-15 11:48 PM] rsulfuratus: you just kind of have to fiddle a bunch for the homepage tbh
[2024-01-15 11:49 PM] rsulfuratus: i'm still not totally happen with mine, i'm not sure the gradient really works so i might go back to the darker overlay and white text
[2024-01-15 11:50 PM] rsulfuratus: you can also just change the css extras source to something local to you

