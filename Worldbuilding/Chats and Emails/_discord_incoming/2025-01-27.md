# Discord DM – 2025-01-27

[2025-01-27 09:33 AM] Deciusmus: I have meetings from 9-2pm today straight, with a handful of 15 or 30 minute breaks; I'm cleaing up some gazetter stuff.
    
    My plan is to set the main pages to dm_owner: none / dm_notes: none / status/needswork/wip
    
    Then whoever finishes the page can set the dm owner/dm notes to themselves if needed, and then set status/check/otherperson to review/add any dm status, etc
[2025-01-27 09:38 AM] rsulfuratus: in case useful I put a template for region pages and the text of the old region background page in _MoC yesterday
[2025-01-27 09:38 AM] Deciusmus: yeah I saw that
[2025-01-27 09:38 AM] Deciusmus: very useful
[2025-01-27 09:38 AM] Deciusmus: I am added a todo to it and copied it over
[2025-01-27 02:08 PM] Deciusmus: So I spent a few minutes poking at whereabouts. The origin/home stuff doesn’t actually work that well
[2025-01-27 02:08 PM] Deciusmus: But I think the away / current idea would work for political units
[2025-01-27 02:10 PM] Deciusmus: Basically the idea is — imagine a small island off the coast of Irrla. Call it Ril. 
    
    In general we probably want to say three things about it:
    (a) this island is in the Green Sea
    (B) this island is part of the Republic of Sorvah (sp)
    (C) this island is in the “Eastern Green Sea region”
[2025-01-27 02:11 PM] Deciusmus: (A) is the main “geographic relationship”
    (B) is a political relationship
    (C) is a meta/info organization relationship
[2025-01-27 02:13 PM] Deciusmus: You care about these three distinctions because you want to be able:
    - have a page with “islands in the Green Sea” (and show the text “An island in the Green Sea”) in the header block - this is A
    - have a page “places in the Republic of Sorvah” (this is B)
    - have a page “places in the eastern green sea “(c)
[2025-01-27 02:14 PM] Deciusmus: I actually think most of the time you don’t care about c in the page header block
[2025-01-27 02:14 PM] Deciusmus: But I think having a “pages on region” is a useful thing to be able to do
[2025-01-27 02:15 PM] Deciusmus: That said, in the short term I’m not sure that c is actually valuable enough to try to make work
[2025-01-27 02:17 PM] Deciusmus: So my proposal for now would be to 
    - allow for “polity” as an alias for away
    - allow for “geography” as an alias for home
    - don’t try to map pages to regions where it does not make sense. Everything should either map to a region or one of our “top level” pages
[2025-01-27 02:17 PM] rsulfuratus: i might be missing something. is the distinction between "A" and "C" just because "Green Sea" is too big to fit in a specific region?
[2025-01-27 02:17 PM] Deciusmus: Exactly
[2025-01-27 02:17 PM] rsulfuratus: hmm
[2025-01-27 02:18 PM] Deciusmus: So ie Irrla goes Irrla ->` Green Sea
[2025-01-27 02:18 PM] Deciusmus: No concept of “west/north/east”
[2025-01-27 02:18 PM] Deciusmus: Or a dwarven kingdom is “realm in the Sentinels” (which is also too big for a region)
[2025-01-27 02:21 PM] rsulfuratus: i'm not sure that this needs any revision particulary to the standard home?
[2025-01-27 02:21 PM] Deciusmus: Right
[2025-01-27 02:21 PM] Deciusmus: Well, what I’m saying is that for now, Irrla and similar places won’t be in any region
[2025-01-27 02:22 PM] Deciusmus: Because we don’t have a good way to distinguish between “Irrla an island in the green sea” vs “Irrla a place in the eastern green sea region”
[2025-01-27 02:31 PM] rsulfuratus: have meetings - have a few more thoughts but not time to type them up now. mostly, i'm not sure this does anything for the original "partOf" discussion necessarily
[2025-01-27 02:31 PM] rsulfuratus: e.g. a river in the Elderwood is probably best tagged as "elderwood" for whereabouts
[2025-01-27 02:31 PM] rsulfuratus: but we still want to track the watershed it is part of
[2025-01-27 02:45 PM] Deciusmus: So here are two pages:
![[../_discord_assets/image-6CA47.png]]
![[../_discord_assets/image-25DF3.png]]
[2025-01-27 02:46 PM] Deciusmus: Kayan has whereabouts = Elderwood, which then tracks back to "Central Highlands" region. 
    
    Page looks fine - the problem is that we don't know which watershed it is part of (i.e. nothing in the metadata says "tributary of the Chasa"
[2025-01-27 02:47 PM] Deciusmus: Darakan also looks fine. Whereabouts = Khatridun which is then part of sentinels.
    Page looks fine - the problem is that we don't know which region it is part of
[2025-01-27 02:47 PM] Deciusmus: Another way of thinking about it is that we have a set of top level pages (i.e. Gazeteer pages that are "in Taelgar").
    
    For any given page, it might want to be part of 2 of those top level pages.
[2025-01-27 02:48 PM] Deciusmus: But there is no clear why to know which top level page is the "main one" and which is the "secondary" one
[2025-01-27 02:52 PM] Deciusmus: So I think you had originally had the idea of using part of, but where do you set it? it makes sens to say that he Kayan is "part of" the Chasa Nadhi Watershed, but does it make sense to say that Darakan is "part of" the Central Highlands region? I don't think so
[2025-01-27 02:54 PM] rsulfuratus: I think partOf only really works for subunits - rivers are part of a watershed, mountains are part of a mountain chain, bays/gulfs/etc are part of a sea or ocean
[2025-01-27 02:54 PM] rsulfuratus: it doesn't solve the issue of two top level links
[2025-01-27 02:55 PM] rsulfuratus: except in so far as the partOf is the second page you want to link to
[2025-01-27 02:55 PM] rsulfuratus: so for e.g. rivers it works generally fine
[2025-01-27 02:55 PM] rsulfuratus: but for Darakan it doesn't work at all
[2025-01-27 02:55 PM] Deciusmus: yes, having all rivers have  "part of" linking to a watershed page would be fine
[2025-01-27 02:56 PM] Deciusmus: but outside of watersheds I'm not really sure it works well
[2025-01-27 02:57 PM] rsulfuratus: i think the generalization challenge is it doesn't work well for subunits of subunits
[2025-01-27 02:57 PM] rsulfuratus: or for "cross typeOf" relationships
[2025-01-27 02:57 PM] Deciusmus: i.e. [[Urlich Pass]] is "part of" the Sentinels, but why would you set it as part of not just whereabouts: Sentinels.
    
    the "High Peak of the Tyrwinghan Range" is part of the mostreve hills, but again, why would you not just set it as whereabouts?
[2025-01-27 02:58 PM] Deciusmus: watershed works because are amused/think it is worthwhile to specially tag it
[2025-01-27 02:58 PM] Deciusmus: i.e. at some level we think it makes sense to go to a page like:
![[../_discord_assets/image-44478.png]]
[2025-01-27 02:58 PM] Deciusmus: and go back and set "partOf: Enst Watershed"
[2025-01-27 02:59 PM] Deciusmus: but I wouldn't want to change the whereabouts: there - the river is entirely in the Barony of Aveil
[2025-01-27 03:01 PM] Deciusmus: I think the generalization challenge with "partOf" is that it only works well if it isn't used as a special case.
    
    i.e. it works to say:
    all typeOf = river should have a partOf = watershed
[2025-01-27 03:03 PM] rsulfuratus: So, maybe a different way to look at it:
    
    the basic challenge is that any given location can be located in more than one context. A town can be part of a geographic region and a realm/subrealm, for example
[2025-01-27 03:04 PM] rsulfuratus: Some things - rivers primarily - might have three contexts: a geographic feature, a political feature, a watershed
[2025-01-27 03:05 PM] rsulfuratus: But also eg things that are located in region-spanning things could have three places. A political location, a subunit leading to the region, and the “bigger thing”
[2025-01-27 03:05 PM] rsulfuratus: The question is how much work is it worth to make this work smoothly
[2025-01-27 03:05 PM] rsulfuratus: Using away = political unit simplifies a lot of cases if it works
[2025-01-27 03:06 PM] rsulfuratus: Eg many rivers have two contexts: a watershed and a realm
[2025-01-27 03:07 PM] rsulfuratus: But that comes back to “home = geography, away = polity” and you still need to pick a single geographic chain to follow as you initially suggested
[2025-01-27 03:07 PM] rsulfuratus: Maybe that is good enough
[2025-01-27 03:09 PM] rsulfuratus: It might even be easier to extend whereabouts with additional keywords (region, watershed) as necessary than try to use only home/origjn/away for everything
[2025-01-27 03:20 PM] Deciusmus: I actually think the challenge is that for most pages, the context is actually the same
[2025-01-27 03:21 PM] Deciusmus: i.e. yes a town could be part of a geographic region and a realm; but for 95% of towns those are the same
[2025-01-27 03:21 PM] Deciusmus: so I don't want to add work, i.e. say that all pages need a "part of" and a "whereabouts" or whatever
[2025-01-27 03:22 PM] Deciusmus: the appeal of using whereabouts was that the code already defaults them to each other
    
    whereabouts: X 
    
    is already shorthand for
    
    home: X and origin: X and current: X
[2025-01-27 03:22 PM] Deciusmus: but i.e. if you wanted to find all the rivers without a watershed, how would you do it?
[2025-01-27 03:25 PM] Deciusmus: using away for political unit has two advantages:
    * the whereabouts code already have the concept of "home" vs "current" location and this is (mostly) already working even when following chains
[2025-01-27 03:25 PM] Deciusmus: * political units are plauisbly dated
[2025-01-27 03:26 PM] Deciusmus: i.e. if Chardon had conqueored Darba, some value in having Darba = part of Dunmar in 1720 but part of Chardon in 1750
[2025-01-27 03:27 PM] Deciusmus: also I think in general political entities are all in a single region with the exception of Chardon + Tollen, and also mostly political entities chain nicely, i.e. you don't have to change that many pages
[2025-01-27 03:27 PM] Deciusmus: but whereabouts doesn't overload (currently) to a third concept
[2025-01-27 03:27 PM] Deciusmus: because "origin" is really just shorthand for "home at your birth date"
[2025-01-27 03:29 PM] Deciusmus: So I guess to simplify..... my position is something like:
    
    * For any given page, there is almost always an obvious whereabouts to put it in
    * For most pages, this obvious whereabout is the only whereabout
    * For some pages, the obvious whereabout causes the page to chain up to something like "skips" a key "unit" for this page. Most obvious examples are pages that are in Green Sea or Sentinels (which skip region), or rivers (which skip the watershed, if it is between the region and Taelgar); but some pages (i.e. Westcliff) are best stated as "in the Mostreve Hills" but that might be skipping the realm (i.e. Addermarch or Tyrwingha)
[2025-01-27 03:38 PM] Deciusmus: I actually think the 3rd bullet is entirely a boundary drawing issue...
    
    * The "Chasa-Nadhi" watershed crosses regions, so anything where the "primary" location chain is in a region won't also be in the watershed page
    * The "Mostreve Hills" crosses realms, so anything where the primary location chain goes up to Mostreve Hills skips the realm
    * The Sentinels crosses regions, so anything where the "primary" location chain chains up to sentinels won't be in any region
[2025-01-27 03:39 PM] Deciusmus: I don't think it is a context or typeOf issue at all, in other words, it is just a problem that occurs when the nested of locations in other locations hits a location that crosses a boundary
[2025-01-27 03:40 PM] Deciusmus: Imagine a "Mos Numema temple complex" in Embry, which straddles the "Old City" and "New City". And then you have a Temple of the Wildling.
    
    It can't be in both "mos numena template complex, Embry..." and "Old City, Embry"
[2025-01-27 03:41 PM] Deciusmus: But you might want it to be.
[2025-01-27 03:41 PM] Deciusmus: But this goes back to how much effort to solve it.
[2025-01-27 03:42 PM] rsulfuratus: right, yes. the basic issue is that there is not a strict 1:1 relationship between levels of geography
[2025-01-27 03:42 PM] rsulfuratus: however, I think that solving that general problem in a satisfying way might be extremely complex
[2025-01-27 03:43 PM] Deciusmus: Yes, I agree
[2025-01-27 03:43 PM] rsulfuratus: hence wondering about solving subsets of the problem that come up most frequently
[2025-01-27 03:43 PM] rsulfuratus: although if we could write a good spec doc, chatGPT-o1 could almost certainly write the code
[2025-01-27 03:43 PM] rsulfuratus: the challenge is more what would we want the code to do?
[2025-01-27 03:45 PM] Deciusmus: Right, I guess I could see a few ways forward:
    
    (a) ignore it entirely. Pages have a "primary" whereabouts and that means sometimes they won't appear in other queries that would make sense for them to appear in
    
    (b) ignore it for now. don't try to solve subparts of the problem, and just live with some query-gaps until we have the desire/energy to try to tackel the general problem.
    
    (c) pick one or two key subparts that bug us/have high value and solve them individually. Potential subparts could be:
    * watersheds
    * regions
    * mountain ranges
    * oceans/seas
[2025-01-27 03:46 PM] Deciusmus: then with c, there is the "try to do it in a way that makes it possible to roll into a general solution later" vs just say "watershed: x" is a new valid frontmatter tag
[2025-01-27 03:47 PM] Deciusmus: and I guess within C there is also a bit of a question about what exactly the problem is
[2025-01-27 03:48 PM] Deciusmus: i.e. if the goal is to just have a dataview query on each watershed page that gets all the rivers in the watershed, you could just add watershed: x and it would work.
    
    If the goal was to have watersheds appear in the info block in a nice way then that requires some coding
[2025-01-27 03:51 PM] rsulfuratus: so I think there are two kinds of problems here:
    (1) from a query point of view: being able to identify all the places that are located in a bigger place is very useful. since we do not have the world uniquely divided up into non-overlapping "bigger places", this creates gaps that are kind of annoying. e.g., a list of "all the realms in region XX" is going to be incomplete if any realms cross regions, which is annoying. 
    (2) from a data point of view: the larger context is very helpful to report in the frontmatter since sometimes this is all we know about a thing. for many rivers, the only invented information is that it is drawn on the map - in this case, both the watershed and the actual location (and realm, if relevant) are useful. similarly true for bays/gulfs and for (some) small islands.
[2025-01-27 03:52 PM] rsulfuratus: these two are in conflict, because guaranteeing 1 makes 2 impossible
[2025-01-27 03:52 PM] rsulfuratus: well maybe that last sentence is not quite right
[2025-01-27 03:53 PM] rsulfuratus: i actually think that your proposed (b) is likely the best solution
[2025-01-27 03:53 PM] rsulfuratus: i'm not sure there is a simple way to tackle (c) that would really be satisfying
[2025-01-27 04:07 PM] Deciusmus: OK. I gotta finish some emails, but here is what I have working as a quick fix.
    
    (a) whereabouts accepts 2 new types: region (synonym for home) and polity (synonym for away with an end date of 9999 unless it is specified)
    (b) there is a new format string, "region", which is is like current or home or origin, but which follows region rather than current
[2025-01-27 04:09 PM] Deciusmus: so if I take Illoria and set the whereabouts to:
    
    whereabouts: 
    - {type: region, location: Nevos Sea }
    - {type: polity, location: Chardonian Empire, start: 1740 }
[2025-01-27 04:10 PM] Deciusmus: I get:
![[../_discord_assets/image-DB1F6.png]]
[2025-01-27 04:10 PM] Deciusmus: (after 1740)
[2025-01-27 04:10 PM] Deciusmus: you likely need to set the display defaults (wCurrent) on the page to get decent output
[2025-01-27 04:11 PM] Deciusmus: then on Burganos, I can set:
    
    whereabouts: 
    - {type: region, location: Illoria }
    
    and just get
![[../_discord_assets/image-539BE.png]]
[2025-01-27 04:12 PM] Deciusmus: gah, nevermind, it doesn't really work that well in any non-trivial case
[2025-01-27 04:12 PM] Deciusmus: not sure it is worth pushing
[2025-01-27 04:12 PM] Deciusmus: i.e. there is no way to show on the burganos page both polity chain and region chain, you have to pick which one
[2025-01-27 04:13 PM] rsulfuratus: whereabouts: 
    {type: region, location: Illoria }
    {type: polity, location: Illoria }
    
    doesn't work?
[2025-01-27 04:13 PM] Deciusmus: no because they are both Iloria so we drop
[2025-01-27 04:13 PM] rsulfuratus: ah right
[2025-01-27 04:13 PM] rsulfuratus: but Illoria is actually the special case there
[2025-01-27 04:13 PM] Deciusmus: nothing in the code is smart enough to realize the *chain* might be different
[2025-01-27 04:14 PM] rsulfuratus: e.g. for Karawa, you have polity: Eastern Dunmar and region: Karawa Desert
[2025-01-27 04:14 PM] rsulfuratus: (although in practice dunmar is the special case because mostly we don't have geography pages)
[2025-01-27 04:15 PM] Deciusmus: Westcliff works:
![[../_discord_assets/image-5852C.png]]
[2025-01-27 04:16 PM] rsulfuratus: yeah that is the same as the dunmar case, as long as the geography page and the polity page are different it should be fine
[2025-01-27 04:16 PM] Deciusmus: right this works:
![[../_discord_assets/image-E152E.png]]
[2025-01-27 04:18 PM] rsulfuratus: I think it is worth pushing. i might change the wCurrent default for place to something else, maybe "Located in"
[2025-01-27 04:19 PM] rsulfuratus: I think you should never have away without home, right? because if there is just one whereabout you'd always use home
[2025-01-27 04:20 PM] rsulfuratus: or polity could be a synonym for away unless !home in which case home, to catch the edge case where you want to specify polity because of a change in ownership but don't have a region
[2025-01-27 04:21 PM] Deciusmus: that's a bit more annoying to implement
[2025-01-27 04:27 PM] Deciusmus: ok, I fixed it so dataview queries at least work
[2025-01-27 04:27 PM] Deciusmus: that is:
    
    ```dataviewjs
    const { util } = customJS
    dv.table(`["Place", "Type Of"]`, 
                dv.pages("#place")
                    .where(f =>` util.inRegion("Nevos Sea", f.file.frontmatter, dv.current().pageTargetDate))
                    .sort(b =>` util.s("`<maintype>`", b.file))
                    .map(b =>` `[util.s("`<name>` (`<pronunciation>`)", b.file), util.s("`<maintype>`", b.file)]`))
    ```
[2025-01-27 04:27 PM] Deciusmus: correctly returns everything Nevos Sea
[2025-01-27 04:28 PM] Deciusmus: and there is an "inPolity" that correctly returns everything in the polity
[2025-01-27 04:28 PM] Deciusmus: so altogether Burganos can't on the info block *show* both Chardonian Empire and Nevos Sea, it is in both
[2025-01-27 04:34 PM] Deciusmus: Isingue is a bit weird
[2025-01-27 04:35 PM] Deciusmus: this works:
![[../_discord_assets/image-1B204.png]]
[2025-01-27 04:35 PM] Deciusmus: i.e. if you change the current date to 1544 it changes to "An Isinguer city in the Upper Isaros" and adds the polity line
[2025-01-27 04:35 PM] Deciusmus: but there is no concept of "past away"
[2025-01-27 04:35 PM] Deciusmus: i.e. we in general never display "aways" that are no longer current
[2025-01-27 04:35 PM] Deciusmus: which makes sense, but it means you can't say "used to be part of ..."
[2025-01-27 04:36 PM] Deciusmus: which I think is fine
[2025-01-27 05:10 PM] Deciusmus: ok, I should't have spent quite so long on this but I pushed a change
[2025-01-27 05:10 PM] Deciusmus: seems to work pretty well
[2025-01-27 06:08 PM] Deciusmus: OK. So poking a bit. This region vs polity thing helps a lot, in that it makes it easy to segragate the "political/realms" context from the "geography/features" context
[2025-01-27 06:08 PM] Deciusmus: ie.
![[../_discord_assets/image-C6CB1.png]]
[2025-01-27 06:12 PM] rsulfuratus: looks nice
[2025-01-27 06:13 PM] rsulfuratus: i'm trying to finish the feywild note. will want your comment on the level of detail for public pages at some point
[2025-01-27 06:13 PM] Deciusmus: ok
[2025-01-27 06:17 PM] Deciusmus: Main annoying things:
    
    anything where you have a single whereabouts you get the the "region" chain rather than the "polity" change
[2025-01-27 06:18 PM] Deciusmus: so for example "The Drunken Dolphin" an inn in Castrella
[2025-01-27 06:18 PM] Deciusmus: does this:
![[../_discord_assets/image-322F6.png]]
[2025-01-27 06:18 PM] Deciusmus: you can fix it with display defaults:
![[../_discord_assets/image-E6670.png]]
[2025-01-27 06:18 PM] Deciusmus: but its a bit annoying
[2025-01-27 06:19 PM] Deciusmus: you can also fix it by doing type: plity
![[../_discord_assets/image-D4EDA.png]]
[2025-01-27 06:19 PM] Deciusmus: but then you get "located in" rathre than "A tavern in"
[2025-01-27 06:21 PM] rsulfuratus: it feels like fiddling with the output handler could fix that
[2025-01-27 06:22 PM] rsulfuratus: you have all the correct location information in the whereabouts object itself it is just about picking what to display
[2025-01-27 06:22 PM] Deciusmus: yeah
[2025-01-27 06:23 PM] Deciusmus: the problem is that under the covers you are either following the "home" or the "current" location
[2025-01-27 06:23 PM] Deciusmus: so it is the difference between
    
    "`<home>`" or "`<current>`"
[2025-01-27 06:24 PM] Deciusmus: what you really want is a "placedefault" where you can chose if you want it to be region or polity on a page-basis
[2025-01-27 06:24 PM] Deciusmus: or even on a typeOf basis
[2025-01-27 06:24 PM] Deciusmus: but kinda something like
    displayDefaults: {defArt: "", placewhereabouts: polity }
    tags: `[place]`
    whereabouts: Castrella
[2025-01-27 06:25 PM] Deciusmus: the other annoying thing is there is no way to have 2 whereabouts on a page that doenst have 2 whereabouts
[2025-01-27 06:25 PM] rsulfuratus: that seems unnecessarily complicated since you can override by specifying the whereabouts?
[2025-01-27 06:26 PM] Deciusmus: but you can't
[2025-01-27 06:26 PM] rsulfuratus: but this is an output handler thing isn't it?
[2025-01-27 06:26 PM] rsulfuratus: you could if the output handler were smarter about having a primary string and a secondary string
[2025-01-27 06:27 PM] rsulfuratus: that is you don't want "wHome" and "wCurrent" for places, you want "wPrimary" and "wSecondary"
[2025-01-27 06:27 PM] Deciusmus: the problem is that this:
    whereabouts: 
    - {type: polity, location: Castrella}
    
    because it is shorthand for
    whereabouts: 
    - {type: away, location: Castrella}
    
    generates 
    Home location: unknown
    Current location: Castrella
[2025-01-27 06:27 PM] Deciusmus: so it uses "the home unknown" and the "current" display strings
[2025-01-27 06:28 PM] rsulfuratus: right but can't the output handler see this is a place and set home to Castrella too?
[2025-01-27 06:28 PM] Deciusmus: the "home unknown" display string is "", so you just get "current" which is "Located in `<current>`"
[2025-01-27 06:28 PM] Deciusmus: yes but it thinks you should follow the "home" chain
[2025-01-27 06:28 PM] Deciusmus: so you get Castrella, Apporia
[2025-01-27 06:28 PM] Deciusmus: not Castrella, Cedrano
[2025-01-27 06:28 PM] Deciusmus: i.e. you get this
![[../_discord_assets/image-46672.png]]
[2025-01-27 06:29 PM] Deciusmus: It would be straightforward (ish) to make "polity with no home" the same as home (as you suggested above) but it doesn't really solve anything
[2025-01-27 06:29 PM] Deciusmus: because if you wanted Castrella, Apporia, rather than Castrella, Chardonian Empire, you could set type: region
[2025-01-27 06:31 PM] rsulfuratus: i must be missing something. if you set type = polity, you ge the right chain, right? the only problem is you have the wrong display string
[2025-01-27 06:31 PM] Deciusmus: yes
[2025-01-27 06:31 PM] Deciusmus: Well, no
[2025-01-27 06:32 PM] Deciusmus: that isn't how chains work.
    
    You have two chains:
    
    the "home" aka region chain which is " Castrella; Apporia
    the "current" aka polity chain which is "Castrella; Chardonian Empire"
[2025-01-27 06:32 PM] rsulfuratus: yes
[2025-01-27 06:32 PM] Deciusmus: these are reprsented by the `<home>` and `<current>` tokens in the output handler/token parser code
[2025-01-27 06:32 PM] Deciusmus: so the problem is what should we display? we don't know if we should display `<home>` or `<current>`
[2025-01-27 06:33 PM] Deciusmus: right now it works because we have:
    
                "wHome" :  "`<ancestry:UA>` `<subtypeof:UA>` `<typeof:UA>` `<(of )primary>` `<home:5Fq>`",
    
                "wCurrent" : "Located `<current:5Fq>`",
[2025-01-27 06:33 PM] Deciusmus: so if we are displaying the "home" string, we use the `<home>` token and if we are displaying the "current" string we use the `<current>` token
[2025-01-27 06:34 PM] Deciusmus: but what we want is to display the home string (i.e. the full "`<ancestry:UA>` `<subtypeof:UA>` `<typeof:UA>` `<(of )primary>` `<home:5Fq>`") but using `<current>` insteadof `<home>`
[2025-01-27 06:34 PM] Deciusmus: anyway, time for dinner but I'll be around later
[2025-01-27 06:34 PM] rsulfuratus: right but this is what I mean about primary vs secondary. you need four displaystrings for locations:
    - primaryRegion: "`<ancestry:UA>` `<subtypeof:UA>` `<typeof:UA>` `<(of )primary>` `<home:5Fq>`"
    - primaryPolity: "`<ancestry:UA>` `<subtypeof:UA>` `<typeof:UA>` `<(of )primary>` `<current:5Fq>`",
    - secondaryRegion: "Located `<home:5Fq>`"
    - secondaryPolity: ""Located `<current:5Fq>`"
[2025-01-27 06:35 PM] rsulfuratus: then you need some logic about which is primary and which is secondary if there are both, and which is primary if there is one
[2025-01-27 06:35 PM] rsulfuratus: but i think in that case it is just a matter of picking something, and then if you set the other, you get both, right?
[2025-01-27 06:35 PM] rsulfuratus: i mean a little more complicated
[2025-01-27 06:35 PM] rsulfuratus: but i think all in output handler
[2025-01-27 06:36 PM] rsulfuratus: might be wrong
[2025-01-27 06:39 PM] rsulfuratus: actually you might be able to just change this to compare strings not locations: `if (!whereabout.current.location || whereabout.current.location != whereabout.home.location) {`
[2025-01-27 06:51 PM] rsulfuratus: why does the order matter?
[2025-01-27 06:51 PM] rsulfuratus: 
![[../_discord_assets/image-3D040.png]]
[2025-01-27 06:51 PM] rsulfuratus: 
![[../_discord_assets/image-1060F.png]]
[2025-01-27 07:08 PM] Deciusmus: that's a bug; haven't figured it out yet
[2025-01-27 07:16 PM] Deciusmus: I'm not sure if primary/secondary is the right way to think about it...
[2025-01-27 07:17 PM] rsulfuratus: fundamentally though you basically want some combination of (full description, located in) (region chain, polity chain)
[2025-01-27 07:17 PM] rsulfuratus: maybe "primary/secondary" is wrong but if you can write down under which conditions you;d want each combination it should be possible to code in output handler
[2025-01-27 07:18 PM] Deciusmus: right but I dont think you can define the conditions correctly without changing the lower layers
[2025-01-27 07:19 PM] Deciusmus: i.e. the output handler only has access to:
    * current
    * home
    * origin
    * lastKnown
[2025-01-27 07:19 PM] Deciusmus: in our "inn in Castrella" case, these will all be "castrella"
[2025-01-27 07:19 PM] rsulfuratus: it has the full metadata
[2025-01-27 07:19 PM] Deciusmus: yeah but it doesn't have the chains
[2025-01-27 07:20 PM] Deciusmus: ah but it has the full whereabouts
[2025-01-27 07:20 PM] Deciusmus: i see
[2025-01-27 07:20 PM] Deciusmus: i missing that
[2025-01-27 07:22 PM] Deciusmus: so you could do something where if (whereabout.current.type = polity) but again, not sure how that helps you.
[2025-01-27 07:23 PM] Deciusmus: I guess you could tell whether the current is the same as home or not
[2025-01-27 07:23 PM] Deciusmus: if the current has type polity it means it is a "different" current from home
[2025-01-27 07:23 PM] Deciusmus: and so if you don't have a home, you could do something different
[2025-01-27 07:25 PM] rsulfuratus: yeah basically. i haven't taken the time to work out the full logic but i think just knowing type and location for each whereabout would let you pick out the right way to display every permutation
[2025-01-27 07:26 PM] rsulfuratus: you only care about current and home anyway
[2025-01-27 07:26 PM] rsulfuratus: for the simple case, e.g. whereabouts: Castrella
    
    current.location = home.location
    current.type = home.type = "home"
[2025-01-27 07:26 PM] rsulfuratus: (i think)
[2025-01-27 07:27 PM] rsulfuratus: in this case, you have a default option, say (full typeof string) (region)
[2025-01-27 07:27 PM] rsulfuratus: if current location = home.location but current.type != home.type, I think this can only happen when you set both region and polity
[2025-01-27 07:28 PM] rsulfuratus: so then you have a primary/secondary
[2025-01-27 07:28 PM] rsulfuratus: say region primary, polity seconardy
[2025-01-27 07:28 PM] rsulfuratus: if current location exists but home location is unknown, you have just polity
[2025-01-27 07:29 PM] rsulfuratus: actually the default option being (full typeof string) (polity) is probably better because then you can override it with {type: region, location }
[2025-01-27 07:30 PM] Deciusmus: I'm not sure how this piggybacks on display defaults and such
[2025-01-27 07:30 PM] rsulfuratus: i didn't think that out in detail, but since we can set place-specific displayDefaults and then pass then to TokenParser in the output handler that seems feasible
[2025-01-27 07:31 PM] rsulfuratus: that was where the primary/secondary comes from. basically you need four pre-specified display strings and then pass the right one to tokenparser
[2025-01-27 07:31 PM] rsulfuratus: depending on checking type and whether locations are the same
[2025-01-27 07:32 PM] rsulfuratus: you could call them fullRegion, fullPolity, simpleRegion, simplePolity or something
[2025-01-27 07:32 PM] Deciusmus: I'm not totally surehow this is simpler than just having the idea of a "region" and "polity" in the whereabouts (i.e. so whereabouts returns 6 strings rather than 4) and then just not having current/home for places at all (
[2025-01-27 07:32 PM] Deciusmus: the problem I just realized is that this is going to break people in places
[2025-01-27 07:33 PM] Deciusmus: because we are piggybacking on home/current I *think* the current location line on a person will use the polity and the home line will use the region
[2025-01-27 07:33 PM] Deciusmus: which is not great
[2025-01-27 07:34 PM] rsulfuratus: yeah, it does
[2025-01-27 07:34 PM] rsulfuratus: 
![[../_discord_assets/image-84D6F.png]]
[2025-01-27 07:35 PM] rsulfuratus: hmm
[2025-01-27 07:36 PM] rsulfuratus: this is a fundamental problem with allowing places to have multiple chains though, unless you figure out a way to combine the chains into a single line
[2025-01-27 07:38 PM] Deciusmus: well I think for any given place you probably know what the right chain should be from that place up, right?
[2025-01-27 07:39 PM] rsulfuratus: well, for lyra, should it say "Based in Voltara, on the Northwest Coast" or "Based in Voltara, the Chardonian Empire"?
[2025-01-27 07:39 PM] Deciusmus: I think that's up to the Voltara page
[2025-01-27 07:39 PM] Deciusmus: not the Lyra page
[2025-01-27 07:39 PM] rsulfuratus: how so?
[2025-01-27 07:39 PM] Deciusmus: I don't know
[2025-01-27 07:39 PM] rsulfuratus: ah i see
[2025-01-27 07:39 PM] Deciusmus: I just mean, that is the right place to fix it
[2025-01-27 07:39 PM] Deciusmus: although actually
[2025-01-27 07:39 PM] rsulfuratus: i mean this is back to primary/secondary
[2025-01-27 07:40 PM] Deciusmus: I hate to add more letters after the : in current, but one option would be to just have an option for what to follow
[2025-01-27 07:40 PM] Deciusmus: `<current:Z>` means current location, following current all the way
[2025-01-27 07:40 PM] Deciusmus: `<current:C>` means current location, following home
[2025-01-27 07:41 PM] Deciusmus: letters just examples
[2025-01-27 07:43 PM] Deciusmus: alternatively, it is back to some idea on the frontmatter, i.e.
    
    primaryWhereabouts: polity
[2025-01-27 07:44 PM] Deciusmus: alternatively, the whole idea of "polity" vs "region" is a bad idea.
    instead, it should just be type = primary and type = secondary
[2025-01-27 07:44 PM] rsulfuratus: i think the token is the simplest. based on a quick glance at your tokenparser updates i think you could just have a code like X mean follow the opoosite
[2025-01-27 07:45 PM] rsulfuratus: e.g. `<current>` follows current, `<current:X>` follows home
[2025-01-27 07:45 PM] rsulfuratus: although i do think the idea of region and polity might not be perfect
[2025-01-27 07:46 PM] Deciusmus: the nice thing about type = primary and type = secondary is that it would work for watersheds as well
[2025-01-27 07:46 PM] Deciusmus: or really anything
[2025-01-27 07:47 PM] rsulfuratus: it makes the dataview queries a bit trickier because you have to check both primary and secondary
[2025-01-27 07:47 PM] rsulfuratus: but maybe not too bad
[2025-01-27 07:48 PM] rsulfuratus: i mean the right way to do this is actually with a graph structure
[2025-01-27 07:49 PM] rsulfuratus: but that is too fiddly to code
[2025-01-27 07:52 PM] Deciusmus: I actually wonder if the whole thing would be easier if we didn't use whereabouts for polity at all
[2025-01-27 07:53 PM] Deciusmus: I guess it also goes back to your point earlier about "what do we want to do"
[2025-01-27 07:55 PM] Deciusmus: A clarifying set of questions might be:
    
    For Lyra, what is the right thing to show for her location? Voltara/Northwest Coast or Voltara/Chardonian Empire?
    Is the answer the same for a inn in Voltara?
    
    And some assumptions:
    On the Voltara page,  we presumably want to see both "on the Northwest Coast" and "in the Chardonian Empire". 
    We want to be able to do a "cities in Chardonian Empire" which should return Voltara
    We want to be able to do a "places in Northwest Coast" which should return Voltara
[2025-01-27 07:56 PM] rsulfuratus: I think that polity is usually the primary thing you care about
[2025-01-27 07:57 PM] rsulfuratus: so more useful to list Voltara, Chardonian Empire than Voltara, Northwest Coast
[2025-01-27 07:57 PM] rsulfuratus: you can always click on Voltara for more
[2025-01-27 07:57 PM] Deciusmus: right I think that is probably true
[2025-01-27 08:01 PM] rsulfuratus: mostly, you want buildings ->` settlements ->` subunits of realms ->` realms
[2025-01-27 08:02 PM] rsulfuratus: and geographic feaure ->` larger feature ->` region, except when the geographic feature is wholly contained in a realm, and then you might go larger feature ->` realm
[2025-01-27 08:03 PM] rsulfuratus: e.g., you don't want:
    Songara plains ->` Dunmari basin ->` Greater Dunmar
    you want
    Songara plains ->` Dunmari basin ->` Dunmar
    or
    Songara plains ->` Central Dunmar ->` Dunmar
[2025-01-27 08:03 PM] rsulfuratus: i'm not sure it is ever useful to follow non-polity on a person page, unless you can't because the place isn't in a polity
[2025-01-27 08:04 PM] Deciusmus: right
[2025-01-27 08:06 PM] Deciusmus: I think primary/secondary would really work the best
[2025-01-27 08:06 PM] Deciusmus: Voltara has primary = Chardonian Empire, secondary = Northwest Coast
[2025-01-27 08:07 PM] Deciusmus: So you get something like
![[../_discord_assets/image-91CDE.png]]
[2025-01-27 08:07 PM] Deciusmus: which makes a lot more sense
[2025-01-27 08:08 PM] Deciusmus: or
![[../_discord_assets/image-8057B.png]]
[2025-01-27 08:09 PM] Deciusmus: or
![[../_discord_assets/image-B756E.png]]
[2025-01-27 08:09 PM] rsulfuratus: right
[2025-01-27 08:11 PM] Deciusmus: but actually the key thing is that the "secondary" location cannot be home or current
[2025-01-27 08:13 PM] Deciusmus: I think what you actually want is to revert all the changes I did (i.e. make it so that we always follow current in whereabout chains, no matter what)
[2025-01-27 08:13 PM] Deciusmus: but then add the idea of type = secondary, which is another whereabouts piece (separate from home or current)
[2025-01-27 08:14 PM] Deciusmus: (primary is a synonym for home)
[2025-01-27 08:38 PM] Deciusmus: Ok, primary/secondary works much much better
[2025-01-27 08:39 PM] Deciusmus: Just need to add a wSeconday display defaults
[2025-01-27 08:42 PM] rsulfuratus: (meanwhile I am trying to get chatGPT to write a scene from A Fool's Fortune)
[2025-01-27 08:42 PM] Deciusmus: ha
[2025-01-27 08:43 PM] rsulfuratus: here is the best version so far. I think it can do better with a bit of prompting:
    And a famous scene in [[A Fool's Fortune]] depicts the tragi-comic hero, Estelis, gleefully bargaining with a pixie who offers him a "crown of starlight," said to bestow the wearer with eternal respect and adoration. Estelis, overcome with visions of glory, eagerly hands over his entire purse of gold. The pixie solemnly places an ornate crown made of cobwebs and dew on his head, whispering that it is invisible to those unworthy of its power. Estelis, beaming with pride, parades around the stage, boasting of his newfound majesty, while the audience, well-versed in fey trickery, can barely contain their laughter.
[2025-01-27 08:44 PM] Deciusmus: that isn't awful
[2025-01-27 08:45 PM] rsulfuratus: this wasn't too bad as a sonnet:
    
    Beneath the boughs where twilight shadows play,
    The fey spin bright, their songs a siren’s call.
    Through glens of gold and meadows wrapped in gray,
    Their laughter weaves a spell to bind us all.
    
    The shifting woods bewitch all guiding light,
    As time dissolves within this haunted glade.
    No dawn will break to end eternal night,
    Where bargains made demand the price be paid.
    
    Fair beauty shrouds the thorn and hides the snare,
    With shimmering hues that veil a darker scheme.
    Beware, O heart, for wonder masks despair,
    And joy dissolves like mist within a dream.
    
    'Neath shadowed skies, the endless whispers weave,
    The mournful songs of those who cannot leave.
[2025-01-27 08:45 PM] rsulfuratus: i had to do some manual cleanup but it is amazingly good at (almost always) getting the rhyme and meter correct
[2025-01-27 08:45 PM] rsulfuratus: way better than 3.5 or even 4.0
[2025-01-27 08:45 PM] Deciusmus: have you tried Deep Mind
[2025-01-27 08:46 PM] Deciusmus: or deep seeker or whatever the chinese one is called
[2025-01-27 08:46 PM] rsulfuratus: i haven't
[2025-01-27 08:50 PM] rsulfuratus: this is better I think:
    
    In a pivotal scene from [[A Fool’s Fortune]], Estelis encounters a pixie offering to trade a “Field of Gold.” The pixie describes it with grandiose imagery: an endless plain of golden light, shimmering as far as the eye can see, where riches grow like grass and all who possess it are envied by kings. Entranced, Estelis cannot resist, and he offers a pouch of his finest gems to secure the deal. The pixie produces a delicate box, no larger than a hand, and insists the field lies within. “The gold is yours, fine merchant—just sow the seeds of your ambition, and it will flourish.” The audience, of course, recognizes the trap: inside the box lies nothing but a handful of dandelion seeds, whose blooms, in their fleeting moment, might appear golden in the sun
[2025-01-27 08:50 PM] Deciusmus: 
Attachment (message.txt):
```txt
Title: A Fool’s Fortune
Scene: The Goblin Market of Whispers

Setting: A garish, ever-shifting bazaar in the Feywild. Stalls are made of moth-wing awnings, mushroom caps, and bones lashed with vines. Goods glitter falsely—coins are leaves, jewels are insect husks, wine is rainwater. The air hums with faint laughter. A sign reads “Deals Honored, Prices Unseen” in glowing moss. Above, a crescent moon grins like a knife.

CHARACTERS:

ALDEMAR VOSS: A middle-aged merchant from Drankor, pompous and perpetually sweaty. Wears a velvet coat (now moth-eaten) and clutches a ledger he calls “The Book of Certainties.”

PUCKERLIME: A fey goblin marketeer with a lichen-green grin and a pocketwatch that ticks backward. Sells “investments.”

THE SHADE-SISTER: A veiled fey spirit who “audits” fortunes. Her shadow devours gold.

CHORUS OF WILL-O’-WISPS: Tiny, mocking lights that echo dialogue in reverse.

[Scene opens with ALDEMAR stumbling into the market, disoriented. His ledger glows faintly—a protective charm from Drankor’s Society of Unveiled Accounts, a secret order of merchant-mages. The WILL-O’-WISPS swarm, giggling.]

WILL-O’-WISPS (in unison, singsong)
Lost ledger, lost wits, what’s profit when the scale’s rigged?

ALDEMAR (brandishing his ledger)
Silence, spectral riffraff! I am Aldemar Voss, High Factor of the Drankor Mercantile Nexus! I don’t lose—I leverage.

[PUCKERLIME slithers from a stall, holding a contract written on birch bark.]

PUCKERLIME (sycophantic bow)
Ah, a Drankor man! We adore your kind. So… invested in outcomes. Care to buy a share of the Moon’s Reflection? Pays dividends in wishes!

ALDEMAR (squinting at the contract)
Wishes? Hmph. What collateral?

PUCKERLIME (licking his teeth)
A trifle: the weight of your shadow.

ALDEMAR (chuckling, dipping quill into ink)
Shadows are free. Let’s say… ten shares.

[He signs. The WILL-O’-WISPS swarm his shadow, which thins. Unseen, his ledger’s “Assets” page bleeds ink.]

ALDEMAR (to himself, triumphant)
Finally, a market unshackled by Drankor’s tiresome Regulations on Incorporeal Equities!

[THE SHADE-SISTER drifts forward, her veil made of cobwebs. She places a hand on his ledger. It rattles.]

THE SHADE-SISTER (hollow voice)
A audit, sir. Your fortune… lacks substance.

ALDEMAR (snatching the ledger back)
Substance? I’ve tripled my holdings since breakfast!

THE SHADE-SISTER (pointing to a stall)
Then buy the Locket of Last Year’s Breath. It whispers tomorrow’s prices.

ALDEMAR (peering at the locket)
How much?

THE SHADE-SISTER
Your mother’s maiden name.

ALDEMAR (pausing, uneasy)
That’s… hardly currency.

PUCKERLIME (whispering)
Names have no worth here—unless you cling to them.

[Aldemar’s ledger flashes—a Society of Unveiled Accounts sigil—but he hesitates, then snarls.]

ALDEMAR
“Vossaria.”

[The locket snaps open, screeching like a bird. THE SHADE-SISTER’s shadow unfurls, stealing “Vossaria” from the ledger’s margins. Aldemar doesn’t notice.]

ALDEMAR (grinning, listening to the locket)
“Buy”… “Buy all”… YES!

[He empties his purse (full of dead leaves) onto a stall, grabbing a “deed” to a castle that’s a termite mound. The fey vendors erupt in silent laughter.]

PUCKERLIME (offering a goblet)
A toast! To Drankor’s shrewdest!

ALDEMAR (drinking deep; it’s swamp water)
To expansion!

[He freezes mid-toast. His coat’s embroidery unravels, thread by thread, weaving into PUCKERLIME’s pocketwatch. The WILL-O’-WISPS chant.]

WILL-O’-WISPS
Fortune’s fool, balance due—what’s subtracted from naught but you?

ALDEMAR (suddenly frail, but euphoric)
Can’t you see? I’ve won. I’m untouchable.

[THE SHADE-SISTER opens his ledger. The pages are blank. She offers him a pen.]

THE SHADE-SISTER
Sign again. Your life will suffice.

ALDEMAR (scrawling his name wildly)
Gladly! What’s life without legacy?

[Blackout. A single WILL-O’-WISP whispers:]
WILL-O’-WISP
Legacy’s weight… breaks the scale.
```
[2025-01-27 08:51 PM] Deciusmus: (I haven't read it yet)
[2025-01-27 08:53 PM] rsulfuratus: eh. kind of gobblegook. maybe some semi-interesting ideas but not strung together very well. what was the prompt?
[2025-01-27 08:54 PM] Deciusmus: write a scene from a play. 
    Here is what I know about the play:
    * It is called "A Fools' Fortune"
    * It is about a merchant who gets lost in the Feywild and slowly loses all his money to a variety of fey tricksters, thinking he is getting richer and richer all the time.
    * The Feywild is a fairy realm where various classic fey types live
    * the play was written by a playwright in a city called Drankor
    * Drankor is full of secret societies and magic
[2025-01-27 08:55 PM] Deciusmus: A little to "secret society" oriented, but
    3. The Vineyard of Vanity
    Aldemar meets a vintner (“elf” fey with ivy-crowned hair) selling wine that “reveals hidden desires.” Each sip erodes his memory of Drankor’s Society of Unveiled Accounts, replacing it with visions of himself as a king. He trades his ledger (his tether to reality) for a cask, unaware the wine turns to vinegar by dawn. The fey use the ledger to infiltrate Drankor’s secret economies.
[2025-01-27 08:57 PM] rsulfuratus: here's chatGPT with the same prompt
Attachment (play.txt):
```txt
Certainly! Here’s another scene from *A Fool’s Fortune*. This one plays into the Feywild’s mystical charm, the merchant’s gullibility, and Drankorian flair for intrigue and clever wordplay.

---

### *A Fool’s Fortune*  
**Act III, Scene 1: The Singing Pool**

*The stage is set with a shimmering pool at center stage, surrounded by luminous flowers and twisting, otherworldly trees. The air hums faintly with a melody that grows louder as the scene unfolds. **Estelis**, the merchant, stumbles in, clutching his satchel and looking both exhausted and exhilarated.*

**Estelis**  
*Panting, wiping his brow.*  
By all the gods, this land is a maze of wonders! A pool that sings, a melody as sweet as coin in the coffer. Surely, this is a place where fortunes gather!  

*A group of **nymphs** rises from the pool, their movements fluid and graceful. Their song intertwines, ethereal and haunting. They are clad in flowing garments of silver and green, and their eyes glint with mischief.*

**First Nymph**  
*Stepping forward, voice melodic.*  
Traveler bold, who treads where mortals fear,  
What brings you to our sacred sphere?  

**Estelis**  
*Straightening, with an air of importance.*  
I am Estelis of Cedrano, merchant of renown! I seek treasures rare, riches unseen by mortal eyes. And what is this I hear? A song so sweet, it must be the whisper of fortune itself!

**Second Nymph**  
*Laughing lightly.*  
Fortune, you say? Such a bold decree.  
But tell us, merchant, what can you offer we?

**Estelis**  
*Gesturing to his satchel with a grin.*  
What can I offer? Behold, a bounty fit for kings! Gold, gems, and rarest spices. Surely, a fair exchange for the wonders of this place.

**Third Nymph**  
*Smiling slyly, circling him.*  
Gold is cold, and gems but glass.  
What worth have they in waters vast?  
We deal in treasures no mortal can hold:  
The fleeting, the precious, the daringly bold.

**First Nymph**  
*Leaning in with a conspiratorial whisper.*  
Your fortune lies not in what you bear,  
But in what you leave behind, if you dare.  

*The nymphs rise higher from the pool, circling him with hypnotic grace. One holds out a shimmering vial, glowing faintly with a silvery light.*

**Second Nymph**  
Take this vial, a gift for your quest.  
It holds liquid song, of dreams the best.  
Pour it forth in the mortal lands,  
And watch as fortune blooms at your hands.

**Estelis**  
*Eyes alight with greed.*  
Liquid song, you say? A wonder such as this will make me a legend! What price must I pay for such a treasure?

**Third Nymph**  
*Smiling, voice smooth as silk.*  
No gold, no jewels—we seek none of these.  
A single drop of memory, if you please.

**Estelis**  
*Laughing heartily.*  
A drop of memory? You drive a hard bargain, but I accept. Take a trifle, and I shall take my fortune.

*The nymphs gather closer, one reaching out to gently touch his temple. Estelis stiffens briefly, then shakes his head as though clearing it.*

**First Nymph**  
The deal is struck. The vial is yours.  
May your dreams lead to open doors.  

*They hand him the vial, and he gazes at it with awe. The nymphs sink back into the pool, their song fading to a faint hum. As Estelis exits triumphantly, the lights dim, and the nymphs’ laughter echoes.*

**Third Nymph**  
*To the audience, with a sly smile.*  
He leaves lighter than he knows,  
For memories lost, the weight still grows.

---

### Notes:
1. **Irony:** Estelis believes he’s gained a magical treasure but has unknowingly given away a part of his memory—perhaps of his home or loved ones.
2. **Fey Trickery:** The nymphs never lie, but they play with his greed and hubris.
3. **Drankorian Flavor:** The lyrical, slightly ominous tone of the nymphs’ dialogue reflects the magical and mysterious culture of Drankor.
4. **The Journey Continues:** This sets up Estelis for further losses, as he unwittingly carries his "treasures" back into the Feywild, growing poorer with every exchange.
```
[2025-01-27 08:57 PM] rsulfuratus: of course it is cheating a little by having all my context working on feywild poems already
[2025-01-27 08:59 PM] rsulfuratus: however it is tough to get the "thinks he's getting richer but actually getting poorer" vibe because it is not obvious actually what that means!
[2025-01-27 09:01 PM] Deciusmus: how about this
    
    Aldemar encounters a fey “banker” (posing as a human financier) offering to exchange his “outdated” Drankor coins for Feywild currency that “doubles in value hourly.” He eagerly trades his purse, but unbeknownst to him, every Fey coin he accepts erases a memory of his past wealth. By scene’s end, he’s frantically counting shimmering coins, oblivious that he’s forgotten his own name, his ledger, and the Society of Unveiled Accounts’ warnings.
[2025-01-27 09:01 PM] Deciusmus: Aldemar stumbles into a fey-run “lottery” (hosted by elves in masquerade masks) where every ticket is free… but each one subtly steals an hour of his lifespan. The prizes are illusions: deeds to phantom estates, titles to forgotten kingdoms. He “wins” endlessly, celebrating his “good fortune” as he rapidly ages. The fey siphon his stolen time into hourglasses, selling it to Drankor’s secret societies.
[2025-01-27 09:02 PM] rsulfuratus: i had a bunch of stuff like that earlier but i was trying to get more subtle irony. not an obvious con or a blatant curse
[2025-01-27 09:05 PM] Deciusmus: yeah
[2025-01-27 09:05 PM] Deciusmus: ok, secondary is working...
[2025-01-27 09:06 PM] Deciusmus: Basic idea:
    
    * two new types on a whereabouts: primary and secondary
    * primary is just an alias for "home"
    * secondary is special - it is NEVER the current location, so basically it can only ever be the "secondary" location
    * new displayDefaults: wSecondary defaults to "Located `<secondary:5FQ>`
[2025-01-27 09:07 PM] Deciusmus: the "inLocation" helper function finds things in both primary or secondary locations
[2025-01-27 09:07 PM] Deciusmus: chains (starting from either primary or secondary or home or current or whatever) always follow "current" location
[2025-01-27 09:07 PM] Deciusmus: (which is always primary)
[2025-01-27 09:14 PM] rsulfuratus: i pushed a nearly complete draft of the feywild page. definitely the most complicated
[2025-01-27 09:14 PM] rsulfuratus: i still need to write something in-game about archfey and fey realms
[2025-01-27 09:14 PM] rsulfuratus: and clean up the dm notes
[2025-01-27 09:15 PM] rsulfuratus: but would be helpful to get a sense if you think it is revealing too much or too little, what if anything you'd add to get the vibe to match your game
[2025-01-27 09:20 PM] Deciusmus: I think the page in general is a good level of detail
[2025-01-27 09:20 PM] Deciusmus: it doesn't reveal anything major I haven't told my players, for example
[2025-01-27 09:21 PM] Deciusmus: I might if I was inspired add a tyrwinghan sentence or two to the "people of the feywild" it feels like it has a bit of a Chardonian spin. But overallI like it a lot
[2025-01-27 09:23 PM] rsulfuratus: yeah hard to capture all the vibes. make kiya write a sentence or two for a tyrwinghan perspective

