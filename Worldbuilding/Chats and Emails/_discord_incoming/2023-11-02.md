# Discord DM – 2023-11-02

[2023-11-02 09:09 AM] rsulfuratus: pushed an update that adds an "Unlinked Pages" to _MOC that will show pages with no backlinks, to help fine the missing content like the above
[2023-11-02 10:51 AM] rsulfuratus: thinking about events on my walk to work. have a bunch of meetings rest of day so probably won't do anything until tonight or the weekend, but curious your thoughts - this is just brainstorming for now
[2023-11-02 10:55 AM] rsulfuratus: it seems like there are three kinds of events/time worth tracking: 
    1. recurring events like lunar cycle, holidays, new years, even different calendar reckonings or things like PC / important NPC birthdays if anyone ever cares
    2. events that happen at a specific point in time, and can be summarized as a specific thing, e.g. "The Great War" or "The Battle Against Wakog"
    3. campaign and DM secret timelines, that might go into the future and/or include some boring stuff that isn't really an event (party prepared for pyravela in Tollen)
[2023-11-02 10:55 AM] rsulfuratus: the stuff in 1 is easy to track via Fantasy Calendar, it just requires a bit of setup, so that seems like the best solution. having festivals and other important recurring dates pop up on fantasy calendar is great for session planning, etc
[2023-11-02 10:56 AM] rsulfuratus: the stuff in 2 is easy to do with the Events folder and specific notes for each event, linked as needed to timelines, session notes, gazetteer, history, etc
[2023-11-02 10:57 AM] rsulfuratus: the stuff in 3 is the thing I remain unsure about. it is too granular to convert into events easily, but it can get too complicated to track as a bunch of separate timelines
[2023-11-02 10:59 AM] rsulfuratus: I don't think we need have a common solution for 3, but in my ideal world there would be a feasible way to query "what happened in march 1748 anywhere in the world" that would pull up both campaign timeline stuff from all campaigns that exist, world timeline stuff / DM secrets, and documented events
[2023-11-02 11:00 AM] rsulfuratus: this might have to be e.g. a python script outside Obsidian that can be used to generate notes as desired
[2023-11-02 11:01 AM] rsulfuratus: e.g. if we have a consistent format for timeline notes then a python script could slice and dice them pretty easily
[2023-11-02 11:01 AM] rsulfuratus: anyway, something to think about. the shared timeline stuff is my biggest current hurdle with obsidian
[2023-11-02 11:54 AM] Deciusmus: yeah, I agree that good timelines and the ability to query dates is something we don't have a great solution for, that would be cool
[2023-11-02 11:55 AM] Deciusmus: For holidays and whatnot, fantasy calendar does work really well, except that it is impossible to put the fantasy calendar info in github, so it is hard to share
[2023-11-02 11:58 AM] Deciusmus: for moment in time events, the fc-date yaml tag works but actually moment in time events I mostly don't want on the fantasy calendar
[2023-11-02 11:59 AM] Deciusmus: I haven't found a good way to make reoccuring events appear nicely on the fantasy calendar, although it should be possible
[2023-11-02 12:00 PM] Deciusmus: For 2, totally agree the events structure works well (and would be easy to add metadata to make queries easier)
[2023-11-02 12:29 PM] rsulfuratus: the fc-date yaml works for things that happen every year on the same day
[2023-11-02 12:29 PM] rsulfuratus: I just added Pyravela and it seems to work fine
[2023-11-02 12:29 PM] Deciusmus: right, the "in calendar UI" doesn't really
[2023-11-02 12:29 PM] Deciusmus: but the fc-date does,  discovered that
[2023-11-02 12:30 PM] rsulfuratus: the problem is things keyed off lunar dates, which the plugin can't calculate
[2023-11-02 12:33 PM] rsulfuratus: we should probably routinely add fc-date information to anything keyed off same date each year, that should parse relatively smoothly
[2023-11-02 01:10 PM] Deciusmus: the online fantasy calendar can do it
    https://helpdocs.fantasy-calendar.com/topic/event_conditions/
[2023-11-02 01:10 PM] Deciusmus: but I guess the obsidian version doesn't know how
[2023-11-02 01:22 PM] Deciusmus: honestly if I knew typescript probably would be pretty easy to add
[2023-11-02 01:22 PM] Deciusmus: there's a "get events for day" function that seems to do the filtering
[2023-11-02 01:25 PM] Deciusmus: Esp if everything is either first new moon of month or first full moon of month
[2023-11-02 01:33 PM] Deciusmus: anyway, ignore that for now...
    the real issue is how to tag intra-note sections
[2023-11-02 01:33 PM] Deciusmus: so that they could show up in a dataview query or similar
[2023-11-02 01:56 PM] Deciusmus: ok, it is a bit of a pain, but...
[2023-11-02 01:58 PM] Deciusmus: If you
    (a) use tasks for bulleted timeline lists by doing:
      ``` - `[ ]` ``` instead of ``` * ``` to create the list
    (b) add a date field to the list:
    ``` (taelgar-date:: 1719-12-30) ```
    (c) add a `#events-source` tag on the document
    
    Then this:
    ```dataview
    TASK from #timeline where taelgar-date.year = 1719
    ```
    
    produces:
![[../_discord_assets/image-F5471.png]]
[2023-11-02 05:06 PM] Deciusmus: ha. got iot
[2023-11-02 05:06 PM] Deciusmus: 
![[../_discord_assets/image-573E4.png]]
[2023-11-02 05:06 PM] Deciusmus: should have been working but...
[2023-11-02 05:07 PM] rsulfuratus: i have been busy since lunch, was just coming back to this
[2023-11-02 05:08 PM] Deciusmus: currently not sorted or filtered
[2023-11-02 05:08 PM] rsulfuratus: is this in dataview or some messy dataviewJS or something else?
[2023-11-02 05:09 PM] Deciusmus: not-very-messy dataviewJS
[2023-11-02 05:09 PM] rsulfuratus: even better
[2023-11-02 05:09 PM] Deciusmus: ```dataviewjs
    dv.table(`["Date", "Event"]`, dv.pages("#timeline").flatMap(item =>` {
        if (item.file.tasks.length == 0) {
            return [[dv.fileLink(item.file.name, false, dv.date(item.file.frontmatter.taelgardate).toFormat("DD")), item.file.name]];
        } else {
            return item.file.tasks.map(t =>` {
                const firstParen = t.text.indexOf(")");
                let text = firstParen >` 0 ? t.text.substring(firstParen+1) : t.text;
                return `[dv.fileLink(item.file.name, false, dv.date(t.taelgardate) == undefined ? "Unknown date" : dv.date(t.taelgardate).toFormat("DD")), text.replace(":", "")]`;
            })
        }    
    }))
    ```
[2023-11-02 05:09 PM] Deciusmus: the "date" is linked to the file
[2023-11-02 05:10 PM] Deciusmus: the source is either
    (a) for files with `#timeline` tag and no tasks, the front matter of the file
    (b) for files with `#timeline` tag and tasks, the set of tasks
[2023-11-02 05:13 PM] Deciusmus: The bits I don't love:
    
    Typing
    ```- `[ ]` DR (taelgardate:: 358): [[Emperor Anates]] campaigns around the [[Mostreve Hills]]```
[2023-11-02 05:13 PM] Deciusmus: vs
    ```* DR 360: [[Emperor Anates]] crosses the [[Enst]] and establishes a garrison at [[Cleenseau]]```
[2023-11-02 05:15 PM] Deciusmus: HTML output.
    Haven't tried it but we'd likely need Python changes to do something with the (taelgardate:: xxx) field
[2023-11-02 05:16 PM] Deciusmus: Reading view render doesn't look awesome:
![[../_discord_assets/image-81882.png]]
[2023-11-02 05:16 PM] rsulfuratus: the reading render might be modifiable in css at least
[2023-11-02 05:17 PM] rsulfuratus: would require python updates
[2023-11-02 05:17 PM] Deciusmus: I was going to go look for CSS examples for fixing the reading render
[2023-11-02 05:18 PM] Deciusmus: I could have the field name by DR
[2023-11-02 05:18 PM] Deciusmus: so you type
    - `[ ]` (DR:: 358)
[2023-11-02 05:18 PM] rsulfuratus: the downside in my mind is that you give up a lot of filtering simplicity by using js instead of the dataview queries themselves
[2023-11-02 05:18 PM] Deciusmus: well, it is really easy to do in dataview tables if you don't mind 2 separate lists
[2023-11-02 05:19 PM] rsulfuratus: the real fancy thing would be to convert years automatically so you could type DR:: xxxx or CY:: xxxx
[2023-11-02 05:19 PM] Deciusmus: one for embedded one for files
[2023-11-02 05:19 PM] rsulfuratus: yeah that's true
[2023-11-02 05:20 PM] Deciusmus: this works fine
[2023-11-02 05:20 PM] Deciusmus: ```dataview
    TASK from #timeline where taelgardate >` date(1718-01-01)
    ```
[2023-11-02 05:20 PM] Deciusmus: 
![[../_discord_assets/image-F433A.png]]
[2023-11-02 05:20 PM] rsulfuratus: right
[2023-11-02 05:21 PM] Deciusmus: same with this
![[../_discord_assets/image-AAB4D.png]]
[2023-11-02 05:21 PM] Deciusmus: ```dataview
    TABLE taelgardate as Date from #timeline where taelgardate >` date(1700-01-01)
    ```
[2023-11-02 05:21 PM] Deciusmus: but I couldn't find a way to merge them without JS
[2023-11-02 05:23 PM] Deciusmus: I mean, maybe just using tasks for everything is best
[2023-11-02 05:23 PM] Deciusmus: 
![[../_discord_assets/image-99595.png]]
[2023-11-02 05:25 PM] Deciusmus: ```dataview
    TABLE tasks.taelgardate as Date, tasks.text as Event from #timeline flatten  file.tasks as tasks where tasks.taelgardate >` date(1700-01-01)
    ```
[2023-11-02 05:26 PM] rsulfuratus: The key thing is that using tasks and a consistent date tagging scheme for embedded timeline information is the best option for grabbing information embedded in notes
[2023-11-02 05:27 PM] Deciusmus: yes
[2023-11-02 05:27 PM] rsulfuratus: I think it makes sense to use DR as a tag, and CY as a tag
[2023-11-02 05:27 PM] rsulfuratus: Perhaps even other calendar schemes
[2023-11-02 05:27 PM] Deciusmus: the other bit I haven't entirely worked out is the easiest way to manage year-only and year-season events
[2023-11-02 05:27 PM] Deciusmus: the date() stuff only works with full dates
[2023-11-02 05:28 PM] rsulfuratus: Hmm
[2023-11-02 05:29 PM] Deciusmus: I mean, again, in JS you could do:
    
    dv.date(t.DR) == undefined ? t.DR : dv.date(t.DR).year
[2023-11-02 05:29 PM] Deciusmus: to get a consistent year
[2023-11-02 05:31 PM] rsulfuratus: Practically speaking I think fast data view queries are probably okay working only on full date stuff
[2023-11-02 05:31 PM] Deciusmus: or you could do:
    
    dv.date(t.DR) == undefined ? dv.date(DateTime.fromISO(t.DR + "-01-01")   : dv.date(t.DR)
[2023-11-02 05:32 PM] Deciusmus: that way, at least, date filters work.
    for display you'd want to display something else
[2023-11-02 05:32 PM] Deciusmus: which is back to JS
[2023-11-02 05:32 PM] rsulfuratus: The two main use cases are having timeline notes that are static in code but dynamic in what they display, and doing things like “what happened in the past month”
[2023-11-02 05:33 PM] rsulfuratus: Even that could be static in code
[2023-11-02 05:33 PM] rsulfuratus: Using fantasy calendar current date
[2023-11-02 05:33 PM] Deciusmus: true
[2023-11-02 05:34 PM] rsulfuratus: Translation to web is going to be a bit complex
[2023-11-02 05:34 PM] Deciusmus: The advantage of JS is you can pull in births/deaths/reign start/etc
[2023-11-02 05:34 PM] Deciusmus: See, I don't think this has that much value on the web
[2023-11-02 05:34 PM] rsulfuratus: That might be true
[2023-11-02 05:34 PM] Deciusmus: Are you thinking you want to generate a web-shareable campaign timeilne from session notes?
[2023-11-02 05:36 PM] rsulfuratus: Probably the reverse - just have a timeline doc but stick some bits of it in relevant session notes
[2023-11-02 05:36 PM] Deciusmus: My current thinking is basically:
    (a) create "event" and "timeline" documents as 'primary sources' (i.e. my campaign timeline or the sembara timeline or whatever)
    (b) sprinkle timeline events in other places, either via complex JS that uses other frontmatter or just dumping tasks in the top of a note
    
    And then I can, if I am making up history somewhere, get everything that happened in the 50 years across the world, for consistency check and inspiration
[2023-11-02 05:37 PM] Deciusmus: The other use case would be "recent campaign events" where I am doing something similar, but on a campaign timeline, so rather than 50 years, I want 3 months
[2023-11-02 05:38 PM] Deciusmus: But my envisioned use is really around exploration and cross checking, rather than sharing, so I'd be happy with mostly hacking dataviewJS and such
[2023-11-02 05:40 PM] rsulfuratus: the consistency check stuff is more important to me than web formatting, so better to design for that
[2023-11-02 05:40 PM] rsulfuratus: if things are tagged properly it should always be possible to add python code to generate markdown pages pulling from timeline tags as desired
[2023-11-02 05:41 PM] rsulfuratus: if I want to get fancy that is probably the place
[2023-11-02 05:41 PM] Deciusmus: So the main web-format change would be to update the python stuff to change:
    
    - `[ ]` (DR:: xxx) or - `[ ]` (CY:: xxx)
    to
    * DR xxx or * CY xxx
[2023-11-02 05:41 PM] rsulfuratus: yeah that should be easy enough
[2023-11-02 05:42 PM] rsulfuratus: i will think a bit. i want to do it in a way that leaves open the possibility of an extension to making nicely formatted markdown timelines to insert / generate for web
[2023-11-02 05:43 PM] rsulfuratus: one question is to we want to use other tagging besides date
[2023-11-02 05:43 PM] Deciusmus: I think it is a pain to tag individual lines in a file with anything more than date
[2023-11-02 05:43 PM] rsulfuratus: it might get a little tedious to have e.g. campaign tags and probably isn't worthwhile
[2023-11-02 05:44 PM] Deciusmus: you can always grab context from the frontmatter of the source file
[2023-11-02 05:45 PM] Deciusmus: i.e. if you wanted to generate a timeline of everything we did in the dunmar campaign but didn't want to include events from my cleenseau timeline, just change the source from `#timeline` to something else
[2023-11-02 05:45 PM] Deciusmus: I don't think it is very common/likely to have a file that has both very-campaign specific events and generic ones
[2023-11-02 05:46 PM] rsulfuratus: Yeah that is probably true
[2023-11-02 05:50 PM] Deciusmus: actually looks like bare years work ok
[2023-11-02 05:50 PM] Deciusmus: no, they dont
[2023-11-02 05:50 PM] Deciusmus: nevermind
[2023-11-02 05:50 PM] rsulfuratus: so to summarize:
    
    * events (whether separate files or tasks) should have a tag, either DR:: or CY:: that indicates date in either Drankorian or Dwarven years
    * files to be processed to grab this information need a tag (I would go with `#event-source` probably because not every file with event information is going to be a #timeline)
[2023-11-02 05:51 PM] rsulfuratus: then we can hack together some dataviewjs to generate summaries / unified timelines, and add some processing to the script to reformat - `[ ]` (DR:: `<date>`) into - DR: date
[2023-11-02 05:53 PM] Deciusmus: yes
[2023-11-02 06:00 PM] Deciusmus: For multi-year or multi-day events, just use DR: start-date and DR_end: end-date?
[2023-11-02 06:02 PM] rsulfuratus: yeah that is probably fine
[2023-11-02 06:02 PM] rsulfuratus: what would use DR-end though?
[2023-11-02 06:02 PM] rsulfuratus: I guess good to future proof
[2023-11-02 06:07 PM] rsulfuratus: do we care about date format? probably yyyy-mm-dd?
[2023-11-02 06:07 PM] rsulfuratus: or yyyy-mm or yyyy
[2023-11-02 06:09 PM] rsulfuratus: and actually I did think of one thing that is very useful to tag - for things that recharge on >` long rest (e.g., eudomes mirror, riswynn's divine inspiration) it is incredibly useful to be able to pull up a list of just the events that are tagged "mirror" or "di" or whatever so I can see the last success / use
[2023-11-02 06:11 PM] rsulfuratus: but of course those would be optional tags
[2023-11-02 06:23 PM] Deciusmus: Dates have to be yyyy or yyyy-mm or yyyy-mm-dd I believe
[2023-11-02 06:24 PM] Deciusmus: For the date functions to work
[2023-11-02 06:54 PM] rsulfuratus: so messing around a bit, a few things:
[2023-11-02 06:57 PM] rsulfuratus: it looks like you can't have secrets or notes in the tasks (well, you can, but dataview doesn't process them). that is if you have:
    `%%`
    - `[ ]` (DR:: 1748-01-01) secret event
    `%%`
    the secret event doesn't look like it will show up
[2023-11-02 06:58 PM] rsulfuratus: the only thing this is a bit annoying for is if I want to, e.g., have chronology sections in NPC notes that will get pulled into a universal timeline, since there may often be secrets in there. there are probably work-arounds, such as just keeping all secret events in a separate file
[2023-11-02 07:00 PM] rsulfuratus: you can do: - `[ ]` (DR:: 1748-01-01) `%%`SECRET secret event`%%`
[2023-11-02 07:00 PM] rsulfuratus: but then it shows up in your query as - `[ ]` (DR:: 1748-01-01)
[2023-11-02 07:02 PM] Deciusmus: Right. I wonder if the Javascript has the full line somewhere just not in text
[2023-11-02 07:15 PM] rsulfuratus: By definition secrets should never be displayed on website so it might not matter too much - I could just have a secret_events.md doc that isn’t shared
[2023-11-02 07:16 PM] rsulfuratus: Right now I have a handful of (mostly now dead) NPCs with long secret chronologies but there is not a clear reason these need to be in the NPC notes
[2023-11-02 07:31 PM] Deciusmus: Right you could even add a dataview to the npc that pulls in that npc secret events as long as it’s not shared
[2023-11-02 07:46 PM] rsulfuratus: What would be cool is to have a dataviewjs template that adds chronology to an npc using regex to match events that have their name
[2023-11-02 07:47 PM] Deciusmus: You could probably do it with back links
[2023-11-02 07:48 PM] Deciusmus: I was thinking the other way around — it would be cool to synthesize events for each npc based on birth/death/whereabouts
[2023-11-02 07:54 PM] rsulfuratus: for worldbuilding the birth / death would be useful, especially for royalty and similar. I was thinking for session planning or even during a session, an NPC chronology would be useful to see at a glance
[2023-11-02 08:07 PM] Deciusmus: turns out you CAN use lists
[2023-11-02 08:08 PM] Deciusmus: TABLE tasks.DR as Date, tasks.text as Event from ``#event-source`` flatten file.lists as tasks where (tasks.DR >` 400) or (tasks.DR.year >` 400)
[2023-11-02 08:08 PM] Deciusmus: file.lists instead of file.tasks
[2023-11-02 08:08 PM] Deciusmus: works perfectly
[2023-11-02 08:12 PM] rsulfuratus: huh, weird it is not documented?
[2023-11-02 08:12 PM] Deciusmus: not really
[2023-11-02 08:13 PM] Deciusmus: the only place I saw it was the bottom of here:
    https://blacksmithgu.github.io/obsidian-dataview/annotation/add-metadata/#inline-fields
[2023-11-02 08:13 PM] Deciusmus: all list items in the file (file.lists and file.tasks)
[2023-11-02 08:18 PM] rsulfuratus: when I run that I get the date in the Date and Event
[2023-11-02 08:23 PM] Deciusmus: what is your source data?
[2023-11-02 08:23 PM] rsulfuratus: ```
    - (DR:: 1749-01-08) `*`(Secret)*: [[Kadmos]] does dastardly things
    ```
[2023-11-02 08:24 PM] rsulfuratus: ```
    TABLE events.DR as Date, events.text as Event from `#event-source`  FLATTEN file.lists as events where (events.DR = 1749) or (events.DR.year = 1749)
    ```
[2023-11-02 08:24 PM] rsulfuratus: 
![[../_discord_assets/image-7AB06.png]]
[2023-11-02 08:24 PM] Deciusmus: ah
[2023-11-02 08:24 PM] Deciusmus: yes
[2023-11-02 08:24 PM] Deciusmus: that is true
[2023-11-02 08:25 PM] Deciusmus: because the "text" includes the whole line
[2023-11-02 08:25 PM] Deciusmus: just get rid of the events.DR as Date bit
[2023-11-02 08:26 PM] rsulfuratus: I am trying to find a way to suppress fields in the table output, since I actually want to keep date in there to sort on, but then not display it, I know there is a way to do this
[2023-11-02 08:28 PM] rsulfuratus: ```
    LIST WITHOUT ID events.text from `#event-source` flatten file.lists as events where (events.DR = 1749) or (events.DR.year = 1749)
    ```
[2023-11-02 08:29 PM] rsulfuratus: that works pretty well actually
[2023-11-02 08:30 PM] Deciusmus: ```dataviewjs
    const yearStart = 0
    const yearEnd = 1719
    
    dv.table(`["Date", "Event", "File"]`, dv.pages("`#event-source`").flatMap(item =>` {
        if (item.file.lists.length == 0 && item.file.frontmatter.DR != null) {
            return `[{year: item.file.frontmatter.DR.year ?? item.file.frontmatter.DR, date: item.file.frontmatter.DR, text: item.file.name, file: item.file.name}]`;
        } else {
            return item.file.lists.where(t =>` t.DR != null).map(t =>` {
                let firstColon = t.text.lastIndexOf(':')
                let realText = firstColon >` 0 ? t.text.substring(firstColon+1) : t.text;
                return {year: t.DR.year ?? t.DR, date: t.DR, file: item.file.name, text: realText};
            })
        }    
    }).where(f=>` (f.year >`= yearStart) && (f.year `<= yearEnd)).sort(f=>`f.date.year ?? f.date).map(f =>` `[f.date, f.text, dv.fileLink(f.file)]`))
    ```
[2023-11-02 08:38 PM] rsulfuratus: ```
    LIST WITHOUT ID events.text from `#event-source` flatten file.lists as events where ((events.DR = 1749) or (events.DR.year = 1749)) AND contains(events.text, this.file.name) sort events.DR
    ```
[2023-11-02 08:38 PM] Deciusmus: that's nice
[2023-11-02 08:38 PM] Deciusmus: gets everything for one npc, right?
[2023-11-02 08:38 PM] rsulfuratus: yeah
[2023-11-02 08:41 PM] rsulfuratus: it doesn't check for links specifically, which on the plus side gets things you forgot to link, but on the minus side doesn't get things that you linked with an alias or other text
[2023-11-02 08:42 PM] Deciusmus: but it won't pick up events in their own files
[2023-11-02 08:43 PM] rsulfuratus: it does
[2023-11-02 08:43 PM] rsulfuratus: using links wouldn't but the text search works fine
[2023-11-02 08:43 PM] Deciusmus: no, I mean it wouldn't pick up a note that doesn't have a list
[2023-11-02 08:43 PM] rsulfuratus: yes, that's correct
[2023-11-02 08:45 PM] rsulfuratus: I think you need to use dataviewjs to combined files and lists
[2023-11-02 08:45 PM] Deciusmus: yeah
[2023-11-02 08:57 PM] Deciusmus: ```dataviewjs
    await dv.view("_scripts/view/get_EventsTable", { yearStart: 100,  yearEnd: 1719, pageFilter: "`#event-source`"} )
    ```
[2023-11-02 08:57 PM] rsulfuratus: ooh that's nice
[2023-11-02 08:57 PM] rsulfuratus: can you have multiple page filters
[2023-11-02 08:57 PM] rsulfuratus: ?
[2023-11-02 08:57 PM] rsulfuratus: fine if not
[2023-11-02 08:58 PM] Deciusmus: its a pass through to 
    https://blacksmithgu.github.io/obsidian-dataview/api/code-reference/#dvpagessource
[2023-11-02 08:58 PM] Deciusmus: so anything that supports
[2023-11-02 08:58 PM] rsulfuratus: oh perfect
[2023-11-02 08:59 PM] Deciusmus: I pushed in case you want to play around
[2023-11-02 09:00 PM] Deciusmus: pageFilter and yearEnd are optional
[2023-11-02 09:00 PM] Deciusmus: if no pageFilter, it uses `#event-source`
[2023-11-02 09:00 PM] Deciusmus: if no yearEnd it uses yearStart
[2023-11-02 09:02 PM] rsulfuratus: sorts by file not by date
[2023-11-02 09:03 PM] Deciusmus: ah
[2023-11-02 09:04 PM] Deciusmus: hrm
[2023-11-02 09:04 PM] Deciusmus: mine is sorted by date but I don't think I have >`1 task file
![[../_discord_assets/image-38A88.png]]
[2023-11-02 09:04 PM] rsulfuratus: i've got great library timeline, mawar timeline, and dunmari frontier timeline and it does file (alphabetical), then date within file
[2023-11-02 09:06 PM] rsulfuratus: actually file may not even be sorted at all
[2023-11-02 09:07 PM] Deciusmus: ok, I see
[2023-11-02 09:07 PM] Deciusmus: it sorts by year
[2023-11-02 09:08 PM] Deciusmus: need to tweak that
[2023-11-02 09:09 PM] Deciusmus: it is hard to get the sorting right with the various ways it parses things
[2023-11-02 09:09 PM] rsulfuratus: it sorts by year, then within year by file, then within file I guess just the order the tasks are listed?
[2023-11-02 09:10 PM] Deciusmus: pushed a fix
[2023-11-02 09:11 PM] Deciusmus: Basically, I was testing with single event file stuff
[2023-11-02 09:11 PM] Deciusmus: not timelines
[2023-11-02 09:11 PM] Deciusmus: but should work now
[2023-11-02 09:12 PM] Deciusmus: I think it still doesn't work with frontmatter (rather than timeline) that isn't a bare year
[2023-11-02 09:13 PM] rsulfuratus: works now
[2023-11-02 09:13 PM] rsulfuratus: works with bare year frontmatter too
[2023-11-02 09:13 PM] rsulfuratus: puts it as the first event of that year
[2023-11-02 09:14 PM] rsulfuratus: 
![[../_discord_assets/image-495C2.png]]
[2023-11-02 09:16 PM] Deciusmus: Yeah bare frontmatter works
[2023-11-02 09:16 PM] Deciusmus: But if you change to 1748-06 it doesn’t work I don’t think
[2023-11-02 09:18 PM] rsulfuratus: obsidian
[2023-11-02 09:18 PM] rsulfuratus: obsidian's file properties management messes things up
[2023-11-02 09:22 PM] rsulfuratus: I think that this `return `[{ year: item.file.frontmatter.DR.year ?? item.file.frontmatter.DR` doesn't work
[2023-11-02 09:22 PM] rsulfuratus: if DR is a date, it works fine, but then you can't have bare years in frontmatter (they get auto-converted to YYYY-01-01)
[2023-11-02 09:23 PM] rsulfuratus: if DR is a number, it works fine but then you can't have YYYY-MM-DD in frontmatter
[2023-11-02 09:24 PM] rsulfuratus: I think the most flexible option is to treat DR as text and handle type conversion in the javascript
[2023-11-02 09:24 PM] rsulfuratus: but it might be simpler to just accept the YYYY-01-01
[2023-11-02 09:24 PM] Deciusmus: I wrote a bunch of date handling js code for whereabouts
[2023-11-02 09:25 PM] Deciusmus: And birth/death years
[2023-11-02 09:25 PM] Deciusmus: It is probably not bad to handle in JavaScript
[2023-11-02 09:28 PM] Deciusmus: A few other ideas…
    Might be cool to grab location.
[2023-11-02 09:28 PM] Deciusmus: Easy on linked notes, harder on timelines
[2023-11-02 09:28 PM] rsulfuratus: looking at the whereabouts code the other advantage is we don't have to use earth months if we don't want to
[2023-11-02 09:29 PM] rsulfuratus: e.g. could generate display date using fantasy calendar api
[2023-11-02 09:29 PM] Deciusmus: Yeah probably that’s a lot nicer
[2023-11-02 09:31 PM] rsulfuratus: we dont have a standardized tag for location
[2023-11-02 09:31 PM] Deciusmus: I think outside of events it’s not important but for event sources I suggest location:
[2023-11-02 09:32 PM] Deciusmus: Although I guess what do we use for whereabouts? It’s 2 parts right?
[2023-11-02 09:32 PM] rsulfuratus: two parts, freeform text
[2023-11-02 09:33 PM] rsulfuratus: its linked if it matches a note, otherwise not
[2023-11-02 09:33 PM] rsulfuratus: events are tricker. someone is always born in a specific spot
[2023-11-02 09:34 PM] rsulfuratus: but e.g. The Great War is pretty much a worldwide event
[2023-11-02 09:38 PM] Deciusmus: Good point
[2023-11-02 09:39 PM] Deciusmus: That said it might be nice to have things tagged with a high level region which could always be Taelgar
[2023-11-02 09:39 PM] rsulfuratus: yeah, that could work
[2023-11-02 09:39 PM] Deciusmus: That way you can pull it from front matter even for most campaign stuff
[2023-11-02 09:40 PM] Deciusmus: Rather than trying to have specific items have a location
[2023-11-02 09:40 PM] rsulfuratus: the pageFilter doesn't work with folders, btw, probably having to do with how `"` are passed

