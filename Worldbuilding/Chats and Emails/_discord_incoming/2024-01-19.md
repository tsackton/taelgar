# Discord DM â€“ 2024-01-19

[2024-01-19 02:37 PM] rsulfuratus: auto-generating session note summaries with chatgpt API:
    ```json
    session 1:
    {
      "tagline": "In which the Dunmar Fellowship defends Karawa",
      "summary": `[
        "The Dunmar Fellowship fights off giant hyenas attacking the village of Karawa, saving all villagers.",
        "Seeker, Wellby Goodbarrel, Kenzo, and Delwath collaborate in battle, with assistance from a divine woman named Beli.",
        "Post-battle, leaders Speaker Candrosa and Elder Kisa discuss past attacks with the heroes, suspecting a larger threat.",
        "The Fellowship tracks the beasts into the desert, losing their trail amidst box canyons and rocky terrain.",
        "Wellby uses a grappling hook to survey the land and spots a dust cloud on the old trade road.",
        "They meet Alesh, a Dunmari scout, who recalls a decade of relative safety from the Nashtkar threatening Karawa.",
        "Following the trail to Gomat oasis, they encounter three large lizards feasting on dead sheep upon arrival."
      ]`,
      "people": `[
        "Seeker",
        "Wellby Goodbarrel",
        "Kenzo",
        "Delwath",
        "Beli",
        "Badya",
        "Candrosa",
        "Kisa",
        "Alesh",
        "Akan"
      ]`,
      "places": `[
        "Taelgar",
        "Karawa",
        "Gomat",
        "Shakun Mystai",
        "Dunmar",
        "Nashtkar"
      ]`
    }
    ```
[2024-01-19 02:39 PM] Deciusmus: interesting... but waht's the goal? to backlink people?
[2024-01-19 02:39 PM] rsulfuratus: the people thing is was just messing around to see if chatgpt could distinguish people and places
[2024-01-19 02:39 PM] rsulfuratus: the goal is to add tagline and summary to the markdown for each session note
[2024-01-19 02:40 PM] Deciusmus: so you can auto-gen an index or something?
[2024-01-19 02:40 PM] rsulfuratus: for the taglines yes but mostly to literally update the markdown so I can automatically reformat the old session notes into the new format
[2024-01-19 02:41 PM] Deciusmus: ah
[2024-01-19 02:41 PM] rsulfuratus: e.g. https://tsackton.github.io/taelgarverse/campaigns/dunmari-frontier/session-notes/session-2-dufr/
[2024-01-19 02:41 PM] rsulfuratus: vs
[2024-01-19 02:41 PM] rsulfuratus: https://tsackton.github.io/taelgarverse/campaigns/dunmari-frontier/session-notes/session-83-dufr/
[2024-01-19 02:42 PM] rsulfuratus: the people thing though might be useful for automatic campaign info generation, e.g. to get an "interaction" line for each NPC
[2024-01-19 03:05 PM] Deciusmus: btw, did you get my run.py thing working? on windows at least it seems to always run the taelgarverse export script before I exit obisidian
[2024-01-19 03:08 PM] rsulfuratus: yes, I got it working. look in my taelgarverse repo
[2024-01-19 03:08 PM] rsulfuratus: i needed to give obsidian time to start before hitting the while loop
[2024-01-19 03:09 PM] rsulfuratus: add time.sleep(10) or time.sleep(20) as needed
[2024-01-19 03:09 PM] rsulfuratus: before while, after subprocess.Popen
[2024-01-19 03:10 PM] rsulfuratus: btw:
    - {type: away, start: 1748-07-13, end: 1748-07-13, location: Tokra}
    - {type: away, start: 1748-07-14, end: 1748-07-14, location: Giant Tree in Tokra}
    - {type: away, start: 1748-07-15, end: 1748-07-15, location: Tokra}
    - {type: away, start: 1748-07-16, end: 1748-07-18, location: Traveling (from Tokra to Crossroads Caravanserai)}
    
    autogenerated party whereabouts lines from session notes by chatgpt
[2024-01-19 03:10 PM] Deciusmus: thats pretty good
[2024-01-19 03:13 PM] rsulfuratus: autogenerated NPC whereabouts from same session notes:
    - person: Seeker, whereabouts: {type: away, start: 1748-07-13, end: 1748-07-18, location: From Tokra to Crossroads Caravanserai}
    - person: Kenzo, whereabouts: {type: away, start: 1748-07-13, end: 1748-07-18, location: From Tokra to Crossroads Caravanserai}
    - person: Rishi, whereabouts: {type: away, start: 1748-07-14, end: 1748-07-14, location: Tokra}
    - person: Basu, whereabouts: {type: away, start: 1748-07-15, end: 1748-07-15, location: Tokra}
    - person: Delwath, whereabouts: {type: away, start: 1748-07-13, end: 1748-07-18, location: From Tokra to Crossroads Caravanserai}
    - person: Johar, whereabouts: {type: away, start: 1748-07-16, end: 1748-07-18, location: Traveling with the party from Tokra to Crossroads Caravanserai}
    - person: Alton Greenleaf, whereabouts: {type: away, start: 1748-07-18, end: 1748-07-18, location: Crossroads Caravanserai}
    - person: Lyle Greenleaf, whereabouts: {type: away, start: 1748-07-18, end: 1748-07-18, location: Crossroads Caravanserai}
    - person: Marcella, whereabouts: {type: away, start: 1748-07-18, end: 1748-07-18, location: Crossroads Caravanserai}
    - person: Drusa, whereabouts: {type: away, start: 1748-07-18, end: 1748-07-18, location: Tokra (mentioned)}
[2024-01-19 03:14 PM] rsulfuratus: also like shockingly good
[2024-01-19 03:14 PM] rsulfuratus: obviously doesn't know that Tokra is the home location of some people but that could be cleaned up in python
[2024-01-19 03:20 PM] rsulfuratus: not quite as good but pretty close:
    ```
    - person: Rishi, campaignInfo: {campaign: dufr, date: 1748-07-14, type: Gave branch to}
    - person: Basu, campaignInfo: {campaign: dufr, date: 1748-07-15, type: Gave Portable Hole to}
    - person: Johar, campaignInfo: {campaign: dufr, date: 1748-07-16 to 1748-07-18, type: Escorted by}
    - person: Alton Greenleaf, campaignInfo: {campaign: dufr, date: 1748-07-18, type: Shared news with}
    - person: Lyle Greenleaf, campaignInfo: {campaign: dufr, date: 1748-07-18, type: Shared news with}
    - person: Marcella, campaignInfo: {campaign: dufr, date: 1748-07-18, type: Exchanged stories with}
    - person: Drusa, campaignInfo: {campaign: dufr, date: 1748-07-18, type: Mentioned by}
    ```
[2024-01-19 03:20 PM] Deciusmus: whether having hundreds of interaction lines is worthwhile is a different question, but that is pretty cool
[2024-01-19 03:21 PM] Deciusmus: what is the easiest way to change the homepage.css for my version?
[2024-01-19 03:22 PM] rsulfuratus: what do you want to change?
[2024-01-19 03:22 PM] Deciusmus: set the height to 40vh instead of 70
[2024-01-19 03:22 PM] rsulfuratus: ah, you mean file management
[2024-01-19 03:22 PM] Deciusmus: right; I know the changes I want to make the css, I'm just not sure the easiest way to do it
[2024-01-19 03:23 PM] Deciusmus: if I make an overrides/stylesheets/homepage.css will the export_vault overwrite it with yours?
[2024-01-19 03:23 PM] rsulfuratus: probably just set the css extras path in the website.json to something other than the taelgarverse-site-generator folder
[2024-01-19 03:23 PM] Deciusmus: do I need to make a homepage_mike or something
[2024-01-19 03:23 PM] rsulfuratus: export_vault copies stylesheets and logos/site images to docs, doesn't touch overrides
[2024-01-19 03:24 PM] rsulfuratus: since docs is usually autodeleted you need to store them outside of docs somewhere
[2024-01-19 03:24 PM] rsulfuratus: there is a path in the json
[2024-01-19 03:24 PM] Deciusmus: right ok, so in theory mkdoc will copy overrides to the same location and overwrite the version from export vault
[2024-01-19 03:24 PM] Deciusmus: right but I don't want to NOT copy the files from site-gen as I want everything else
[2024-01-19 03:25 PM] rsulfuratus: then you could just make homepage_mike.css and change your mkdocs.yml to replace homepage.css with homepage_mike.css
[2024-01-19 03:26 PM] rsulfuratus: or you could just copy the css to a new directory in your taelgarverse1720 repo, and set that as the base for your website.json
[2024-01-19 03:26 PM] rsulfuratus: you have to manually manage overrides, they are not touched by export_vault at all
[2024-01-19 03:27 PM] rsulfuratus: so you'll have to manually copy the new home.html and toc.html partials to the correct directories in your website repo
[2024-01-19 03:32 PM] Deciusmus: right, but mkdocs copies overrides to docs during the build process
[2024-01-19 03:33 PM] Deciusmus: so the easiest thing to do is:
    * add custom css to overrides\assets\stylesheets\homepage_custom.css
    * change mkdocs.yaml to remove the stylesheets\homepage.css and add the assets\stylesheets\homepage_custom.css
[2024-01-19 03:34 PM] rsulfuratus: i am not using overrides css at all
[2024-01-19 03:34 PM] rsulfuratus: everything is in extra
[2024-01-19 03:34 PM] Deciusmus: same thing
[2024-01-19 03:34 PM] Deciusmus: extra_css: in the mkdocs yaml defines the CSS files to include in the built html as links
[2024-01-19 03:34 PM] Deciusmus: overrides is just a file copy
[2024-01-19 03:34 PM] Deciusmus: it replaces whatever files are in the "main" theme
[2024-01-19 03:35 PM] Deciusmus: but it *adds* as well as replaces
[2024-01-19 03:35 PM] Deciusmus: so if you have a CSS in overrides\assets\stylesheets, AND you add it to extra_css, it ends up being used
[2024-01-19 03:35 PM] Deciusmus: OR alternatively, if wanted to completely replace something from the theme, you just need to have the same filename in overrides
[2024-01-19 03:37 PM] rsulfuratus: the way things are currently set up:
    - export_vault.py copies everything in `css_extras_source` to `docs/css_extras_dest`, and also everything in `site_images_source` to `docs/site_images_dest`
    - anything in `custom_dir: (dir name)` is not touched at all by export_vault.py
[2024-01-19 03:37 PM] Deciusmus: So conceptually, the right way to split this would be to move homepage.css and styling.css from taelgarverse-site-gen to your taelgarverse\overrides\assets\stylesheets and then change your mkdocs.yml
[2024-01-19 03:38 PM] Deciusmus: but it doesn't super matter as it is easy enough to ignore the CSS files I don't want
[2024-01-19 03:38 PM] rsulfuratus: i don't understand why that would be better
[2024-01-19 03:38 PM] rsulfuratus: also what would you change in the mkdocs?
[2024-01-19 03:38 PM] Deciusmus: extra_css:
      - stylesheets/leaflet.css
      - stylesheets/taelgarverse.css
      - assets/stylesheets/homepage_custom.css
      - stylesheets/styling.css
[2024-01-19 03:39 PM] Deciusmus: assets/stylesheets/homepage.css instead of stylesheets/homepage.css
[2024-01-19 03:39 PM] rsulfuratus: that is not how the mkdocs documents describe how to set up extra style sheets
[2024-01-19 03:39 PM] Deciusmus: it is better just because it clarifies the split between "core taelgarvers" and "this instance of taelgarvers"
[2024-01-19 03:39 PM] Deciusmus: ```
    extra_css:
      - stylesheets/leaflet.css
      - stylesheets/taelgarverse.css
      - assets/stylesheets/homepage_custom.css
      - stylesheets/styling.css
    ```
[2024-01-19 03:40 PM] Deciusmus: to be clear
[2024-01-19 03:40 PM] Deciusmus: the assets/stylesheets/homepage_custom.css is just because that is where the mkdocs build process copies the assets during site build
[2024-01-19 03:41 PM] Deciusmus: after I run mkdocs build I have this:
![[../_discord_assets/image-E8EDF.png]]
[2024-01-19 03:41 PM] Deciusmus: the mkdocs documentation is a bit confusing because it doesn't make clear you can mix extra_css and override_css to your heart's content
[2024-01-19 03:41 PM] Deciusmus: but you can, it is instrinic to the way override works
[2024-01-19 03:42 PM] Deciusmus: I also have this:
![[../_discord_assets/image-5361A.png]]
[2024-01-19 03:42 PM] rsulfuratus: you can, but the philosophy of the documentation is that overrides overrides something and css_extra adds something
[2024-01-19 03:42 PM] Deciusmus: right but the override is useful for adding as well
[2024-01-19 03:43 PM] Deciusmus: there is no reason not to use override to cause something to be copied into the final output dir
[2024-01-19 03:43 PM] Deciusmus: in the "normal" case the mkdocs folks would basically say, don't bother. Why are you putting someting in overrides when you could instead just put it in docs\assets\stylesheets directly
[2024-01-19 03:43 PM] Deciusmus: but the point here is that because we are auto-generating docs\ and therefore deleting it before building it, we can't store anything in docs
[2024-01-19 03:44 PM] Deciusmus: so in theory you could invent yet-another-way to copy files from `<somewhere>` to docs\`<somewhere>` but overrides already does that for free, so it is a lot easier to do that than invent something else
[2024-01-19 03:44 PM] rsulfuratus: right so a perfectly fine build process would be to just use overrides and don't use the export_vault copy process at all
[2024-01-19 03:44 PM] Deciusmus: right but then you can't share stuff
[2024-01-19 03:45 PM] Deciusmus: see, I want to be able to distinguish between
    (a) the stuff I want from taelgarverse-site-gen
    (b) the stuff I don't want from taelgarverse-site-gen
[2024-01-19 03:45 PM] rsulfuratus: i mean you can copy whatever you want
[2024-01-19 03:45 PM] Deciusmus: Given it is reorganized by file, it is fairly meaningless, because I can copy everything and then use extra_css to control what I __se__
[2024-01-19 03:45 PM] Deciusmus: use
[2024-01-19 03:45 PM] rsulfuratus: there is no reason to use an automated copy process
[2024-01-19 03:45 PM] Deciusmus: well export_vault.py already exists
[2024-01-19 03:46 PM] Deciusmus: and is an automated copy process
[2024-01-19 03:46 PM] rsulfuratus: right but i'm saying don't. there is no point in an automated process to copy files to a directory that isn't managed by export_vault.py
[2024-01-19 03:46 PM] Deciusmus: I think you are missing my point
[2024-01-19 03:46 PM] Deciusmus: although it doesn't matter very much
[2024-01-19 03:47 PM] Deciusmus: what I am trying to say is that if you make a change in taelgarverse.css I want to get that change automatically without having to think about it
[2024-01-19 03:47 PM] Deciusmus: whereas if you make a changein homepage.css I want to ignore it
[2024-01-19 03:47 PM] rsulfuratus: ah, okay. i guess i don't want to apply css changes automatically ever
[2024-01-19 03:48 PM] Deciusmus: but your workflow does in fact apply them automatically
[2024-01-19 03:48 PM] Deciusmus: in fact, it can't not, right?
[2024-01-19 03:48 PM] Deciusmus: i.e. if I push a change to leaflet.css to taelgarverse-site-gen you get it automatically
[2024-01-19 03:48 PM] Deciusmus: similarly, if I (accidentally) pushed a change to homepage.css in taeglarverse-site-gen, you would also get it automatically
[2024-01-19 03:48 PM] rsulfuratus: only because i didn't realize that overrides/assets/stylesheets works
[2024-01-19 03:49 PM] rsulfuratus: my refactor would be to completely drop all css and site image management from export vault and instead put it all in overrides
[2024-01-19 03:49 PM] Deciusmus: See, I don't like that
[2024-01-19 03:49 PM] rsulfuratus: if you are fiddling with leaflet I don't want all your changes until they actually work
[2024-01-19 03:49 PM] Deciusmus: Because what if I decide it would be useful to change the Javascript to use ext-summary-box instead of ext-one-column
[2024-01-19 03:49 PM] Deciusmus: then I break you
[2024-01-19 03:50 PM] Deciusmus: But I mean, we are not a big team ðŸ™‚
[2024-01-19 03:50 PM] Deciusmus: it is easy to just communicate about that
[2024-01-19 03:50 PM] Deciusmus: and treat the shared stuff as a template not auto-copied
[2024-01-19 03:51 PM] rsulfuratus: right i mean we already face that problem because you have to change mkdocs.yml in some cases
[2024-01-19 03:52 PM] Deciusmus: right

