# Display Control
*last update: Dec 15th 2025*

## Overview of Display Generation

Display strings for headers and related lines are built in three layers:

1. **Data selection**
	- The relevant script (e.g., `get_Whereabouts`, `get_Affiliations`, `get_PageDatedValues`, `EventManager.getPartyMeeting`) pulls the necessary data:
		- Page dates via `DateManager.getPageDates`.
		- Whereabouts via `WhereaboutsManager.getWhereabouts`.
		- Affiliations via `AffiliationManager.getAffiliations` / `getFormattedNonPrimaryAffiliations`.
		- Campaign interactions via `campaignInfo` and `EventManager.getPartyMeeting`.
	- These scripts compute “derived” objects (e.g., `origin`, `current`, `lastKnown` for whereabouts; grouped affiliation records; per‑campaign meeting records).

2. **DisplayDefaults resolution**
	- For any page, `NameManager.getDisplayData(frontmatter)` merges three layers of defaults:
		1. `requiredDisplayDefaults` from `.obsidian/metadata.json` – a global baseline that applies to all pages.
		2. `typeDisplayDefaults[pageType]` – overrides for the page’s computed type (`person`, `place`, `event`, etc.).
		3. `displayDefaults` in the page frontmatter – page‑specific overrides.
	- These merged `displayDefaults` control:
		- Which lines are present in the header (e.g., `wOrigin`, `wHome`, `wCurrent`, `wParty`, `a*`, `d*`).
		- How those lines are phrased using substitution tokens (e.g. `<home:3Frq>`, `<startDate>`, `<affiliationtitle:tx>`).
		- Global style options for the page (e.g., `defArt`, `indefArt`, `linkText`, `ruledBy`, `boxName`, `boxInfo`).

3. **Template expansion with tokens**
	- Once data and displayDefaults are known, each line is built from a template string using `TokenParser.formatDisplayString`.
		- The template is any string containing `<token>` or `<(prefix)token:format(suffix)>` constructs.
		- `TokenParser`:
			- Scans the string for tokens using a regex.
			- For each token:
				- Parses its `token` name, optional filter/format specifiers, and optional prefix/suffix.
				- Computes the token’s value from:
					- Page frontmatter (for most tokens).
					- Derived data (dates, whereabouts, affiliations, campaignInfo).
					- NameManager (for names and location chains).
				- Applies filter/format rules (depth, type filters, casing, linking, prepositions, articles).
				- Inserts prefixes/suffixes **only if** the token resolved to a non‑empty value.
			- Reassembles the final string with all tokens replaced.

The same token/parsing system is used everywhere displayDefaults appear:

- Global displayDefaults from `.obsidian/metadata.json`.
- Per‑page `displayDefaults` frontmatter.
- Per‑whereabout overrides (`format`, `wCurrent`, `wLastKnown`, etc.).
- Per‑affiliation overrides (`format`, `formatPast`, `formatCurrent`, `a*` on that line).
- Per‑campaignInfo overrides (`format`, `wParty` on the entry).

## Token Reference

The following substitution tokens can be used in display defaults to substitute data from the frontmatter. Note that in all cases, the code attempts to handle missing data 'correctly', i.e. a line like: `<ancestry> <species> of <primary>` will strip the "of" if there is no primary. This code is not massively tested, so bug reports of failure to strip correctly is appreciated. 

All tokens are case‑insensitive; the token name is lower‑cased before resolving, so `<TypeOf>`, `<typeof>`, and `<TYPEOF>` behave the same.

### Core Tokens

These are available in any display string that has access to the page frontmatter:

- `name`: The page’s display name as generated by `NameManager.getName`:
	- Uses `name`, `title`, and `aliases` from frontmatter, plus `defArt`/`indefArt`.
	- Respects link targets and aliasing (via `getFileForTarget`).
	- Obeys format specifiers for linking, casing, prepositions, and articles.
- `pronunciation`: The page’s `pronunciation` string (if any).
- `pronouns`: Pronouns derived from `gender` or explicitly set in `pronouns`.
* `typeof` or `type` or `maintype`: the page type. This is either the actual `typeOf` or `species` from the frontmatter, or a calculated value based on tags. The calculated value is the first subtag of a `place`, `person`, `item`, or `organization` tag, or the main tag if there are no subtags. i.e. `place\river`  generates a river typeOf, whereas `place` generates a place typeOf. If there is a `typeOfAlias` or `speciesAlias` in the front matter, that is used as the display value
* `subtypeof` or `subtype`:  the `subTypeOf` metadata element; if there is a `subTypeOfAlias` present, that is used instead. 
- Any frontmatter key: any other field in frontmatter (e.g. `subspecies`, `species`, `ancestry`) can be used directly as `<subspecies>`, `<ancestry>`, etc.

### Whereabouts and Date Tokens

These tokens depend on whereabouts and page‑level dates:

- `current`: The page’s current whereabouts location chain at the target date; if none, “unknown”. Uses the full chain logic from `WhereaboutsManager`.
- `home`: The home whereabouts location chain.
- `origin`: The origin whereabouts location chain (first valid `home`, based on `born`/`created`/`0001`).
- `lastKnown`: The last known whereabouts chain; falls back to `current` if there is no earlier ended location.
- `lastknowndate`: The date of the last known whereabout, or the current date if there is no last known whereabout; “Unknown” if no date exists.
- `currentdate` / `targetdate` / `target`: The *target date* supplied to the formatter:
	- Usually the current in‑world date (via Fantasy Calendar / Calendarium).
	- When formatting campaignInfo, it is the campaignInfo `date`.
- `startdate`: Page start date (from `born` / `created` / DR when appropriate); uses the display value of the date; blank if not set or hidden (`0001`).
- `enddate`: Page end date (from `died` / `destroyed` / DR_end / DR for events); uses the display value; blank if not set or hidden (`9999`).
- `start`: The “startStatus” from displayDefaults (e.g., “born”, “created”, “founded”); used as a label only.
- `end`: The “endStatus” from displayDefaults (e.g., “died”, “destroyed”, “ended in”).
- `age` / `length`: Numeric duration between start and end (in years), based on normalized dates and the target date:
	- For living pages, `length` is the current age.
	- For ended pages, `length` is the lifespan or duration.
	- Blank if it cannot be calculated (e.g. missing/bad dates).

### Specially Formatted Tokens

- `ka`: The “ka” value for elves; “unknown” if species is `elf` and no `ka`, blank otherwise.
- `population`: Population from frontmatter, rendered as `pop. N` if numeric, or as‑is if non‑numeric.
- `partof`: The `partOf` value from frontmatter:
	- For non‑places, this can follow a chain via `AffiliationManager.#getPartOfChain`.
	- For places, `partOf` is treated as a whereabouts alias and generally terminates the chain. (**Depreciated**)

### CampaignInfo Tokens

Used  in `wParty` and per‑entry `format` / `wParty` strings:

- `met`: The `type` from the campaignInfo entry (e.g., `met`, `killed`, `freed`, `attended his lecture`), lower‑cased unless modified by format specifiers.
- `person`: The actor for this entry:
	- `person` from the campaignInfo line if set.
	- Otherwise, the campaign prefix (e.g. `DuFr`), resolved as a name via NameManager (often a party page).

The target date for these lines is the campaignInfo `date`, so `current`, `target`, and date tokens refer to that interaction date.

### Affiliation Tokens

Used by `a*` lines and per‑affiliation formats, as well as `ruledBy`. 

- `affiliationtitle`: The resolved `title` for the affiliation group (e.g., `Captain`, `Lord`, `Proprietor`).
- `affiliations` / `org`: The *group* of affiliations that share identical `title`, `startDate`, `endDate`, rendered as a combined org list (`a, b, and c`).
- `primary`: A comma‑separated list of primary affiliations (from `AffiliationManager.getPrimaryAffiliations`), rendered as `affiliation, affiliation, and affiliation`.

For these lines, `startdate`, `enddate`, and `age` refer to the affiliation’s dates, not the page’s own dates.

---

## Format Specifiers, Prefixes, and Suffixes

Format specifiers, prefixes, and suffixes allow fine control over how each token’s value is rendered.

### Basic token syntax

Tokens have the general form:

- `<token>`
- `<token:filterAndFormat>`
- `<(prefix)token(suffix)>`
- `<(prefix)token:filter;format;firstFormat(suffix)>`

Where:

- `token` is a name like `name`, `current`, `primary`, `met`, etc.
- `filter` controls how *location chains* are built (for `current`, `home`, `origin`, `lastKnown`).
- `format` controls casing, linking, prepositions, and articles for the *value* of the token.
- `firstFormat` is an optional “first element only” format override for chain tokens (applied only to the first item in the chain).
- `prefix` and `suffix` are literal strings (no nested tokens) applied conditionally.

### Prefixes and suffixes

- Syntax: `<(prefix)token(suffix)>` or `<(prefix)token:format(suffix)>`.
- If the token resolves to a non‑empty result, the `prefix` and `suffix` are prepended/appended.
- If the token resolves to empty (e.g., `<primary>` when there are no primary affiliations), the prefix and suffix are **not** applied.
- Allowed characters in prefix/suffix: `A–Z, a–z, space, colon (:), parentheses, hyphen (-)`.

This allows patterns like:

- `<(of )primary>` – “of X” only if `<primary>` is non‑empty.
- `<(since )startDate>` – “since 1742” only if `startDate` exists.

### Filter vs. format vs. firstFormat

Internally, the parser splits the string after `:` into up to three segments separated by `;`:

- One part: `token:fsu` → characters are interpreted as both filter and format:
	- Characters that are in the *filter* set become the filter (e.g., `2r` → depth 2, exclude regions).
	- Characters that are in the *format* set become the format (e.g., `uq` → upper‑case first, include preposition).
- Two parts:
	- `token:filter;format` if the first part is purely filter characters.
	- `token:format;firstFormat` if the first part is purely format characters.
- Three parts: `token:filter;format;firstFormat`.

The parser deduplicates characters inside each of `filter`, `format`, and `firstFormat`.

### Location Chain Characters

Filter characters (and depth numbers) only apply to *chain tokens* (`current`, `home`, `origin`, `lastKnown`, and `secondary`), and define which parts of the location chain to include:

- Depth:
	- A leading number or range `X-Y` defines the depth:
		- `3` or `-3` → up to 3 elements from the start of the chain.
		- `2-4` → include elements 2 through 4.
		- `2-` → from element 2 to the end.
	- `F` → “first element only” (equivalent to depth 1).
	- `f` → “exclude first element” (equivalent to depth `2-`).
- Type filters:
	- `R` / `r`: only regions / exclude regions.
	- `L` / `l`: only locations / exclude locations.
	- `P` / `p`: only people / exclude people.
	- `I` / `i`: only items / exclude items.
	- `O` / `o`: only organizations / exclude organizations.

For each potential hop in the chain, the filter logic decides:

- Whether to **include** that hop in the rendered chain.
- Whether to **continue** traversing beyond that hop.
- Whether to increment depth for that hop.

The special `!` is used to force a displayDefault format over a per‑whereabout setting (see below). 

### Format Characters 

Format characters control the rendering of names and other string tokens. 

- Casing:
	- `t`: title case (words like “of”, “the”, etc. are lower‑cased unless first).
	- `s`: all lower case.
	- `u`: initial upper case (first character of the formatted string).
	- `U`: conditional initial upper (treated as `u` for the first token in a string, then removed).
- Articles and prepositions:
	- `a`: add an indefinite article (a/an) before the name.
	- `A`: conditional indefinite article (treated as `a` for the first token in a string, then removed).
	- `x`: exclude definite article entirely (even if `defArt` would normally supply one).
	- `q`: include prepositions (e.g., “in”, “at”, “by”) based on `linkText` and `lt*` displayDefaults.
	- `Q`: explicitly suppress prepositions, even if they would normally be included.
	- `v`: always include prepositions (a stronger form of `q`).
- Linking:
	- `n`: never link (render as plain text).
	- `y`: always link, even if the link target is unknown, unless blocked by heuristics.
		- There are safety checks to avoid linking trivial words or fragments like “of” or “in”.

If no format is given:

- Casing is preserved as generated.
- Articles are derived from `defArt`/`indefArt` logic.
- Linking occurs only if a target exists (normal wiki‑link behavior).

### Precedence Overrides

The `!` character is used in displayDefaults to force the filter/format supplied in displayDefaults to override per-whereabout `format`:

```yaml
displayDefaults: {wHome: "<home:5!>"}
whereabouts:
  - {type: home, location: place, format: "2"}
```

This will render the home chain to depth 5, ignoring the `format: "2"` depth on that whereabout line.

---
## displayDefaults

DisplayDefaults control *what* lines are produced and *how* they are phrased, per page type and per page. They are a JSON‑like object merged from three layers:

1. `requiredDisplayDefaults` in `.obsidian/metadata.json` (global baseline).
2. `typeDisplayDefaults[pageType]` in `.obsidian/metadata.json` (per‑type overrides).
3. `displayDefaults` in the page’s frontmatter (per‑page overrides).
4.  Individual `whereabouts`, `affiliation`, or `campaignInfo` entries (per‑line overrides, apply only when that line is used for display).

`NameManager.getDisplayData(frontmatter)` performs this merge in that order, so later sources overwrite earlier ones.

### Configuration

These keys behave primarily as labels or configuration flags rather than full “template lines”:

`startStatus`  
- Label for the start of the page’s existence (`born`, `created`, `founded`, `started in`, etc.).  
- Used by the `<start>` token and in date templates (`dCurrent`, `dPastHasStart`, `dPast`).

`endStatus`  
- Label for the end of the page’s existence (`died`, `destroyed`, `ended in`).  
- Used by the `<end>` token and in date templates.

`boxName`  
- Label for the info callout in the header (e.g. `Information`, `Biographical Info`, `Summary`).

`linkText`  
- Default preposition/connector for `<name:q>` / `<name:v>` when no type‑specific `lt*` is provided.

`ltPlace`, `ltPerson`, `ltItem`, `ltOrg`  
- Type‑specific link/preposition overrides used by `NameManager.#getLinkText` when forming `<name:q>` tokens:
- Examples: `"in"` for places, `"by"` for authors, `"owned by"` for items, `"part of"` for orgs.

`mechanicsLink`  
- Label for mechanics/rules links (e.g. `"Character Sheet"` for PCs, `"Mechanics"` for items).  
- If blank or absent, no mechanics link is rendered.

`defArt`  
- Controls the definite article (`"the"`) used for page names:
- If **absent**, `NameManager` derives it: multi‑word capitalized names → `"the"`; others → `""`.
- If present but `""`, no definite article is ever used; if present and non‑empty, that exact string is used.

`indefArt`  
- Controls the indefinite article (`"a"` / `"an"`) for page names:
- If **absent**, `NameManager` derives `"a"` or `"an"` based on the name (with a special case for `"uni…"`)  
- If present (even if `""`), that value is used.

`prep` 
- Defines the preposition to use when generating location chains for this page if the format `q` is specified

These configuration keys influence how tokens like `<start>`, `<end>`, `<name>`, `<name:a>`, and `<name:q>` behave, and how certain lines are switched on/off, but they are not standalone header lines.

### Dates

These keys are full templates used to render the “date” line for a page, based on `DateManager.getPageDates`. All templates parsed by `DateManager` start with `d`:

`dCurrent`: Template when the page is “alive” at the target date.  
`dPastHasStart`: Template when the page has ended and has a displayable start date.  
`dPast`: Template when the page has ended but no start date is displayable.  
  
These templates use `startStatus`/`endStatus` and the date tokens (`startDate`, `endDate`, `age` / `length`).

---
### Whereabouts

These keys are templates used by `WhereaboutsManager` and the whereabouts view to turn derived whereabouts (`origin`, `home`, `current`, `lastKnown`, `secondary`) into lines. All templates parsed by `WhereaboutsManager` start with `w`:

`wOrigin`: Template for the origin whereabouts if it differs from `home`.  
`wOriginU`: Template when the origin whereabouts is unknown.
`wHome`: Template for the home whereabouts of a living page.  
`wHomeU`: Template when home is unknown for a living page.
`wPastHome`: Template for home on a page that is in the past (died/destroyed).
`wPastHomeU`: Template for unknown home when the page is in the past.
`wCurrent`: Template for current whereabouts (at the header’s target date).  
`wPast`: Template for “past current” location when the page is in the past.  
`wLastKnown`: Template for last known whereabouts when a date is available.  
`wLastNoDate`: Template for last known whereabouts when there is no date.  
`wSecondary`: Optional template for “secondary” whereabouts chains (secondary contexts like watersheds or parent planes).  

Per‑whereabout overrides (e.g., a specific line’s `wCurrent` or `wLastKnown`) are only used when that derived whereabout (`current`, `home`, `origin`, `lastKnown`, `secondary`) comes from that particular line.

---

### Affiliations

These keys are templates used by `AffiliationManager.getFormattedNonPrimaryAffiliations` (and related code) to render affiliation lines. Most templates parsed by `AffiliationManager` start with `a`:

`aNoDate`: Affiliation with no start/end dates.  
`aPast`: Ended affiliation with an end date but no displayable start date.  
`aCurrent`: Current affiliation with a start date.  
`aPastHasStart`: Ended affiliation with both start and end dates.  
`ruledBy`: Template for “Ruled by / Led by” lines, used mainly on places and organizations; filled using `AffiliationManager.getLeadBy`, which looks for `type: leader` affiliations whose `org` matches the target.

These are *global* defaults. Per‑affiliation overrides (`format`, `formatPast`, `formatCurrent`, or the legacy `a*` keys on that line) win over these defaults for a given group.

---
### CampaignInfo

These keys are templates for party‑meeting lines driven by `campaignInfo`:

`wParty`: Template for campaign interactions, used by `EventManager.getPartyMeeting`. Global baseline: `<met:u> <person:q> on <target> <current:3Frq>`  

Per‑entry overrides in `campaignInfo`, using `format`, replace the defaults. 

**Known campaign codes (as of 2025‑12‑10)**:
*(these will properly link to appropriate party pages when used in campaignInfo)*

- `dufr` – `Dunmar Fellowship`
- `clee` – `Heroes of Cleenseau`
- `gw` - `Heroes of the Great War` 
- `adma` - `Addermarch Mercenaries`
- `gl` - `Silver Tempests`

---

### Headers

These keys control the overall header “box” structure and supplemental lines:

`boxInfo`: Template for the “secondary info” line under the header.  `
`partOf`: Template for the “part of” line in the header.  

---

## Overrides

In addition to the global/type/page displayDefaults described above, several structures support per‑line overrides that fine‑tune how individual lines render:

- **Whereabouts entries**
	- A specific whereabouts object may contain its own `wOrigin`, `wHome`, `wPastHome`, `wCurrent`, `wPast`, `wLastKnown`, `wLastNoDate`, and even `wSecondary`.
	- These per‑line keys apply **only** when that line provides the derived whereabouts for the role in question (e.g., that line is the `current` or `lastKnown` at the target date).

- **Affiliations**
	- A specific affiliation object may contain:
		- `format` – full template string that completely replaces the `a*` defaults for that group.
		- `formatPast` / `formatCurrent` – pair of templates chosen based on whether the affiliation is still active.
		- Legacy `aNoDate`, `aPast`, `aPastWithStart`, `aCurrent` – mapped internally to `format` / `formatPast` / `formatCurrent`.
	- When any of these are present, they override the global `a*` templates for that group.

- **CampaignInfo entries**
	- Each `campaignInfo` object can supply:
		- `wParty` – full template string for that entry.
		- `format` – synonym for `wParty` on that entry.
	- If neither is present, the per‑type/page `wParty` is used.

**Rule of thumb:**  

- Global + type + page `displayDefaults` define the *baseline* style.  
- Per‑line overrides (`w*` on whereabouts, `format*` / per‑line `a*` on affiliations, `wParty`/`format` on campaignInfo) only apply to the specific line they live on and never change how other lines render.

---

## Header Format

```
# Display Name
*(pronuncation, if present)*
> [!info]+ boxName
> Secondary Info Line (boxInfo)
> Part of Line (partOf)
> Dynamic: Date Information
> Dynamic: Affilication Information
> > Dynamic: Location information (whereabouts)
> > Campaign information
```

## Type‑Specific Defaults
**Current as of 2025‑12‑10 (from `.obsidian/metadata.json`)**

The JSON blocks below show the effective displayDefaults for the primary page types after merging `requiredDisplayDefaults` with `typeDisplayDefaults[pageType]`. Page‑level `displayDefaults` in frontmatter are not shown here but would be merged on top of these structures at runtime.

### Person
```json
// person
{
  "startStatus": "born",
  "endStatus": "died",
  "wOrigin": "Originally from: <origin:3Fr>",
  "wOriginU": "Originally from: <origin:3Fr>",
  "wHome": "Based <home:3Frq>",
  "wHomeU": "",
  "wPastHome": "Lived <home:3Frq>",
  "wPastHomeU": "",
  "wCurrent": "Currently <current:3Frq>",
  "wPast": "<end:u> <current:3Frq>",
  "wLastKnown": "Last known location (as of <lastknowndate>): <lastknown:3Fr>",
  "wLastNoDate": "Last known location: <lastknown:3Fr>",
  "wParty": "<met:u> <person:q> on <target> <current:3Frq>",
  "wSecondary": "",
  "dCurrent": "<start:u> <startDate> (<length> old)",
  "dPastHasStart": "b. <startDate> - d. <endDate>, <end> at age <length>",
  "dPast": "<end:u> <endDate>",
  "boxName": "Biographical Info",
  "partOf": "",
  "boxInfo": "<ancestry:UA> <species:sAU> <(()subspecies:s())> <(()pronouns())>, <(of )primary>\\n<(()ka())>",
  "aNoDate": "<affiliationtitle:tx> of <affiliations>",
  "aPast": "<affiliationtitle:tx> of <affiliations> (until <endDate>)",
  "aCurrent": "<affiliationtitle:tx> of <affiliations> (since <startDate>)",
  "aPastHasStart": "<affiliationtitle:tx> of <affiliations> (<startDate> - <endDate>)",
  "mechanicsLink": "Character Sheet",
  "linkText": "by",
  "ruledBy": "",
  "ltPlace": "in",
  "ltPerson": "by",
  "ltItem": "by",
  "ltOrg": "member of",
  "defArt": ""
}
```

### Place
```json
// place
{
  "startStatus": "founded",
  "endStatus": "destroyed",
  "wOrigin": "",
  "wOriginU": "",
  "wHome": "<ancestry:UA> <subtypeof:UA> <typeof:UA> <(of )primary> <home:5Fq>",
  "wHomeU": "",
  "wPastHome": "<ancestry:UA> <subtypeof:UA> <typeof:UA> <(of )primary> <home:5Fq>",
  "wPastHomeU": "",
  "wCurrent": "Located <current:5Fq>",
  "wPast": "Was located <current:5Frq>",
  "wLastKnown": "Last known location (as of <lastknowndate>): <lastknown:3Fr>",
  "wLastNoDate": "Last known location: <lastknown:3Fr>",
  "wParty": "<met:u> <person:q> on <target> <current:3Frq>",
  "wSecondary": "Located <secondary:5Fq>",
  "dCurrent": "<start:u> <startDate> (<length> ago)",
  "dPastHasStart": "existed <startDate> - <endDate>, <end> after <length>",
  "dPast": "<end:u> <endDate>",
  "boxName": "Information",
  "partOf": "",
  "boxInfo": "<population>",
  "aNoDate": "<affiliationtitle:tx> of <affiliations>",
  "aPast": "<affiliationtitle:tx> of <affiliations> (until <endDate>)",
  "aCurrent": "<affiliationtitle:tx> of <affiliations> (since <startDate>)",
  "aPastHasStart": "<affiliationtitle:tx> of <affiliations> (<startDate> - <endDate>)",
  "mechanicsLink": "",
  "linkText": "in",
  "ruledBy": "<affiliationtitle:tx>: <name> <((since )startDate())>"
}
```

### Item
```json
// item
{
  "startStatus": "created",
  "endStatus": "destroyed",
  "wOrigin": "<start:u> <origin:3Frq>",
  "wOriginU": "<start:u> by <origin:3Frq>",
  "wHome": "Owned <home:lirq>",
  "wHomeU": "",
  "wPastHome": "Was owned <home:lirq>",
  "wPastHomeU": "",
  "wCurrent": "Owned <current:lirq>",
  "wPast": "<end:u> <current:3Frq>",
  "wLastKnown": "Last known location (as of <lastknowndate>): <lastknown:3Fr>",
  "wLastNoDate": "Last known location: <lastknown:3Fr>",
  "wParty": "<met:u> <person:q> on <target> <current:3Frq>",
  "wSecondary": "",
  "dCurrent": "<start:u> <startDate> (<length> ago)",
  "dPastHasStart": "existed <startDate> - <endDate>, <end> after <length>",
  "dPast": "<end:u> <endDate>",
  "boxName": "Information",
  "partOf": "",
  "boxInfo": "(<rarity:s> <ancestry> <subtypeof:s> <typeof:s>)",
  "aNoDate": "<affiliationtitle:tx> of <affiliations>",
  "aPast": "<affiliationtitle:tx> of <affiliations> (until <endDate>)",
  "aCurrent": "<affiliationtitle:tx> of <affiliations> (since <startDate>)",
  "aPastHasStart": "<affiliationtitle:tx> of <affiliations> (<startDate> - <endDate>)",
  "mechanicsLink": "Mechanics",
  "linkText": "in",
  "ruledBy": "",
  "ltPlace": "in"
}
```

### Organization
```json
// organization
{
  "startStatus": "founded",
  "endStatus": "disbanded",
  "wOrigin": "<start:u> <origin:q>",
  "wOriginU": "",
  "wHome": "Based <home:q>",
  "wHomeU": "",
  "wPastHome": "Was based <home:q>",
  "wPastHomeU": "",
  "wCurrent": "Currently <current:3Frq>",
  "wPast": "<end:u> <current:3Frq>",
  "wLastKnown": "Last known location (as of <lastknowndate>): <lastknown:3Fr>",
  "wLastNoDate": "Last known location: <lastknown:3Fr>",
  "wParty": "<met:u> <person:q> on <target> <current:3Frq>",
  "wSecondary": "",
  "dCurrent": "<start:u> <startDate> (<length> ago)",
  "dPastHasStart": "existed <startDate> - <endDate>, <end> after <length>",
  "dPast": "<end:u> <endDate>",
  "boxName": "Information",
  "partOf": "<(Parent Organization: )partof>",
  "boxInfo": "<ancestry:UA> <subtypeof:UA> <typeof:UA>",
  "aNoDate": "<affiliationtitle:tx> of <affiliations>",
  "aPast": "<affiliationtitle:tx> of <affiliations> (until <endDate>)",
  "aCurrent": "<affiliationtitle:tx> of <affiliations> (since <startDate>)",
  "aPastHasStart": "<affiliationtitle:tx> of <affiliations> (<startDate> - <endDate>)",
  "mechanicsLink": "",
  "linkText": "by",
  "ruledBy": "<affiliationtitle:tx>: <name> <((since )startDate())>",
  "ltPlace": "in",
  "ltPerson": "with",
  "ltItem": "owned by",
  "ltOrg": "part of"
}
```

### Event
```json
// event
{
  "startStatus": "started in",
  "endStatus": "ended in",
  "wOrigin": "<startStatus:u> <origin:q>",
  "wOriginU": "<origin:3Fru>",
  "wHome": "Occurring <home:q>",
  "wHomeU": "",
  "wPastHome": "Happened <home:q>",
  "wPastHomeU": "",
  "wCurrent": "Currently <current:3Frq>",
  "wPast": "<end:u> <current:3Frq>",
  "wLastKnown": "Last known location (as of <lastknowndate>): <lastknown:3Fr>",
  "wLastNoDate": "Last known location: <lastknown:3Fr>",
  "wParty": "<met:u> <person:q> on <target> <current:3Frq>",
  "wSecondary": "",
  "dCurrent": "<start:u> <startDate> (<length> ago)",
  "dPastHasStart": "<startDate> - <endDate>, lasted <length>",
  "dPast": "<end:u> <endDate>",
  "boxName": "Information",
  "partOf": "<(part of )partof:ty>",
  "boxInfo": "",
  "aNoDate": "<affiliationtitle:tx> of <affiliations>",
  "aPast": "<affiliationtitle:tx> of <affiliations> (until <endDate>)",
  "aCurrent": "<affiliationtitle:tx> of <affiliations> (since <startDate>)",
  "aPastHasStart": "<affiliationtitle:tx> of <affiliations> (<startDate> - <endDate>)",
  "mechanicsLink": "",
  "linkText": "",
  "ruledBy": ""
}
```

